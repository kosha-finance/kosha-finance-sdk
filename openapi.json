{
  "openapi": "3.1.0",
  "info": {
    "title": "Kosha Finance API",
    "description": "\n## Kosha Predictive API\n\nReal-time financial exception prediction API with multi-tenant architecture.\n\n### Features\n\n- **Multi-tenant Architecture**: Secure tenant isolation using PostgreSQL RLS and JWT authentication\n- **Workspace Management**: Two-level isolation (tenant → space → data) for organizing resources\n- **AI-Powered Predictions**: Real-time financial exception prediction using machine learning\n- **Comprehensive Security**: Rate limiting, CORS, security headers, and audit logging\n- **RESTful Design**: Standard HTTP methods and status codes with JSON responses\n\n### Authentication\n\nAll authenticated endpoints require a Bearer token in the Authorization header:\n\n```\nAuthorization: Bearer <access_token>\n```\n\nTo obtain tokens:\n1. Register a user: `POST /api/v1/auth/register`\n2. Login: `POST /api/v1/auth/login`\n3. Use the returned `access_token` for authenticated requests\n4. Refresh tokens before expiry: `POST /api/v1/auth/refresh`\n\nAccess tokens expire after 15 minutes. Refresh tokens expire after 7 days.\n\n### Rate Limiting\n\nAPI requests are rate-limited per tenant and endpoint type:\n- **Auth endpoints**: 10 requests/minute\n- **Read operations**: 100 requests/minute\n- **Write operations**: 30 requests/minute\n- **Admin endpoints**: 200 requests/minute\n- **Default**: 60 requests/minute\n\nRate limit headers are included in all responses:\n- `X-RateLimit-Limit`: Maximum requests allowed\n- `X-RateLimit-Remaining`: Remaining requests\n- `X-RateLimit-Reset`: Unix timestamp when limit resets\n\n### Error Responses\n\nAll errors follow a consistent format:\n\n```json\n{\n  \"error\": {\n    \"code\": \"VALIDATION_ERROR\",\n    \"message\": \"Human-readable error message\",\n    \"details\": {\n      \"field\": \"specific_field\",\n      \"issue\": \"validation issue\"\n    }\n  },\n  \"request_id\": \"uuid-for-support\"\n}\n```\n\nCommon HTTP status codes:\n- `400` Bad Request - Invalid input data\n- `401` Unauthorized - Missing or invalid authentication\n- `403` Forbidden - Insufficient permissions\n- `404` Not Found - Resource does not exist\n- `409` Conflict - Resource already exists\n- `422` Unprocessable Entity - Validation error\n- `429` Too Many Requests - Rate limit exceeded\n- `500` Internal Server Error - Server error (contact support)\n- `503` Service Unavailable - Service temporarily unavailable\n\n### Pagination\n\nList endpoints support pagination with the following query parameters:\n- `page`: Page number (default: 1, minimum: 1)\n- `page_size`: Items per page (default: 20, maximum: 100)\n\nPaginated responses include:\n- `total`: Total number of items\n- `page`: Current page number\n- `page_size`: Items per page\n- `total_pages`: Total number of pages\n- `has_more`: Whether more pages exist\n\n### Support\n\nFor technical support, include the `request_id` from error responses when contacting support.\n\n### Environments\n\n- **Production**: `https://api.kosha.example.com`\n- **Staging**: `https://api-staging.kosha.example.com`\n- **Development**: `http://localhost:8000`\n    ",
    "contact": {
      "name": "Kosha Finance Team",
      "email": "opensource@kosha.finance",
      "url": "https://kosha.finance"
    },
    "license": {
      "name": "Proprietary"
    },
    "version": "1.0.0"
  },
  "paths": {
    "/api/v1/auth/register": {
      "post": {
        "tags": [
          "Authentication",
          "Authentication"
        ],
        "summary": "Register new user",
        "description": "Register a new user for a tenant. Returns JWT access and refresh tokens.",
        "operationId": "register_api_v1_auth_register_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserRegistration"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "User registered successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TokenResponse"
                },
                "example": {
                  "access_token": "eyJhbGciOiJIUzI1NiIs...",
                  "refresh_token": "eyJhbGciOiJIUzI1NiIs...",
                  "token_type": "bearer",
                  "expires_in": 900,
                  "user": {
                    "user_id": "123e4567-e89b-12d3-a456-426614174000",
                    "tenant_id": "987fbc97-4bed-5078-9f07-9141ba07c9f3",
                    "tenant_subdomain": "acme",
                    "email": "john@acme.com",
                    "full_name": "John Doe",
                    "is_super_admin": false,
                    "is_active": true
                  }
                }
              }
            }
          },
          "409": {
            "description": "User already exists in tenant"
          },
          "400": {
            "description": "Invalid data"
          },
          "404": {
            "description": "Tenant not found"
          },
          "403": {
            "description": "Tenant is not active"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/login": {
      "post": {
        "tags": [
          "Authentication",
          "Authentication"
        ],
        "summary": "Login user",
        "description": "Authenticate user with email and password. Returns JWT tokens.",
        "operationId": "login_api_v1_auth_login_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserLogin"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TokenResponse"
                },
                "example": {
                  "access_token": "eyJhbGciOiJIUzI1NiIs...",
                  "refresh_token": "eyJhbGciOiJIUzI1NiIs...",
                  "token_type": "bearer",
                  "expires_in": 900,
                  "user": {
                    "user_id": "123e4567-e89b-12d3-a456-426614174000",
                    "tenant_id": "987fbc97-4bed-5078-9f07-9141ba07c9f3",
                    "tenant_subdomain": "acme",
                    "email": "john@acme.com",
                    "full_name": "John Doe",
                    "is_super_admin": false,
                    "is_active": true,
                    "last_login_at": "2025-10-09T12:00:00Z"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Invalid credentials or user inactive"
          },
          "403": {
            "description": "Tenant is not active"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/refresh": {
      "post": {
        "tags": [
          "Authentication",
          "Authentication"
        ],
        "summary": "Refresh access token",
        "description": "Exchange refresh token for new access and refresh tokens.",
        "operationId": "refresh_token_api_v1_auth_refresh_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TokenRefresh"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Token refreshed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TokenResponse"
                }
              }
            }
          },
          "401": {
            "description": "Refresh token expired or invalid"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/auth/logout": {
      "post": {
        "tags": [
          "Authentication",
          "Authentication"
        ],
        "summary": "Logout user",
        "description": "Revoke access and refresh tokens (logout).",
        "operationId": "logout_api_v1_auth_logout_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TokenRefresh"
              }
            }
          },
          "required": true
        },
        "responses": {
          "204": {
            "description": "Logout successful"
          },
          "401": {
            "description": "Not authenticated"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT": []
          }
        ]
      }
    },
    "/api/v1/auth/me": {
      "get": {
        "tags": [
          "Authentication",
          "Authentication"
        ],
        "summary": "Get current user info",
        "description": "Get information about the currently authenticated user.",
        "operationId": "get_current_user_info_api_v1_auth_me_get",
        "responses": {
          "200": {
            "description": "User information retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UserInfo"
                },
                "example": {
                  "user_id": "123e4567-e89b-12d3-a456-426614174000",
                  "tenant_id": "987fbc97-4bed-5078-9f07-9141ba07c9f3",
                  "tenant_subdomain": "acme",
                  "email": "john@acme.com",
                  "full_name": "John Doe",
                  "is_super_admin": false,
                  "is_active": true,
                  "last_login_at": "2025-10-09T12:00:00Z"
                }
              }
            }
          },
          "401": {
            "description": "Not authenticated"
          }
        },
        "security": [
          {
            "JWT": []
          }
        ]
      }
    },
    "/api/v1/auth/password/change": {
      "post": {
        "tags": [
          "Authentication",
          "Authentication"
        ],
        "summary": "Change password",
        "description": "Change password for the currently authenticated user.",
        "operationId": "change_password_api_v1_auth_password_change_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PasswordChange"
              }
            }
          },
          "required": true
        },
        "responses": {
          "204": {
            "description": "Password changed successfully"
          },
          "400": {
            "description": "Invalid current password or weak new password"
          },
          "401": {
            "description": "Not authenticated"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT": []
          }
        ]
      }
    },
    "/free-tools/fx-precision-scout": {
      "post": {
        "tags": [
          "Free Tools",
          "Free Tools - Lead Magnets"
        ],
        "summary": "Fx Precision Scout Endpoint",
        "description": "Endpoint for the Kosha FX Precision Scout (Tool 4).\nInstantly quantifies high-precision variance in Basis Points.",
        "operationId": "fx_precision_scout_endpoint_free_tools_fx_precision_scout_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PrecisionInput"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PrecisionOutput"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/paid-api/v1/reconcile": {
      "post": {
        "tags": [
          "Paid API",
          "Paid Tier - Core Predictive Engine"
        ],
        "summary": "Reconcile Transaction",
        "description": "Primary endpoint for processing a single transaction and returning\nthe exception prediction and audit hash (The UC-3 Core Function).",
        "operationId": "reconcile_transaction_paid_api_v1_reconcile_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TransactionInput"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InferenceResult"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/paid-api/v1/reconcile/batch": {
      "post": {
        "tags": [
          "Paid API",
          "Paid Tier - Core Predictive Engine"
        ],
        "summary": "Reconcile Batch",
        "description": "Process multiple transactions in a single request.\n\nMaximum batch size is limited to prevent timeouts and ensure responsiveness.\nFor larger datasets, split into multiple batch requests.",
        "operationId": "reconcile_batch_paid_api_v1_reconcile_batch_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "items": {
                  "$ref": "#/components/schemas/TransactionInput"
                },
                "type": "array",
                "title": "Transactions"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/InferenceResult"
                  },
                  "type": "array",
                  "title": "Response Reconcile Batch Paid Api V1 Reconcile Batch Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/reconcile": {
      "post": {
        "tags": [
          "API v1",
          "Paid Tier - Core Predictive Engine"
        ],
        "summary": "Reconcile Transaction",
        "description": "Primary endpoint for processing a single transaction and returning\nthe exception prediction and audit hash (The UC-3 Core Function).",
        "operationId": "reconcile_transaction_api_v1_reconcile_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TransactionInput"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InferenceResult"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/reconcile/batch": {
      "post": {
        "tags": [
          "API v1",
          "Paid Tier - Core Predictive Engine"
        ],
        "summary": "Reconcile Batch",
        "description": "Process multiple transactions in a single request.\n\nMaximum batch size is limited to prevent timeouts and ensure responsiveness.\nFor larger datasets, split into multiple batch requests.",
        "operationId": "reconcile_batch_api_v1_reconcile_batch_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "items": {
                  "$ref": "#/components/schemas/TransactionInput"
                },
                "type": "array",
                "title": "Transactions"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/InferenceResult"
                  },
                  "type": "array",
                  "title": "Response Reconcile Batch Api V1 Reconcile Batch Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/tenants/": {
      "post": {
        "tags": [
          "Tenant Management"
        ],
        "summary": "Create Tenant",
        "description": "Create a new tenant.\n\n**Requires super-admin privileges.**\n\n- Creates tenant with TRIAL status by default\n- Validates subdomain uniqueness\n- Records audit log entry",
        "operationId": "create_tenant_api_v1_tenants__post",
        "security": [
          {
            "JWT": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TenantCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TenantResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Tenant Management"
        ],
        "summary": "List Tenants",
        "description": "List all tenants with pagination.\n\n**Requires super-admin privileges.**\n\n- Supports filtering by status\n- Excludes soft-deleted tenants by default\n- Returns paginated results",
        "operationId": "list_tenants_api_v1_tenants__get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Page number",
              "default": 1,
              "title": "Page"
            },
            "description": "Page number"
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Items per page",
              "default": 20,
              "title": "Page Size"
            },
            "description": "Items per page"
          },
          {
            "name": "status_filter",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/TenantStatus"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by tenant status",
              "title": "Status Filter"
            },
            "description": "Filter by tenant status"
          },
          {
            "name": "include_deleted",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include soft-deleted tenants",
              "default": false,
              "title": "Include Deleted"
            },
            "description": "Include soft-deleted tenants"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TenantListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/tenants/{tenant_id}": {
      "get": {
        "tags": [
          "Tenant Management"
        ],
        "summary": "Get Tenant",
        "description": "Get a specific tenant by ID.\n\n**Requires super-admin privileges.**",
        "operationId": "get_tenant_api_v1_tenants__tenant_id__get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "tenant_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Tenant Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TenantResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Tenant Management"
        ],
        "summary": "Update Tenant",
        "description": "Update a tenant's information.\n\n**Requires super-admin privileges.**\n\n- Supports partial updates (only provided fields are updated)\n- Validates subdomain uniqueness if changed\n- Records audit log entry",
        "operationId": "update_tenant_api_v1_tenants__tenant_id__put",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "tenant_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Tenant Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TenantUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TenantResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Tenant Management"
        ],
        "summary": "Delete Tenant",
        "description": "Delete a tenant (soft delete by default).\n\n**Requires super-admin privileges.**\n\n- Default: Soft delete (sets deleted_at timestamp)\n- hard_delete=true: Permanently removes tenant (use with caution!)",
        "operationId": "delete_tenant_api_v1_tenants__tenant_id__delete",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "tenant_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Tenant Id"
            }
          },
          {
            "name": "hard_delete",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Permanently delete (default is soft delete)",
              "default": false,
              "title": "Hard Delete"
            },
            "description": "Permanently delete (default is soft delete)"
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/tenants/{tenant_id}/status": {
      "patch": {
        "tags": [
          "Tenant Management"
        ],
        "summary": "Update Tenant Status",
        "description": "Update a tenant's status.\n\n**Requires super-admin privileges.**\n\nThis is a separate endpoint because status changes are sensitive\nand may require additional authorization logic.",
        "operationId": "update_tenant_status_api_v1_tenants__tenant_id__status_patch",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "tenant_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Tenant Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TenantStatusUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TenantResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/feature-flags/": {
      "post": {
        "tags": [
          "Feature Flags (Admin)"
        ],
        "summary": "Create Feature Flag",
        "description": "Create a new feature flag.\n\n**Requires super-admin privileges.**\n\n- Creates global feature flag with default state\n- flag_key must be unique and follow pattern: ^[a-z0-9_]+$\n- default_enabled controls kill switch behavior\n\n**Kill Switch Logic:**\n- If default_enabled=False → feature OFF for ALL tenants (kill switch active)\n- If default_enabled=True → feature ON by default, can be overridden per tenant",
        "operationId": "create_feature_flag_api_v1_admin_feature_flags__post",
        "security": [
          {
            "JWT": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FeatureFlagCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FeatureFlagResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Feature Flags (Admin)"
        ],
        "summary": "List Feature Flags",
        "description": "List all feature flags.\n\n**Requires super-admin privileges.**\n\nQuery Parameters:\n- include_inactive: Include soft-deleted flags (default: False)",
        "operationId": "list_feature_flags_api_v1_admin_feature_flags__get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "include_inactive",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Include Inactive"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/FeatureFlagResponse"
                  },
                  "title": "Response List Feature Flags Api V1 Admin Feature Flags  Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/feature-flags/{flag_key}": {
      "get": {
        "tags": [
          "Feature Flags (Admin)"
        ],
        "summary": "Get Feature Flag",
        "description": "Get a specific feature flag with all tenant overrides.\n\n**Requires super-admin privileges.**\n\nReturns:\n- Feature flag details\n- All tenant-specific overrides",
        "operationId": "get_feature_flag_api_v1_admin_feature_flags__flag_key__get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "flag_key",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Flag Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FeatureFlagWithOverridesResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/feature-flags/{flag_id}": {
      "patch": {
        "tags": [
          "Feature Flags (Admin)"
        ],
        "summary": "Update Feature Flag",
        "description": "Update a feature flag.\n\n**Requires super-admin privileges.**\n\n- Only provided fields will be updated\n- flag_key cannot be changed (immutable)\n- Updating default_enabled affects all tenants without overrides\n- Cache is invalidated for all tenants",
        "operationId": "update_feature_flag_api_v1_admin_feature_flags__flag_id__patch",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "flag_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Flag Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FeatureFlagUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FeatureFlagResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Feature Flags (Admin)"
        ],
        "summary": "Delete Feature Flag",
        "description": "Delete a feature flag (soft delete).\n\n**Requires super-admin privileges.**\n\n- Sets is_active=False (soft delete)\n- Flag remains in database for audit trail\n- All tenant overrides remain but won't be evaluated\n- Cache is invalidated for all tenants",
        "operationId": "delete_feature_flag_api_v1_admin_feature_flags__flag_id__delete",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "flag_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Flag Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/feature-flags/{flag_id}/overrides": {
      "post": {
        "tags": [
          "Feature Flags (Admin)"
        ],
        "summary": "Create Tenant Override",
        "description": "Create a tenant-specific feature flag override.\n\n**Requires super-admin privileges.**\n\n- Allows enabling/disabling a feature for specific tenant\n- Overrides the global default for this tenant only\n- Cannot override kill switch (if global default_enabled=False, feature is OFF for all)",
        "operationId": "create_tenant_override_api_v1_admin_feature_flags__flag_id__overrides_post",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "flag_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Flag Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FeatureFlagTenantOverrideCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FeatureFlagTenantOverrideResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/feature-flags/overrides/{override_id}": {
      "patch": {
        "tags": [
          "Feature Flags (Admin)"
        ],
        "summary": "Update Tenant Override",
        "description": "Update a tenant override.\n\n**Requires super-admin privileges.**\n\n- Only provided fields will be updated\n- Cache is invalidated for the specific tenant",
        "operationId": "update_tenant_override_api_v1_admin_feature_flags_overrides__override_id__patch",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "override_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Override Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FeatureFlagTenantOverrideUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FeatureFlagTenantOverrideResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Feature Flags (Admin)"
        ],
        "summary": "Delete Tenant Override",
        "description": "Delete a tenant override (hard delete).\n\n**Requires super-admin privileges.**\n\n- Removes tenant-specific override\n- Tenant will fall back to global default\n- Cache is invalidated for the specific tenant",
        "operationId": "delete_tenant_override_api_v1_admin_feature_flags_overrides__override_id__delete",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "override_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Override Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/feature-flags/reports/tenant/{tenant_id}": {
      "get": {
        "tags": [
          "Feature Flags (Admin)"
        ],
        "summary": "Get Tenant Flag Report",
        "description": "Get feature flag summary for a specific tenant.\n\n**Requires super-admin privileges.**\n\nReturns:\n- List of enabled flags for this tenant\n- List of disabled flags for this tenant\n- Count of tenant-specific overrides",
        "operationId": "get_tenant_flag_report_api_v1_admin_feature_flags_reports_tenant__tenant_id__get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "tenant_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Tenant Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/TenantFlagSummary"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/admin/feature-flags/reports/flag/{flag_key}": {
      "get": {
        "tags": [
          "Feature Flags (Admin)"
        ],
        "summary": "Get Flag Usage Report",
        "description": "Get usage summary for a specific feature flag.\n\n**Requires super-admin privileges.**\n\nReturns:\n- How many tenants have this flag enabled/disabled\n- List of tenant IDs with flag enabled\n- Count of tenant-specific overrides\n- Total number of tenants in system",
        "operationId": "get_flag_usage_report_api_v1_admin_feature_flags_reports_flag__flag_key__get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "flag_key",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Flag Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FlagUsageSummary"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/feature-flags/evaluate": {
      "post": {
        "tags": [
          "Feature Flags (Evaluation)"
        ],
        "summary": "Evaluate Feature Flags",
        "description": "Evaluate multiple feature flags for the current user's tenant.\n\n**Requires authentication.**\n\n- Evaluates flags with kill switch logic\n- Uses Redis cache for performance (5-minute TTL)\n- Returns detailed evaluation results with source information\n\n**Kill Switch Logic:**\n1. If global flag is OFF → returns is_enabled=False (source: \"kill_switch\")\n2. If tenant override exists → returns override value (source: \"tenant_override\")\n3. Otherwise → returns global default (source: \"global_default\")\n\n**Cache Behavior:**\n- Results are cached for 5 minutes per tenant\n- Cache is invalidated when flags or overrides are modified",
        "operationId": "evaluate_feature_flags_api_v1_feature_flags_evaluate_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FeatureFlagEvaluationRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "items": {
                    "$ref": "#/components/schemas/FeatureFlagEvaluationResponse"
                  },
                  "type": "array",
                  "title": "Response Evaluate Feature Flags Api V1 Feature Flags Evaluate Post"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT": []
          }
        ]
      }
    },
    "/api/v1/feature-flags/evaluate/bulk": {
      "post": {
        "tags": [
          "Feature Flags (Evaluation)"
        ],
        "summary": "Evaluate Feature Flags Bulk",
        "description": "Bulk evaluate multiple feature flags (simplified response).\n\n**Requires authentication.**\n\n- Same logic as /evaluate but returns simple dict format\n- Useful for frontend applications that need quick boolean checks\n- Missing flags default to False\n\nReturns:\n```json\n{\n    \"flags\": {\n        \"schema_detection_enabled\": true,\n        \"fuzzy_matching_enabled\": false,\n        \"auto_approval_enabled\": false\n    }\n}\n```",
        "operationId": "evaluate_feature_flags_bulk_api_v1_feature_flags_evaluate_bulk_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FeatureFlagEvaluationRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/BulkFeatureFlagEvaluationResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT": []
          }
        ]
      }
    },
    "/api/v1/feature-flags/evaluate/{flag_key}": {
      "get": {
        "tags": [
          "Feature Flags (Evaluation)"
        ],
        "summary": "Evaluate Single Feature Flag",
        "description": "Evaluate a single feature flag for the current user's tenant.\n\n**Requires authentication.**\n\n- Convenient endpoint for checking individual flags\n- Same kill switch logic and caching as bulk evaluation",
        "operationId": "evaluate_single_feature_flag_api_v1_feature_flags_evaluate__flag_key__get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "flag_key",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Flag Key"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FeatureFlagEvaluationResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/spaces/": {
      "post": {
        "tags": [
          "Spaces"
        ],
        "summary": "Create Space",
        "description": "Create a new space within the current tenant.\n\n**Requires authentication.**\n\n- Space slug must be unique within the tenant\n- Space is automatically associated with the current tenant (from JWT)\n- Records audit log entry\n\nTwo-level isolation: tenant_id → space_id → data",
        "operationId": "create_space_api_v1_spaces__post",
        "security": [
          {
            "JWT": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SpaceCreate"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SpaceResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Spaces"
        ],
        "summary": "List Spaces",
        "description": "List all spaces for the current tenant with pagination.\n\n**Requires authentication.**\n\n- Only returns spaces for the current tenant (RLS enforced)\n- Excludes soft-deleted spaces by default\n- Returns paginated results",
        "operationId": "list_spaces_api_v1_spaces__get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Page number",
              "default": 1,
              "title": "Page"
            },
            "description": "Page number"
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Items per page",
              "default": 20,
              "title": "Page Size"
            },
            "description": "Items per page"
          },
          {
            "name": "include_deleted",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include soft-deleted spaces",
              "default": false,
              "title": "Include Deleted"
            },
            "description": "Include soft-deleted spaces"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SpaceListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/spaces/{space_id}": {
      "get": {
        "tags": [
          "Spaces"
        ],
        "summary": "Get Space",
        "description": "Get details of a specific space by ID.\n\n**Requires authentication.**\n\n- Only accessible if space belongs to current tenant (RLS enforced)\n- Returns 404 if space not found or belongs to different tenant",
        "operationId": "get_space_api_v1_spaces__space_id__get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "space_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Space Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SpaceResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Spaces"
        ],
        "summary": "Update Space",
        "description": "Update a space (partial update).\n\n**Requires authentication.**\n\n- Only accessible if space belongs to current tenant (RLS enforced)\n- Slug cannot be changed (immutable after creation)\n- Records audit log entry",
        "operationId": "update_space_api_v1_spaces__space_id__patch",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "space_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Space Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SpaceUpdate"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SpaceResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Spaces"
        ],
        "summary": "Delete Space",
        "description": "Delete a space (soft delete by default).\n\n**Requires authentication.**\n\n- Only accessible if space belongs to current tenant (RLS enforced)\n- Soft delete: Sets deleted_at timestamp and is_active=false\n- Hard delete: Permanently removes space (use with caution)\n- Records audit log entry\n\n**Warning:** Hard delete will fail if space has associated data (files, etc.)\ndue to RESTRICT foreign key constraints.",
        "operationId": "delete_space_api_v1_spaces__space_id__delete",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "space_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Space Id"
            }
          },
          {
            "name": "hard_delete",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Permanently delete (default is soft delete)",
              "default": false,
              "title": "Hard Delete"
            },
            "description": "Permanently delete (default is soft delete)"
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/spaces/by-slug/{space_slug}": {
      "get": {
        "tags": [
          "Spaces"
        ],
        "summary": "Get Space By Slug",
        "description": "Get details of a specific space by slug.\n\n**Requires authentication.**\n\n- Only accessible if space belongs to current tenant (RLS enforced)\n- Returns 404 if space not found or belongs to different tenant",
        "operationId": "get_space_by_slug_api_v1_spaces_by_slug__space_slug__get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "space_slug",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Space Slug"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SpaceResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/files/upload": {
      "post": {
        "tags": [
          "Files"
        ],
        "summary": "Upload file with optional schema detection",
        "description": "Upload a CSV file to S3 and optionally detect its schema using AI.",
        "operationId": "upload_file_api_v1_files_upload_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_upload_file_api_v1_files_upload_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_FileUploadResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT": []
          }
        ]
      }
    },
    "/api/v1/files/": {
      "get": {
        "tags": [
          "Files"
        ],
        "summary": "List Files",
        "description": "List all files for the current tenant.\n\n**Requires authentication.**\n\n- Automatically filtered by tenant_id via RLS\n- Supports pagination\n- Excludes soft-deleted files by default\n- Returns empty list if no files found (not 404)\n\nSecurity: RLS ensures only tenant's own files are returned.",
        "operationId": "list_files_api_v1_files__get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Page number",
              "default": 1,
              "title": "Page"
            },
            "description": "Page number"
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 1000,
              "minimum": 1,
              "description": "Items per page",
              "default": 100,
              "title": "Page Size"
            },
            "description": "Items per page"
          },
          {
            "name": "include_deleted",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include soft-deleted files",
              "default": false,
              "title": "Include Deleted"
            },
            "description": "Include soft-deleted files"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FileListResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/files/{file_id}": {
      "get": {
        "tags": [
          "Files"
        ],
        "summary": "Get File",
        "description": "Get details for a specific file.\n\n**Requires authentication.**\n\n- Returns 404 if file doesn't exist or belongs to another tenant\n- RLS automatically enforces tenant isolation\n\nSecurity: Returns 404 (not 403) to avoid leaking file existence.",
        "operationId": "get_file_api_v1_files__file_id__get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "file_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "File Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FileResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Files"
        ],
        "summary": "Update File",
        "description": "Update file metadata.\n\n**Requires authentication.**\n\n- Only allows updating certain metadata fields\n- Cannot modify file content (s3_key, file_size_bytes, etc.)\n- Returns 404 if file doesn't exist or belongs to another tenant\n- Records audit log entry\n\nSecurity: RLS prevents cross-tenant updates.",
        "operationId": "update_file_api_v1_files__file_id__patch",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "file_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "File Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/FileUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/FileResponse"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Files"
        ],
        "summary": "Delete File",
        "description": "Soft delete a file.\n\n**Requires authentication.**\n\n- Sets deleted_at timestamp (soft delete)\n- Does not physically delete from database or S3\n- Returns 404 if file doesn't exist or belongs to another tenant\n- Records audit log entry\n\nSecurity: RLS prevents cross-tenant deletion.",
        "operationId": "delete_file_api_v1_files__file_id__delete",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "file_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "File Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "additionalProperties": true,
                  "title": "Response Delete File Api V1 Files  File Id  Delete"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/schemas/standard-fields": {
      "get": {
        "tags": [
          "Schemas"
        ],
        "summary": "List Standard Transaction Fields",
        "description": "Returns all standard Kosha transaction fields that CSV columns can be mapped to.\n\n    **Public endpoint** - No authentication required.\n\n    Use this endpoint to understand the available target fields when reviewing or\n    modifying schema mappings. Each field includes its data type, whether it's required,\n    and an example value.",
        "operationId": "list_standard_fields_api_v1_schemas_standard_fields_get",
        "responses": {
          "200": {
            "description": "Successfully retrieved standard fields list",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_StandardFieldsResponse_"
                },
                "example": {
                  "success": true,
                  "data": {
                    "fields": [
                      {
                        "field_name": "transaction_id",
                        "required": true,
                        "description": "Unique transaction identifier",
                        "data_type": "string",
                        "example": "txn_1234567890"
                      },
                      {
                        "field_name": "amount",
                        "required": true,
                        "description": "Transaction amount (in smallest currency unit, e.g., cents)",
                        "data_type": "integer",
                        "example": "1000"
                      }
                    ]
                  },
                  "meta": {
                    "request_id": "req_abc123",
                    "timestamp": "2025-10-18T12:00:00Z",
                    "version": "v1"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT": []
          }
        ]
      }
    },
    "/api/v1/schemas/detect": {
      "post": {
        "tags": [
          "Schemas"
        ],
        "summary": "Detect CSV Schema with AI",
        "description": "Analyzes an uploaded CSV file and uses Claude AI to detect its schema.\n\n    **Requires authentication** and `LLM_ANTHROPIC_API_KEY` environment variable.\n\n    This endpoint:\n    - Reads CSV headers and sample rows from the file\n    - Uses Claude AI to identify the provider type (Stripe, PayPal, bank statements, etc.)\n    - Automatically maps CSV columns to Kosha's standard transaction fields\n    - Provides confidence scores and reasoning for the detection\n    - Identifies any unmapped columns or data quality issues\n    - Caches results for 24 hours for performance\n\n    **Security**: Row-Level Security ensures the file belongs to your current tenant and space.",
        "operationId": "detect_schema_api_v1_schemas_detect_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SchemaDetectRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Schema successfully detected and created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_SchemaResponse_"
                },
                "example": {
                  "success": true,
                  "data": {
                    "schema_id": "550e8400-e29b-41d4-a716-446655440000",
                    "tenant_id": "123e4567-e89b-12d3-a456-426614174000",
                    "space_id": "789e0123-e89b-12d3-a456-426614174000",
                    "file_id": "abcd1234-e89b-12d3-a456-426614174000",
                    "provider_type": "stripe_payments",
                    "provider_confidence": "0.95",
                    "column_mappings": {
                      "Amount": "amount",
                      "Created": "transaction_date",
                      "Customer Email": "customer_email"
                    },
                    "detection_metadata": {
                      "reasoning": "Strong indicators of Stripe payment export",
                      "unmapped_columns": [
                        "Description"
                      ],
                      "quality_issues": []
                    },
                    "status": "detected",
                    "created_at": "2025-10-18T12:00:00Z",
                    "updated_at": "2025-10-18T12:00:00Z"
                  },
                  "meta": {
                    "request_id": "req_abc123",
                    "timestamp": "2025-10-18T12:00:00Z",
                    "version": "v1"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Missing or invalid authentication, or tenant/space context missing",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "UNAUTHORIZED",
                    "message": "Tenant and space context required",
                    "details": {}
                  },
                  "meta": {
                    "request_id": "req_abc123",
                    "timestamp": "2025-10-18T12:00:00Z",
                    "version": "v1"
                  }
                }
              }
            }
          },
          "404": {
            "description": "File not found or not accessible in current tenant+space",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "File abc123 not found",
                    "details": {}
                  },
                  "meta": {
                    "request_id": "req_abc123",
                    "timestamp": "2025-10-18T12:00:00Z",
                    "version": "v1"
                  }
                }
              }
            }
          },
          "500": {
            "description": "Claude AI API error or internal server error",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "LLM_API_ERROR",
                    "message": "Schema detection failed: Claude API timeout",
                    "details": {}
                  },
                  "meta": {
                    "request_id": "req_abc123",
                    "timestamp": "2025-10-18T12:00:00Z",
                    "version": "v1"
                  }
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT": []
          }
        ]
      }
    },
    "/api/v1/schemas/stats": {
      "get": {
        "tags": [
          "Schemas"
        ],
        "summary": "Get schema statistics",
        "description": "Get comprehensive statistics for all schemas in the space.",
        "operationId": "get_stats_endpoint_api_v1_schemas_stats_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_SchemaStatsResponse_"
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT": []
          }
        ]
      }
    },
    "/api/v1/schemas/search": {
      "get": {
        "tags": [
          "Schemas"
        ],
        "summary": "Search schemas",
        "description": "Full-text search across schemas with relevance ranking.",
        "operationId": "search_schemas_endpoint_api_v1_schemas_search_get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "query",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Query"
            }
          },
          {
            "name": "provider_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Provider Type"
            }
          },
          {
            "name": "status_filter",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Status Filter"
            }
          },
          {
            "name": "is_active",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Is Active"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 20,
              "title": "Limit"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_SearchResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/schemas/templates": {
      "get": {
        "tags": [
          "Schemas"
        ],
        "summary": "List schema templates",
        "description": "Get list of available pre-configured schema templates.",
        "operationId": "list_templates_endpoint_api_v1_schemas_templates_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_TemplateListResponse_"
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT": []
          }
        ]
      }
    },
    "/api/v1/schemas/templates/{template_id}": {
      "get": {
        "tags": [
          "Schemas"
        ],
        "summary": "Get schema template",
        "description": "Get a specific schema template by ID.",
        "operationId": "get_template_endpoint_api_v1_schemas_templates__template_id__get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "template_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Template Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_SchemaTemplateResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/schemas/from-template": {
      "post": {
        "tags": [
          "Schemas"
        ],
        "summary": "Create schema from template",
        "description": "Create a new schema from a pre-configured template.",
        "operationId": "create_from_template_endpoint_api_v1_schemas_from_template_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateFromTemplateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_SchemaResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT": []
          }
        ]
      }
    },
    "/api/v1/schemas/{schema_id}": {
      "get": {
        "tags": [
          "Schemas"
        ],
        "summary": "Get Schema by ID",
        "description": "Retrieves detailed information for a specific schema.\n\n    **Requires authentication.**\n\n    Returns the complete schema including provider detection results, column mappings,\n    confidence scores, and confirmation status. If the schema doesn't exist or belongs\n    to a different tenant/space, returns 404.\n\n    **Security**: Row-Level Security enforces tenant+space isolation. Returns 404 (not 403)\n    to avoid leaking information about schema existence in other tenants.",
        "operationId": "get_schema_api_v1_schemas__schema_id__get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "schema_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Schema Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Schema found and returned successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_SchemaResponse_"
                },
                "example": {
                  "success": true,
                  "data": {
                    "schema_id": "550e8400-e29b-41d4-a716-446655440000",
                    "tenant_id": "123e4567-e89b-12d3-a456-426614174000",
                    "space_id": "789e0123-e89b-12d3-a456-426614174000",
                    "file_id": "abcd1234-e89b-12d3-a456-426614174000",
                    "provider_type": "stripe_payments",
                    "provider_confidence": "0.95",
                    "column_mappings": {
                      "Amount": "amount",
                      "Created": "transaction_date"
                    },
                    "detection_metadata": {
                      "reasoning": "Strong Stripe indicators"
                    },
                    "status": "confirmed",
                    "confirmed_by": "user123",
                    "confirmed_at": "2025-10-18T12:30:00Z",
                    "created_at": "2025-10-18T12:00:00Z",
                    "updated_at": "2025-10-18T12:30:00Z"
                  },
                  "meta": {
                    "request_id": "req_abc123",
                    "timestamp": "2025-10-18T13:00:00Z",
                    "version": "v1"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Missing authentication or tenant/space context",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "UNAUTHORIZED",
                    "message": "Tenant and space context required",
                    "details": {}
                  }
                }
              }
            }
          },
          "404": {
            "description": "Schema not found or not accessible",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "Schema 550e8400-e29b-41d4-a716-446655440000 not found",
                    "details": {}
                  }
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "patch": {
        "tags": [
          "Schemas"
        ],
        "summary": "Update Schema",
        "description": "Update schema mappings and rules.",
        "operationId": "update_schema_endpoint_api_v1_schemas__schema_id__patch",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "schema_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Schema Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SchemaUpdateRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_SchemaResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/schemas/file/{file_id}": {
      "get": {
        "tags": [
          "Schemas"
        ],
        "summary": "Get Schema by File ID",
        "description": "Retrieves the schema associated with a specific uploaded file.\n\n    **Requires authentication.**\n\n    Looks up the schema that was detected for the given file. Checks Redis cache first\n    for fast retrieval, then falls back to the database if not cached. Returns 404 if\n    no schema has been detected for this file yet.\n\n    **Security**: Row-Level Security ensures the file belongs to your current tenant and space.\n    Returns 404 (not 403) to avoid leaking information about file existence.",
        "operationId": "get_schema_by_file_api_v1_schemas_file__file_id__get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "file_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "File Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Schema found for the specified file",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_SchemaResponse_"
                },
                "example": {
                  "success": true,
                  "data": {
                    "schema_id": "550e8400-e29b-41d4-a716-446655440000",
                    "file_id": "abcd1234-e89b-12d3-a456-426614174000",
                    "provider_type": "stripe_payments",
                    "provider_confidence": "0.95",
                    "column_mappings": {
                      "Amount": "amount"
                    },
                    "status": "detected",
                    "created_at": "2025-10-18T12:00:00Z"
                  },
                  "meta": {
                    "request_id": "req_abc123"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Missing authentication or tenant/space context",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "UNAUTHORIZED",
                    "message": "Tenant and space context required",
                    "details": {}
                  }
                }
              }
            }
          },
          "404": {
            "description": "No schema found for this file",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "No schema found for file abcd1234-e89b-12d3-a456-426614174000",
                    "details": {}
                  }
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/schemas/{schema_id}/confirm": {
      "patch": {
        "tags": [
          "Schemas"
        ],
        "summary": "Confirm, Reject, or Modify Schema",
        "description": "Updates the status of a detected schema based on user review.\n\n    **Requires authentication.**\n\n    After AI detection, users can:\n    - **Confirm** (`status=\"confirmed\"`): Accept the detected schema as-is\n    - **Reject** (`status=\"rejected\"`): Mark the detection as incorrect (won't be used for processing)\n    - **Modify** (`status=\"modified\"`): Accept with custom column mapping adjustments\n\n    When modifying, provide the corrected `column_mappings` in the request body.\n    The endpoint records who confirmed/modified the schema and when.\n\n    **Security**: Row-Level Security ensures the schema belongs to your current tenant and space.",
        "operationId": "confirm_schema_api_v1_schemas__schema_id__confirm_patch",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "schema_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Schema Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SchemaConfirmRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Schema status successfully updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_SchemaResponse_"
                },
                "example": {
                  "success": true,
                  "data": {
                    "schema_id": "550e8400-e29b-41d4-a716-446655440000",
                    "provider_type": "stripe_payments",
                    "column_mappings": {
                      "Amount": "amount"
                    },
                    "status": "confirmed",
                    "confirmed_by": "user123",
                    "confirmed_at": "2025-10-18T12:30:00Z",
                    "updated_at": "2025-10-18T12:30:00Z"
                  },
                  "meta": {
                    "request_id": "req_abc123"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Missing authentication or tenant/space context",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "UNAUTHORIZED",
                    "message": "Tenant and space context required",
                    "details": {}
                  }
                }
              }
            }
          },
          "404": {
            "description": "Schema not found or not accessible",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error": {
                    "code": "RESOURCE_NOT_FOUND",
                    "message": "Schema not found",
                    "details": {}
                  }
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/schemas": {
      "get": {
        "tags": [
          "Schemas"
        ],
        "summary": "List Schemas with Filters",
        "description": "List schemas with filters and pagination (soft-deleted schemas excluded by default).",
        "operationId": "list_schemas_endpoint_api_v1_schemas_get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "provider_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Provider Type"
            }
          },
          {
            "name": "status_filter",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Status Filter"
            }
          },
          {
            "name": "is_active",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Is Active"
            }
          },
          {
            "name": "include_deleted",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "default": false,
              "title": "Include Deleted"
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1,
              "title": "Page"
            }
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 100,
              "title": "Page Size"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PaginatedResponse_SchemaResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/schemas/{schema_id}/activate": {
      "post": {
        "tags": [
          "Schemas"
        ],
        "summary": "Activate Schema",
        "description": "Activate a schema.",
        "operationId": "activate_schema_endpoint_api_v1_schemas__schema_id__activate_post",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "schema_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Schema Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_SchemaResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/schemas/{schema_id}/deactivate": {
      "post": {
        "tags": [
          "Schemas"
        ],
        "summary": "Deactivate Schema",
        "description": "Deactivate a schema.",
        "operationId": "deactivate_schema_endpoint_api_v1_schemas__schema_id__deactivate_post",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "schema_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Schema Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_SchemaResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/schemas/active/{provider_type}": {
      "get": {
        "tags": [
          "Schemas"
        ],
        "summary": "Get Active Schema",
        "description": "Get active schema for a provider type.",
        "operationId": "get_active_schema_endpoint_api_v1_schemas_active__provider_type__get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "provider_type",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "title": "Provider Type"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_SchemaResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/schemas/{schema_id}/usage": {
      "post": {
        "tags": [
          "Schemas"
        ],
        "summary": "Log Schema Usage",
        "description": "Log schema usage.",
        "operationId": "log_usage_endpoint_api_v1_schemas__schema_id__usage_post",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "schema_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Schema Id"
            }
          },
          {
            "name": "file_id",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "File Id"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SchemaUsageLogRequest",
                "default": {
                  "processing_metadata": {}
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_SchemaUsageLogResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/schemas/{schema_id}/versions": {
      "get": {
        "tags": [
          "Schemas"
        ],
        "summary": "Get Schema Version History",
        "description": "Retrieve the complete version history for a schema.\n\n    Returns all versions in reverse chronological order (newest first).\n    RLS ensures only versions from the current tenant+space are returned.\n\n    Use this to:\n    - View all changes made to a schema over time\n    - See who made each change and when\n    - Review change summaries for each version",
        "operationId": "get_version_history_api_v1_schemas__schema_id__versions_get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "schema_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Schema Id"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Limit"
            }
          },
          {
            "name": "offset",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Offset"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_SchemaVersionListResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/schemas/{schema_id}/versions/{version_number}": {
      "get": {
        "tags": [
          "Schemas"
        ],
        "summary": "Get Specific Schema Version",
        "description": "Retrieve a specific version of a schema.\n\n    Returns the complete state of the schema at that version, including:\n    - Column mappings\n    - Validation rules\n    - Transform rules\n    - Change metadata (who, when, why)\n\n    Use this to:\n    - Review the exact state at a specific point in time\n    - Compare with current version\n    - Prepare for rollback",
        "operationId": "get_version_api_v1_schemas__schema_id__versions__version_number__get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "schema_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Schema Id"
            }
          },
          {
            "name": "version_number",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "Version Number"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_SchemaVersionResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/schemas/{schema_id}/rollback": {
      "post": {
        "tags": [
          "Schemas"
        ],
        "summary": "Rollback Schema to Previous Version",
        "description": "Rollback a schema to a previous version.\n\n    **Important**: This creates a NEW version (doesn't modify history) with the\n    state from the target version. The change_type will be 'rollback'.\n\n    All version history is preserved - rollback is just another version in the timeline.\n\n    Use this to:\n    - Undo problematic changes\n    - Restore a known good configuration\n    - Recover from errors\n\n    **Note**: You cannot rollback to the current or future version.",
        "operationId": "rollback_schema_api_v1_schemas__schema_id__rollback_post",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "schema_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Schema Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RollbackRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_SchemaVersionResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/schemas/{schema_id}/versions/compare": {
      "get": {
        "tags": [
          "Schemas"
        ],
        "summary": "Compare Two Schema Versions",
        "description": "Compare two versions of a schema and get a structured diff.\n\n    Returns:\n    - List of all changes with field paths\n    - Change types: 'added', 'removed', 'modified'\n    - Old and new values for each change\n    - Human-readable summary\n\n    Use this to:\n    - Understand what changed between versions\n    - Review changes before rollback\n    - Audit trail analysis\n    - Generate change reports",
        "operationId": "compare_versions_api_v1_schemas__schema_id__versions_compare_get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "schema_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Schema Id"
            }
          },
          {
            "name": "from_version",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "From Version"
            }
          },
          {
            "name": "to_version",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "title": "To Version"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_CompareVersionsResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/schemas/{schema_id}/changelog": {
      "get": {
        "tags": [
          "Schemas"
        ],
        "summary": "Get Schema Change Log",
        "description": "Retrieve the complete audit trail for a schema.\n\n    The change log is an immutable, append-only record of ALL operations:\n    - create, update, rollback, activate, deactivate\n    - Complete before/after state snapshots\n    - User, timestamp, IP address, user agent\n    - Reason for change (if provided)\n\n    Returns entries in reverse chronological order (newest first).\n\n    Use this for:\n    - Compliance auditing\n    - Security investigations\n    - Change tracking\n    - Debugging issues\n\n    **Note**: Change log entries cannot be modified or deleted.",
        "operationId": "get_change_log_api_v1_schemas__schema_id__changelog_get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "schema_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Schema Id"
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 1,
              "title": "Page"
            }
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "default": 50,
              "title": "Page Size"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_ChangeLogListResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/schemas/{schema_id}/dependencies": {
      "post": {
        "tags": [
          "Schemas"
        ],
        "summary": "Add schema dependency",
        "description": "Add a dependency relationship between two schemas. Both schemas must be in the same tenant and space.",
        "operationId": "add_dependency_endpoint_api_v1_schemas__schema_id__dependencies_post",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "schema_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Schema Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AddDependencyRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_SchemaDependencyResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      },
      "get": {
        "tags": [
          "Schemas"
        ],
        "summary": "Get schema dependencies",
        "description": "Get all schemas that this schema depends on.",
        "operationId": "get_dependencies_endpoint_api_v1_schemas__schema_id__dependencies_get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "schema_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Schema Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_DependencyListResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/schemas/{schema_id}/dependents": {
      "get": {
        "tags": [
          "Schemas"
        ],
        "summary": "Get schema dependents",
        "description": "Get all schemas that depend on this schema.",
        "operationId": "get_dependents_endpoint_api_v1_schemas__schema_id__dependents_get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "schema_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Schema Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_DependentListResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/schemas/{schema_id}/dependencies/{dependency_id}": {
      "delete": {
        "tags": [
          "Schemas"
        ],
        "summary": "Remove schema dependency",
        "description": "Remove a dependency relationship between schemas.",
        "operationId": "remove_dependency_endpoint_api_v1_schemas__schema_id__dependencies__dependency_id__delete",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "schema_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Schema Id"
            }
          },
          {
            "name": "dependency_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Dependency Id"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Successful Response"
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/schemas/batch-confirm": {
      "post": {
        "tags": [
          "Schemas"
        ],
        "summary": "Batch confirm schemas",
        "description": "Confirm multiple schemas at once, optionally activating them.",
        "operationId": "batch_confirm_endpoint_api_v1_schemas_batch_confirm_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BatchConfirmRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_BatchConfirmResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT": []
          }
        ]
      }
    },
    "/api/v1/schemas/batch-delete": {
      "post": {
        "tags": [
          "Schemas"
        ],
        "summary": "Batch delete schemas",
        "description": "Delete multiple schemas at once.",
        "operationId": "batch_delete_endpoint_api_v1_schemas_batch_delete_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BatchDeleteRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_BatchDeleteResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT": []
          }
        ]
      }
    },
    "/api/v1/schemas/batch-activate": {
      "post": {
        "tags": [
          "Schemas"
        ],
        "summary": "Batch activate schemas",
        "description": "Activate multiple schemas (max one per provider type).",
        "operationId": "batch_activate_endpoint_api_v1_schemas_batch_activate_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BatchActivateRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_BatchActivateResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT": []
          }
        ]
      }
    },
    "/api/v1/schemas/{schema_id}/validate": {
      "post": {
        "tags": [
          "Schemas"
        ],
        "summary": "Validate schema against file",
        "description": "Validate a schema's rules against a file or sample data.",
        "operationId": "validate_schema_endpoint_api_v1_schemas__schema_id__validate_post",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "schema_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Schema Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ValidationRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_ValidationResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/schemas/{schema_id}/export": {
      "get": {
        "tags": [
          "Schemas"
        ],
        "summary": "Export schema",
        "description": "Export schema in various formats (JSON, CSV, YAML, OpenAPI).",
        "operationId": "export_schema_endpoint_api_v1_schemas__schema_id__export_get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "schema_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Schema Id"
            }
          },
          {
            "name": "format",
            "in": "query",
            "required": false,
            "schema": {
              "type": "string",
              "default": "json",
              "title": "Format"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "string",
                  "title": "Response Export Schema Endpoint Api V1 Schemas  Schema Id  Export Get"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/schemas/{schema_id}/usage-history": {
      "get": {
        "tags": [
          "Schemas"
        ],
        "summary": "Get schema usage history",
        "description": "Get historical usage data for a schema over a time period.",
        "operationId": "get_usage_history_endpoint_api_v1_schemas__schema_id__usage_history_get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "schema_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Schema Id"
            }
          },
          {
            "name": "period_start",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Period Start"
            }
          },
          {
            "name": "period_end",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Period End"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_UsageHistoryResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/schemas/{schema_id}/test": {
      "post": {
        "tags": [
          "Schemas"
        ],
        "summary": "Test schema with sample data",
        "description": "Test schema processing with sample data (dry-run).",
        "operationId": "test_schema_endpoint_api_v1_schemas__schema_id__test_post",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "schema_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Schema Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TestSchemaRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_TestSchemaResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/schemas/{schema_id}/clone": {
      "post": {
        "tags": [
          "Schemas"
        ],
        "summary": "Clone schema to different space",
        "description": "Clone schema to a different space within the same tenant.",
        "operationId": "clone_schema_endpoint_api_v1_schemas__schema_id__clone_post",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "schema_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Schema Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CloneSchemaRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_SchemaResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/transactions/ingest": {
      "post": {
        "tags": [
          "Transactions"
        ],
        "summary": "Ingest transactions from file",
        "description": "Ingest transactions from an uploaded CSV file using a schema for column mapping.\n\n    **Requires**: Explicit space context via X-Space-ID or X-Space-Slug header\n\n    **Usage**:\n    ```bash\n    curl -X POST /api/v1/transactions/ingest \\\n      -H \"Authorization: Bearer $TOKEN\" \\\n      -H \"X-Space-Slug: retail\" \\\n      -H \"Content-Type: application/json\" \\\n      -d '{\n        \"file_id\": \"uuid\",\n        \"schema_id\": \"uuid\",\n        \"source_type\": \"customer\"\n      }'\n    ```\n\n    **Returns**:\n    - 201: Transactions ingested successfully\n    - 400: Invalid request (file not found, schema not found, validation failed)\n    - 401: Not authenticated\n    - 422: Space context required",
        "operationId": "ingest_transactions_api_v1_transactions_ingest_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/IngestTransactionsRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_IngestTransactionsResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT": []
          }
        ]
      }
    },
    "/api/v1/transactions/match": {
      "post": {
        "tags": [
          "Transactions"
        ],
        "summary": "Run matching between customer and provider transactions",
        "description": "Run multi-stage matching algorithm between customer and provider transactions.\n\n    **Matching Stages**:\n    1. Exact matching (transaction ID or all fields match)\n    2. Fuzzy matching (amount ±2%, date ±3 days, description >80% similar)\n    3. ML matching (placeholder for iteration 3-B)\n    4. LLM verification (placeholder for enterprise feature)\n\n    **Requires**: Explicit space context via X-Space-ID or X-Space-Slug header\n\n    **Usage**:\n    ```bash\n    curl -X POST /api/v1/transactions/match \\\n      -H \"Authorization: Bearer $TOKEN\" \\\n      -H \"X-Space-Slug: retail\" \\\n      -H \"Content-Type: application/json\" \\\n      -d '{\n        \"customer_file_id\": \"uuid\",\n        \"provider_file_id\": \"uuid\",\n        \"auto_approve_threshold\": 0.95\n      }'\n    ```\n\n    **Returns**:\n    - 200: Matching completed successfully\n    - 400: Invalid request (files not found, no transactions, etc.)\n    - 401: Not authenticated\n    - 422: Space context required",
        "operationId": "run_matching_api_v1_transactions_match_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RunMatchingRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_RunMatchingResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT": []
          }
        ]
      }
    },
    "/api/v1/transactions": {
      "get": {
        "tags": [
          "Transactions"
        ],
        "summary": "List transactions",
        "description": "List transactions for the current tenant and space.\n\n    **Requires**: Explicit space context via X-Space-ID or X-Space-Slug header\n\n    **Filtering**:\n    - source_type: Filter by customer or provider\n    - is_matched: Filter by matched status\n    - file_id: Filter by uploaded file\n\n    **Pagination**:\n    - page: Page number (1-based, default 1)\n    - page_size: Items per page (max 100, default 50)",
        "operationId": "list_transactions_api_v1_transactions_get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "source_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/SourceType"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by source type",
              "title": "Source Type"
            },
            "description": "Filter by source type"
          },
          {
            "name": "is_matched",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "boolean"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by matched status",
              "title": "Is Matched"
            },
            "description": "Filter by matched status"
          },
          {
            "name": "file_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "uuid"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by file ID",
              "title": "File Id"
            },
            "description": "Filter by file ID"
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Page number",
              "default": 1,
              "title": "Page"
            },
            "description": "Page number"
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Items per page",
              "default": 50,
              "title": "Page Size"
            },
            "description": "Items per page"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_TransactionListResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/transactions/match-sessions": {
      "get": {
        "tags": [
          "Transactions"
        ],
        "summary": "List match sessions",
        "description": "List match sessions for the current tenant and space.\n\n    Returns paginated list of matching sessions ordered by creation time (newest first).\n\n    **Filtering**:\n    - status: Filter by session status (pending, running, completed, failed, timeout)\n\n    **Pagination**:\n    - page: Page number (1-based, default 1)\n    - page_size: Items per page (max 100, default 50)\n\n    **Requires**: Explicit space context via X-Space-ID or X-Space-Slug header\n\n    **Returns**:\n    - 200: Match sessions list returned (may be empty)\n    - 401: Not authenticated\n    - 422: Space context required",
        "operationId": "list_match_sessions_api_v1_transactions_match_sessions_get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by status",
              "title": "Status"
            },
            "description": "Filter by status"
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Page number (1-based)",
              "default": 1,
              "title": "Page"
            },
            "description": "Page number (1-based)"
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Items per page",
              "default": 50,
              "title": "Page Size"
            },
            "description": "Items per page"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_MatchSessionListResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/transactions/{transaction_id}": {
      "get": {
        "tags": [
          "Transactions"
        ],
        "summary": "Get transaction by ID",
        "description": "Retrieve a single transaction by its ID.",
        "operationId": "get_transaction_api_v1_transactions__transaction_id__get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "transaction_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Transaction Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_TransactionResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/transactions/matches/candidates": {
      "get": {
        "tags": [
          "Transactions"
        ],
        "summary": "List match candidates",
        "description": "List match candidates (potential matches awaiting approval).\n\n    **Requires**: Explicit space context via X-Space-ID or X-Space-Slug header\n\n    **Filtering**:\n    - min_confidence: Minimum confidence score (0.0-1.0)\n    - customer_transaction_id: Filter by customer transaction\n    - provider_transaction_id: Filter by provider transaction",
        "operationId": "list_match_candidates_api_v1_transactions_matches_candidates_get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "min_confidence",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "number",
                  "maximum": 1.0,
                  "minimum": 0.0
                },
                {
                  "type": "string",
                  "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Minimum confidence",
              "title": "Min Confidence"
            },
            "description": "Minimum confidence"
          },
          {
            "name": "customer_transaction_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "uuid"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by customer transaction",
              "title": "Customer Transaction Id"
            },
            "description": "Filter by customer transaction"
          },
          {
            "name": "provider_transaction_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "uuid"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by provider transaction",
              "title": "Provider Transaction Id"
            },
            "description": "Filter by provider transaction"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_List_MatchCandidateResponse__"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/transactions/matches/{match_id}/approve": {
      "post": {
        "tags": [
          "Transactions"
        ],
        "summary": "Approve a match",
        "description": "Approve a suggested match and convert it to a confirmed match.\n\n    **Requires**: Explicit space context via X-Space-ID or X-Space-Slug header\n\n    **Effect**:\n    - Updates match status to APPROVED\n    - Records approver and timestamp\n    - Marks both transactions as matched\n    - Creates audit log entry",
        "operationId": "approve_match_api_v1_transactions_matches__match_id__approve_post",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "match_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Match Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MatchApprovalRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_MatchResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/transactions/matches/{match_id}/reject": {
      "post": {
        "tags": [
          "Transactions"
        ],
        "summary": "Reject a match",
        "description": "Reject a suggested match.\n\n    **Requires**: Explicit space context via X-Space-ID or X-Space-Slug header\n\n    **Effect**:\n    - Updates match status to REJECTED\n    - Records rejector, timestamp, and reason\n    - Creates audit log entry",
        "operationId": "reject_match_api_v1_transactions_matches__match_id__reject_post",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "match_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Match Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MatchRejectionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_MatchResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/transactions/stats": {
      "get": {
        "tags": [
          "Transactions"
        ],
        "summary": "Get matching statistics",
        "description": "Get overall matching statistics for the current tenant and space.\n\n    **Requires**: Explicit space context via X-Space-ID or X-Space-Slug header\n\n    **Statistics include**:\n    - Total transactions (customer vs provider)\n    - Matched vs unmatched counts\n    - Match accuracy percentage\n    - Breakdown by match type (exact, fuzzy, ML, LLM, manual)\n    - Breakdown by match status (suggested, approved, rejected, flagged)\n\n    **Filtering**:\n    - file_id: Optional file ID to get stats for a specific file",
        "operationId": "get_match_stats_api_v1_transactions_stats_get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "file_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "uuid"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by file ID",
              "title": "File Id"
            },
            "description": "Filter by file ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_MatchStatsResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/transactions/matches/bulk-approve": {
      "post": {
        "tags": [
          "Transactions"
        ],
        "summary": "Bulk approve matches",
        "description": "Bulk approve up to 1000 matches in a single transaction.\n\n    **Requires**: Explicit space context via X-Space-ID or X-Space-Slug header\n\n    **Features**:\n    - Atomic operation with rollback on error\n    - Creates audit trail entries for each approval\n    - Returns detailed success/failure breakdown\n    - Handles partial failures gracefully\n\n    **Returns**:\n    - 200: Bulk operation completed (check response for success/failure breakdown)\n    - 400: Invalid request (empty list, too many matches, etc.)\n    - 401: Not authenticated\n    - 422: Space context required",
        "operationId": "bulk_approve_matches_api_v1_transactions_matches_bulk_approve_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkApprovalRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_BulkOperationResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT": []
          }
        ]
      }
    },
    "/api/v1/transactions/matches/bulk-reject": {
      "post": {
        "tags": [
          "Transactions"
        ],
        "summary": "Bulk reject matches",
        "description": "Bulk reject up to 1000 matches in a single transaction.\n\n    **Requires**: Explicit space context via X-Space-ID or X-Space-Slug header\n\n    **Features**:\n    - Requires rejection reason for compliance\n    - Atomic operation with rollback on error\n    - Creates audit trail entries for each rejection\n    - Returns detailed success/failure breakdown\n\n    **Returns**:\n    - 200: Bulk operation completed (check response for success/failure breakdown)\n    - 400: Invalid request (empty list, missing reason, etc.)\n    - 401: Not authenticated\n    - 422: Space context required",
        "operationId": "bulk_reject_matches_api_v1_transactions_matches_bulk_reject_post",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BulkRejectionRequest"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_BulkOperationResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT": []
          }
        ]
      }
    },
    "/api/v1/transactions/matches/{match_id}/undo": {
      "post": {
        "tags": [
          "Transactions"
        ],
        "summary": "Undo match approval or rejection",
        "description": "Reset an approved or rejected match back to suggested status.\n\n    **Requires**: Explicit space context via X-Space-ID or X-Space-Slug header\n\n    **Features**:\n    - Resets match to suggested status\n    - Clears all approval/rejection metadata\n    - Creates audit trail entry\n    - Can only undo approved or rejected matches\n\n    **Returns**:\n    - 200: Match successfully reset to suggested\n    - 400: Match is not approved/rejected (cannot undo)\n    - 404: Match not found or access denied\n    - 401: Not authenticated\n    - 422: Space context required",
        "operationId": "undo_match_approval_api_v1_transactions_matches__match_id__undo_post",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "match_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Match Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MatchUndoRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_MatchResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/transactions/matches/approval-statistics": {
      "get": {
        "tags": [
          "Transactions"
        ],
        "summary": "Get approval workflow statistics",
        "description": "Get comprehensive approval workflow statistics with optional filtering.\n\n    **Requires**: Explicit space context via X-Space-ID or X-Space-Slug header\n\n    **Statistics include**:\n    - Total matches by status (suggested, approved, rejected, flagged)\n    - Approval and rejection rates\n    - Breakdown by match type (exact, fuzzy, ML, LLM)\n    - Breakdown by confidence score ranges\n\n    **Filtering**:\n    - match_type: Filter by match type (exact, fuzzy, ml, llm, manual)\n    - status: Filter by status (suggested, approved, rejected, flagged)\n    - confidence_min/max: Filter by confidence score range\n    - created_after/before: Filter by creation date range\n    - approved_by/rejected_by: Filter by user ID\n    - session_id: Filter by match session ID\n\n    **Returns**:\n    - 200: Statistics retrieved successfully\n    - 401: Not authenticated\n    - 422: Space context required",
        "operationId": "get_approval_statistics_api_v1_transactions_matches_approval_statistics_get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "match_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by match type",
              "title": "Match Type"
            },
            "description": "Filter by match type"
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by status",
              "title": "Status"
            },
            "description": "Filter by status"
          },
          {
            "name": "confidence_min",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "number",
                  "maximum": 1.0,
                  "minimum": 0.0
                },
                {
                  "type": "string",
                  "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Minimum confidence",
              "title": "Confidence Min"
            },
            "description": "Minimum confidence"
          },
          {
            "name": "confidence_max",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "number",
                  "maximum": 1.0,
                  "minimum": 0.0
                },
                {
                  "type": "string",
                  "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Maximum confidence",
              "title": "Confidence Max"
            },
            "description": "Maximum confidence"
          },
          {
            "name": "created_after",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Created after timestamp",
              "title": "Created After"
            },
            "description": "Created after timestamp"
          },
          {
            "name": "created_before",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Created before timestamp",
              "title": "Created Before"
            },
            "description": "Created before timestamp"
          },
          {
            "name": "approved_by",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "uuid"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by approver user ID",
              "title": "Approved By"
            },
            "description": "Filter by approver user ID"
          },
          {
            "name": "rejected_by",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "uuid"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by rejecter user ID",
              "title": "Rejected By"
            },
            "description": "Filter by rejecter user ID"
          },
          {
            "name": "session_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "uuid"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by match session ID",
              "title": "Session Id"
            },
            "description": "Filter by match session ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_ApprovalStatsResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/transactions/matches/{match_id}/audit-trail": {
      "get": {
        "tags": [
          "Transactions"
        ],
        "summary": "Get match audit trail",
        "description": "Get complete audit history for a specific match.\n\n    **Requires**: Explicit space context via X-Space-ID or X-Space-Slug header\n\n    **Audit trail includes**:\n    - All actions (approved, rejected, undone)\n    - Timestamp and performer for each action\n    - Reason and notes\n    - Previous and new status\n    - IP address and request ID\n\n    **Filtering**:\n    - action: Filter by action type (approved, rejected, undone)\n    - performed_by: Filter by user ID\n\n    **Returns**:\n    - 200: Audit trail retrieved successfully\n    - 404: Match not found or access denied\n    - 401: Not authenticated\n    - 422: Space context required",
        "operationId": "get_match_audit_trail_api_v1_transactions_matches__match_id__audit_trail_get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "match_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Match Id"
            }
          },
          {
            "name": "action",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by action type",
              "title": "Action"
            },
            "description": "Filter by action type"
          },
          {
            "name": "performed_by",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "uuid"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by performer user ID",
              "title": "Performed By"
            },
            "description": "Filter by performer user ID"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_List_MatchAuditResponse__"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/transactions/matches/export": {
      "get": {
        "tags": [
          "Transactions"
        ],
        "summary": "Export matches to CSV or Excel",
        "description": "Export matches with optional filtering to CSV or Excel format.\n\n    **Requires**: Explicit space context via X-Space-ID or X-Space-Slug header\n\n    **Export formats**:\n    - CSV: Streaming export for large datasets\n    - Excel: Formatted workbook with headers\n\n    **Filtering**:\n    - match_type: Filter by match type (exact, fuzzy, ml, llm, manual)\n    - status: Filter by status (suggested, approved, rejected, flagged)\n    - confidence_min/max: Filter by confidence score range\n    - created_after/before: Filter by creation date range\n    - approved_by/rejected_by: Filter by user ID\n    - session_id: Filter by match session ID\n    - include_audit: Include audit trail count (default: false)\n\n    **Returns**:\n    - 200: File download stream\n    - 400: Invalid format or parameters\n    - 401: Not authenticated\n    - 422: Space context required",
        "operationId": "export_matches_api_v1_transactions_matches_export_get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "format",
            "in": "query",
            "required": false,
            "schema": {
              "$ref": "#/components/schemas/ExportFormat",
              "description": "Export format (csv or excel)",
              "default": "csv"
            },
            "description": "Export format (csv or excel)"
          },
          {
            "name": "match_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by match type",
              "title": "Match Type"
            },
            "description": "Filter by match type"
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by status",
              "title": "Status"
            },
            "description": "Filter by status"
          },
          {
            "name": "confidence_min",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "number",
                  "maximum": 1.0,
                  "minimum": 0.0
                },
                {
                  "type": "string",
                  "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Minimum confidence",
              "title": "Confidence Min"
            },
            "description": "Minimum confidence"
          },
          {
            "name": "confidence_max",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "number",
                  "maximum": 1.0,
                  "minimum": 0.0
                },
                {
                  "type": "string",
                  "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Maximum confidence",
              "title": "Confidence Max"
            },
            "description": "Maximum confidence"
          },
          {
            "name": "created_after",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Created after timestamp",
              "title": "Created After"
            },
            "description": "Created after timestamp"
          },
          {
            "name": "created_before",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "date-time"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Created before timestamp",
              "title": "Created Before"
            },
            "description": "Created before timestamp"
          },
          {
            "name": "approved_by",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "uuid"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by approver user ID",
              "title": "Approved By"
            },
            "description": "Filter by approver user ID"
          },
          {
            "name": "rejected_by",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "uuid"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by rejecter user ID",
              "title": "Rejected By"
            },
            "description": "Filter by rejecter user ID"
          },
          {
            "name": "session_id",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string",
                  "format": "uuid"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by match session ID",
              "title": "Session Id"
            },
            "description": "Filter by match session ID"
          },
          {
            "name": "include_audit",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Include audit trail count",
              "default": false,
              "title": "Include Audit"
            },
            "description": "Include audit trail count"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {}
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/transactions/match-sessions/{session_id}": {
      "get": {
        "tags": [
          "Transactions"
        ],
        "summary": "Get match session by ID",
        "description": "Retrieve a specific match session by its ID.\n\n    Returns detailed information about a matching run including:\n    - Session metadata (tenant, space, files, creator)\n    - Status and timestamps\n    - Statistics (transaction counts, match counts, duration)\n    - Error information if failed\n\n    **Requires**: Explicit space context via X-Space-ID or X-Space-Slug header\n\n    **Returns**:\n    - 200: Match session found and returned\n    - 401: Not authenticated\n    - 404: Match session not found or access denied\n    - 422: Space context required",
        "operationId": "get_match_session_api_v1_transactions_match_sessions__session_id__get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Session Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_MatchSessionResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/transactions/match-sessions/{session_id}/matches": {
      "get": {
        "tags": [
          "Transactions"
        ],
        "summary": "Get matches for a specific session",
        "description": "Retrieve paginated matches for a specific match session.\n\n    Returns all matches that were created during this matching session.\n\n    **Filtering**:\n    - status: Filter by match status (suggested, approved, rejected)\n\n    **Pagination**:\n    - page: Page number (1-based, default 1)\n    - page_size: Items per page (max 100, default 20)\n\n    **Requires**: Explicit space context via X-Space-ID or X-Space-Slug header\n\n    **Returns**:\n    - 200: Matches list returned (may be empty)\n    - 401: Not authenticated\n    - 404: Session not found or not accessible\n    - 422: Space context required",
        "operationId": "get_session_matches_api_v1_transactions_match_sessions__session_id__matches_get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "session_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Session Id"
            }
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by match status",
              "title": "Status"
            },
            "description": "Filter by match status"
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Page number (1-based)",
              "default": 1,
              "title": "Page"
            },
            "description": "Page number (1-based)"
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Items per page",
              "default": 20,
              "title": "Page Size"
            },
            "description": "Items per page"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_MatchListResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ingestion/upload": {
      "post": {
        "tags": [
          "Ingestion"
        ],
        "summary": "Upload CSV file for ingestion",
        "description": "Upload a CSV file, automatically detect schema, and process if confidence is high enough.",
        "operationId": "upload_csv_for_ingestion_api_v1_ingestion_upload_post",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "$ref": "#/components/schemas/Body_upload_csv_for_ingestion_api_v1_ingestion_upload_post"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_IngestionBatchResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT": []
          }
        ]
      }
    },
    "/api/v1/ingestion/{batch_id}/process": {
      "post": {
        "tags": [
          "Ingestion"
        ],
        "summary": "Process or retry a batch",
        "description": "Process an AWAITING_SCHEMA batch or retry a FAILED batch with a new schema.",
        "operationId": "process_batch_api_v1_ingestion__batch_id__process_post",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "batch_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Batch Id"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ProcessBatchRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_IngestionBatchResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ingestion/batches": {
      "get": {
        "tags": [
          "Ingestion"
        ],
        "summary": "List ingestion batches",
        "description": "List ingestion batches with pagination and filtering.",
        "operationId": "list_batches_api_v1_ingestion_batches_get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Page number",
              "default": 1,
              "title": "Page"
            },
            "description": "Page number"
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Items per page",
              "default": 20,
              "title": "Page Size"
            },
            "description": "Items per page"
          },
          {
            "name": "status",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/IngestionStatus"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by batch status",
              "title": "Status"
            },
            "description": "Filter by batch status"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_BatchListResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ingestion/batches/{batch_id}": {
      "get": {
        "tags": [
          "Ingestion"
        ],
        "summary": "Get batch details",
        "description": "Retrieve details for a specific ingestion batch.",
        "operationId": "get_batch_details_api_v1_ingestion_batches__batch_id__get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "batch_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Batch Id"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_IngestionBatchResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ingestion/batches/{batch_id}/errors": {
      "get": {
        "tags": [
          "Ingestion"
        ],
        "summary": "Get batch errors",
        "description": "Retrieve validation and transformation errors for a batch with pagination.",
        "operationId": "get_batch_errors_api_v1_ingestion_batches__batch_id__errors_get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "batch_id",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string",
              "format": "uuid",
              "title": "Batch Id"
            }
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Page number",
              "default": 1,
              "title": "Page"
            },
            "description": "Page number"
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 500,
              "minimum": 1,
              "description": "Items per page",
              "default": 100,
              "title": "Page Size"
            },
            "description": "Items per page"
          },
          {
            "name": "error_type",
            "in": "query",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "$ref": "#/components/schemas/ErrorType"
                },
                {
                  "type": "null"
                }
              ],
              "description": "Filter by error type",
              "title": "Error Type"
            },
            "description": "Filter by error type"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_BatchErrorListResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/ingestion/health": {
      "get": {
        "tags": [
          "Ingestion",
          "Monitoring"
        ],
        "summary": "Health check for ingestion system",
        "description": "Check health status of ingestion system and database connectivity.",
        "operationId": "health_check_api_v1_ingestion_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_HealthCheckResponse_"
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT": []
          }
        ]
      }
    },
    "/api/v1/ingestion/metrics": {
      "get": {
        "tags": [
          "Ingestion",
          "Monitoring"
        ],
        "summary": "Get ingestion metrics",
        "description": "Retrieve aggregated metrics for ingestion batches in current space.",
        "operationId": "get_ingestion_metrics_api_v1_ingestion_metrics_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_IngestionMetricsResponse_"
                }
              }
            }
          }
        },
        "security": [
          {
            "JWT": []
          }
        ]
      }
    },
    "/api/v1/ingestion/schemas": {
      "get": {
        "tags": [
          "Ingestion",
          "Schemas"
        ],
        "summary": "List available schemas",
        "description": "List all available provider schemas for ingestion.",
        "operationId": "list_schemas_api_v1_ingestion_schemas_get",
        "security": [
          {
            "JWT": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "minimum": 1,
              "description": "Page number",
              "default": 1,
              "title": "Page"
            },
            "description": "Page number"
          },
          {
            "name": "page_size",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 100,
              "minimum": 1,
              "description": "Items per page",
              "default": 20,
              "title": "Page Size"
            },
            "description": "Items per page"
          },
          {
            "name": "active_only",
            "in": "query",
            "required": false,
            "schema": {
              "type": "boolean",
              "description": "Show only active schemas",
              "default": true,
              "title": "Active Only"
            },
            "description": "Show only active schemas"
          }
        ],
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ApiResponse_SchemaListResponse_"
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/subdomains/check": {
      "get": {
        "tags": [
          "Subdomains"
        ],
        "summary": "Check subdomain availability",
        "description": "Check if a subdomain is available for registration. Public endpoint.",
        "operationId": "check_subdomain_availability_api_v1_subdomains_check_get",
        "parameters": [
          {
            "name": "subdomain",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "minLength": 1,
              "maxLength": 63,
              "description": "Subdomain to check (3-63 chars, lowercase alphanumeric + hyphens)",
              "title": "Subdomain"
            },
            "description": "Subdomain to check (3-63 chars, lowercase alphanumeric + hyphens)"
          }
        ],
        "responses": {
          "200": {
            "description": "Subdomain availability check result",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SubdomainCheckResponse"
                },
                "examples": {
                  "available": {
                    "summary": "Available subdomain",
                    "value": {
                      "subdomain": "mycompany",
                      "available": true
                    }
                  },
                  "taken": {
                    "summary": "Taken subdomain",
                    "value": {
                      "subdomain": "acme",
                      "available": false,
                      "reason": "Subdomain is already taken"
                    }
                  },
                  "reserved": {
                    "summary": "Reserved subdomain",
                    "value": {
                      "subdomain": "www",
                      "available": false,
                      "reason": "Subdomain is reserved"
                    }
                  },
                  "invalid": {
                    "summary": "Invalid format",
                    "value": {
                      "subdomain": "ab",
                      "available": false,
                      "reason": "Subdomain must be at least 3 characters"
                    }
                  }
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/api/v1/subdomains/suggest": {
      "get": {
        "tags": [
          "Subdomains"
        ],
        "summary": "Get subdomain suggestions",
        "description": "Get available subdomain suggestions based on a desired name. Public endpoint.",
        "operationId": "suggest_subdomains_api_v1_subdomains_suggest_get",
        "parameters": [
          {
            "name": "subdomain",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string",
              "minLength": 1,
              "maxLength": 63,
              "description": "Desired subdomain to base suggestions on",
              "title": "Subdomain"
            },
            "description": "Desired subdomain to base suggestions on"
          },
          {
            "name": "count",
            "in": "query",
            "required": false,
            "schema": {
              "type": "integer",
              "maximum": 10,
              "minimum": 1,
              "description": "Number of suggestions to return",
              "default": 5,
              "title": "Count"
            },
            "description": "Number of suggestions to return"
          }
        ],
        "responses": {
          "200": {
            "description": "Subdomain suggestions",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SubdomainSuggestResponse"
                },
                "example": {
                  "original": "acme",
                  "available": false,
                  "suggestions": [
                    "acme-corp",
                    "acme-io",
                    "acme-app",
                    "acme-hq",
                    "acme2"
                  ]
                }
              }
            }
          },
          "422": {
            "description": "Validation Error",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HTTPValidationError"
                }
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Health Check",
        "description": "Health check endpoint with database connectivity verification.\n\nReturns 200 even when unhealthy (allows load balancers to distinguish\nbetween service down vs dependencies down). Check response body for\nactual health status.\n\nReturns:\n    HealthStatus: Health status with database check",
        "operationId": "health_check_health_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthStatus"
                }
              }
            }
          }
        }
      }
    },
    "/ready": {
      "get": {
        "tags": [
          "Health"
        ],
        "summary": "Readiness Check",
        "description": "Readiness check endpoint for Kubernetes readiness probes.\n\nPerforms basic dependency checks.\nReturns 503 if critical dependencies are unavailable.\n\nReturns:\n    HealthStatus: Readiness status with dependency checks",
        "operationId": "readiness_check_ready_get",
        "responses": {
          "200": {
            "description": "Successful Response",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HealthStatus"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AddDependencyRequest": {
        "properties": {
          "depends_on_schema_id": {
            "type": "string",
            "format": "uuid",
            "title": "Depends On Schema Id",
            "description": "The schema ID that this schema depends on"
          },
          "dependency_type": {
            "type": "string",
            "title": "Dependency Type",
            "description": "Type of dependency: foreign_key, reference, or derived"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Optional description of the dependency relationship"
          }
        },
        "type": "object",
        "required": [
          "depends_on_schema_id",
          "dependency_type"
        ],
        "title": "AddDependencyRequest",
        "description": "Request to add a dependency between schemas."
      },
      "ApiResponse_ApprovalStatsResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/ApprovalStatsResponse-Output",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[ApprovalStatsResponse]"
      },
      "ApiResponse_BatchActivateResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/BatchActivateResponse-Output",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[BatchActivateResponse]"
      },
      "ApiResponse_BatchConfirmResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/BatchConfirmResponse-Output",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[BatchConfirmResponse]"
      },
      "ApiResponse_BatchDeleteResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/BatchDeleteResponse",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[BatchDeleteResponse]"
      },
      "ApiResponse_BatchErrorListResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/BatchErrorListResponse",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[BatchErrorListResponse]"
      },
      "ApiResponse_BatchListResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/BatchListResponse-Output",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[BatchListResponse]"
      },
      "ApiResponse_BulkOperationResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/BulkOperationResponse",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[BulkOperationResponse]"
      },
      "ApiResponse_ChangeLogListResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/ChangeLogListResponse",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[ChangeLogListResponse]"
      },
      "ApiResponse_CompareVersionsResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/CompareVersionsResponse",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[CompareVersionsResponse]"
      },
      "ApiResponse_DependencyListResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/DependencyListResponse",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[DependencyListResponse]"
      },
      "ApiResponse_DependentListResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/DependentListResponse",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[DependentListResponse]"
      },
      "ApiResponse_FileUploadResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/FileUploadResponse-Output",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[FileUploadResponse]"
      },
      "ApiResponse_HealthCheckResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/HealthCheckResponse",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[HealthCheckResponse]"
      },
      "ApiResponse_IngestTransactionsResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/IngestTransactionsResponse",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[IngestTransactionsResponse]"
      },
      "ApiResponse_IngestionBatchResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/IngestionBatchResponse",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[IngestionBatchResponse]"
      },
      "ApiResponse_IngestionMetricsResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/IngestionMetricsResponse",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[IngestionMetricsResponse]"
      },
      "ApiResponse_List_MatchAuditResponse__": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "items": {
              "$ref": "#/components/schemas/MatchAuditResponse"
            },
            "type": "array",
            "title": "Data",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[List[MatchAuditResponse]]"
      },
      "ApiResponse_List_MatchCandidateResponse__": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "items": {
              "$ref": "#/components/schemas/MatchCandidateResponse-Output"
            },
            "type": "array",
            "title": "Data",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[List[MatchCandidateResponse]]"
      },
      "ApiResponse_MatchListResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/MatchListResponse-Output",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[MatchListResponse]"
      },
      "ApiResponse_MatchResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/MatchResponse-Output",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[MatchResponse]"
      },
      "ApiResponse_MatchSessionListResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/MatchSessionListResponse-Output",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[MatchSessionListResponse]"
      },
      "ApiResponse_MatchSessionResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/MatchSessionResponse-Output",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[MatchSessionResponse]"
      },
      "ApiResponse_MatchStatsResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/MatchStatsResponse-Output",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[MatchStatsResponse]"
      },
      "ApiResponse_RunMatchingResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/RunMatchingResponse",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[RunMatchingResponse]"
      },
      "ApiResponse_SchemaDependencyResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/SchemaDependencyResponse",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[SchemaDependencyResponse]"
      },
      "ApiResponse_SchemaListResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/SchemaListResponse",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[SchemaListResponse]"
      },
      "ApiResponse_SchemaResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/SchemaResponse-Output",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[SchemaResponse]"
      },
      "ApiResponse_SchemaStatsResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/SchemaStatsResponse-Output",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[SchemaStatsResponse]"
      },
      "ApiResponse_SchemaTemplateResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/SchemaTemplateResponse",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[SchemaTemplateResponse]"
      },
      "ApiResponse_SchemaUsageLogResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/SchemaUsageLogResponse",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[SchemaUsageLogResponse]"
      },
      "ApiResponse_SchemaVersionListResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/SchemaVersionListResponse",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[SchemaVersionListResponse]"
      },
      "ApiResponse_SchemaVersionResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/SchemaVersionResponse",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[SchemaVersionResponse]"
      },
      "ApiResponse_SearchResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/SearchResponse-Output",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[SearchResponse]"
      },
      "ApiResponse_StandardFieldsResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/StandardFieldsResponse",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[StandardFieldsResponse]"
      },
      "ApiResponse_TemplateListResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/TemplateListResponse",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[TemplateListResponse]"
      },
      "ApiResponse_TestSchemaResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/TestSchemaResponse-Output",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[TestSchemaResponse]"
      },
      "ApiResponse_TransactionListResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/TransactionListResponse-Output",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[TransactionListResponse]"
      },
      "ApiResponse_TransactionResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/TransactionResponse-Output",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[TransactionResponse]"
      },
      "ApiResponse_UsageHistoryResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/UsageHistoryResponse",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[UsageHistoryResponse]"
      },
      "ApiResponse_ValidationResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/ValidationResponse",
            "description": "Response payload - type varies by endpoint"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "ApiResponse[ValidationResponse]"
      },
      "ApprovalStatsResponse-Input": {
        "properties": {
          "total_matches": {
            "type": "integer",
            "title": "Total Matches",
            "description": "Total matches"
          },
          "suggested_count": {
            "type": "integer",
            "title": "Suggested Count",
            "description": "Matches awaiting review"
          },
          "approved_count": {
            "type": "integer",
            "title": "Approved Count",
            "description": "Approved matches"
          },
          "rejected_count": {
            "type": "integer",
            "title": "Rejected Count",
            "description": "Rejected matches"
          },
          "flagged_count": {
            "type": "integer",
            "title": "Flagged Count",
            "description": "Flagged matches",
            "default": 0
          },
          "approval_rate": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              }
            ],
            "title": "Approval Rate",
            "description": "Approval rate (approved / total reviewed)"
          },
          "rejection_rate": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              }
            ],
            "title": "Rejection Rate",
            "description": "Rejection rate (rejected / total reviewed)"
          },
          "stats_by_match_type": {
            "additionalProperties": {
              "additionalProperties": {
                "type": "integer"
              },
              "type": "object"
            },
            "type": "object",
            "title": "Stats By Match Type",
            "description": "Stats grouped by match type (exact, fuzzy, etc.)"
          },
          "stats_by_confidence": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Stats By Confidence",
            "description": "Stats grouped by confidence ranges"
          }
        },
        "type": "object",
        "required": [
          "total_matches",
          "suggested_count",
          "approved_count",
          "rejected_count",
          "approval_rate",
          "rejection_rate"
        ],
        "title": "ApprovalStatsResponse",
        "description": "Approval workflow statistics."
      },
      "ApprovalStatsResponse-Output": {
        "properties": {
          "total_matches": {
            "type": "integer",
            "title": "Total Matches",
            "description": "Total matches"
          },
          "suggested_count": {
            "type": "integer",
            "title": "Suggested Count",
            "description": "Matches awaiting review"
          },
          "approved_count": {
            "type": "integer",
            "title": "Approved Count",
            "description": "Approved matches"
          },
          "rejected_count": {
            "type": "integer",
            "title": "Rejected Count",
            "description": "Rejected matches"
          },
          "flagged_count": {
            "type": "integer",
            "title": "Flagged Count",
            "description": "Flagged matches",
            "default": 0
          },
          "approval_rate": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Approval Rate",
            "description": "Approval rate (approved / total reviewed)"
          },
          "rejection_rate": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Rejection Rate",
            "description": "Rejection rate (rejected / total reviewed)"
          },
          "stats_by_match_type": {
            "additionalProperties": {
              "additionalProperties": {
                "type": "integer"
              },
              "type": "object"
            },
            "type": "object",
            "title": "Stats By Match Type",
            "description": "Stats grouped by match type (exact, fuzzy, etc.)"
          },
          "stats_by_confidence": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Stats By Confidence",
            "description": "Stats grouped by confidence ranges"
          }
        },
        "type": "object",
        "required": [
          "total_matches",
          "suggested_count",
          "approved_count",
          "rejected_count",
          "approval_rate",
          "rejection_rate"
        ],
        "title": "ApprovalStatsResponse",
        "description": "Approval workflow statistics."
      },
      "BatchActivateRequest": {
        "properties": {
          "schema_ids": {
            "items": {
              "type": "string",
              "format": "uuid"
            },
            "type": "array",
            "maxItems": 20,
            "minItems": 1,
            "title": "Schema Ids",
            "description": "List of schema IDs to activate (max one per provider type)"
          },
          "reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reason",
            "description": "Reason for batch activation"
          }
        },
        "type": "object",
        "required": [
          "schema_ids"
        ],
        "title": "BatchActivateRequest",
        "description": "Request to activate multiple schemas (one per provider type)."
      },
      "BatchActivateResponse-Input": {
        "properties": {
          "total_requested": {
            "type": "integer",
            "title": "Total Requested"
          },
          "successful": {
            "type": "integer",
            "title": "Successful"
          },
          "failed": {
            "type": "integer",
            "title": "Failed"
          },
          "results": {
            "items": {
              "$ref": "#/components/schemas/BatchActivateResult-Input"
            },
            "type": "array",
            "title": "Results"
          }
        },
        "type": "object",
        "required": [
          "total_requested",
          "successful",
          "failed",
          "results"
        ],
        "title": "BatchActivateResponse",
        "description": "Response for batch activate operation."
      },
      "BatchActivateResponse-Output": {
        "properties": {
          "total_requested": {
            "type": "integer",
            "title": "Total Requested"
          },
          "successful": {
            "type": "integer",
            "title": "Successful"
          },
          "failed": {
            "type": "integer",
            "title": "Failed"
          },
          "results": {
            "items": {
              "$ref": "#/components/schemas/BatchActivateResult-Output"
            },
            "type": "array",
            "title": "Results"
          }
        },
        "type": "object",
        "required": [
          "total_requested",
          "successful",
          "failed",
          "results"
        ],
        "title": "BatchActivateResponse",
        "description": "Response for batch activate operation."
      },
      "BatchActivateResult-Input": {
        "properties": {
          "schema_id": {
            "type": "string",
            "format": "uuid",
            "title": "Schema Id"
          },
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "provider_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Provider Type"
          },
          "schema_data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/SchemaResponse-Input"
              },
              {
                "type": "null"
              }
            ]
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "schema_id",
          "success"
        ],
        "title": "BatchActivateResult",
        "description": "Result for a single schema in batch activate operation."
      },
      "BatchActivateResult-Output": {
        "properties": {
          "schema_id": {
            "type": "string",
            "format": "uuid",
            "title": "Schema Id"
          },
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "provider_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Provider Type"
          },
          "schema_data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/SchemaResponse-Output"
              },
              {
                "type": "null"
              }
            ]
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "schema_id",
          "success"
        ],
        "title": "BatchActivateResult",
        "description": "Result for a single schema in batch activate operation."
      },
      "BatchConfirmRequest": {
        "properties": {
          "schema_ids": {
            "items": {
              "type": "string",
              "format": "uuid"
            },
            "type": "array",
            "maxItems": 20,
            "minItems": 1,
            "title": "Schema Ids",
            "description": "List of schema IDs to confirm"
          },
          "set_active": {
            "type": "boolean",
            "title": "Set Active",
            "description": "Whether to activate confirmed schemas",
            "default": false
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes",
            "description": "Optional notes for batch operation"
          }
        },
        "type": "object",
        "required": [
          "schema_ids"
        ],
        "title": "BatchConfirmRequest",
        "description": "Request to confirm multiple schemas at once."
      },
      "BatchConfirmResponse-Input": {
        "properties": {
          "total_requested": {
            "type": "integer",
            "title": "Total Requested"
          },
          "successful": {
            "type": "integer",
            "title": "Successful"
          },
          "failed": {
            "type": "integer",
            "title": "Failed"
          },
          "results": {
            "items": {
              "$ref": "#/components/schemas/BatchConfirmResult-Input"
            },
            "type": "array",
            "title": "Results"
          }
        },
        "type": "object",
        "required": [
          "total_requested",
          "successful",
          "failed",
          "results"
        ],
        "title": "BatchConfirmResponse",
        "description": "Response for batch confirm operation."
      },
      "BatchConfirmResponse-Output": {
        "properties": {
          "total_requested": {
            "type": "integer",
            "title": "Total Requested"
          },
          "successful": {
            "type": "integer",
            "title": "Successful"
          },
          "failed": {
            "type": "integer",
            "title": "Failed"
          },
          "results": {
            "items": {
              "$ref": "#/components/schemas/BatchConfirmResult-Output"
            },
            "type": "array",
            "title": "Results"
          }
        },
        "type": "object",
        "required": [
          "total_requested",
          "successful",
          "failed",
          "results"
        ],
        "title": "BatchConfirmResponse",
        "description": "Response for batch confirm operation."
      },
      "BatchConfirmResult-Input": {
        "properties": {
          "schema_id": {
            "type": "string",
            "format": "uuid",
            "title": "Schema Id"
          },
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "schema_data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/SchemaResponse-Input"
              },
              {
                "type": "null"
              }
            ]
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "schema_id",
          "success"
        ],
        "title": "BatchConfirmResult",
        "description": "Result for a single schema in batch confirm operation."
      },
      "BatchConfirmResult-Output": {
        "properties": {
          "schema_id": {
            "type": "string",
            "format": "uuid",
            "title": "Schema Id"
          },
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "schema_data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/SchemaResponse-Output"
              },
              {
                "type": "null"
              }
            ]
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "schema_id",
          "success"
        ],
        "title": "BatchConfirmResult",
        "description": "Result for a single schema in batch confirm operation."
      },
      "BatchDeleteRequest": {
        "properties": {
          "schema_ids": {
            "items": {
              "type": "string",
              "format": "uuid"
            },
            "type": "array",
            "maxItems": 20,
            "minItems": 1,
            "title": "Schema Ids",
            "description": "List of schema IDs to delete"
          },
          "force": {
            "type": "boolean",
            "title": "Force",
            "description": "Force deletion even if schemas are in use",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "schema_ids"
        ],
        "title": "BatchDeleteRequest",
        "description": "Request to delete multiple schemas at once."
      },
      "BatchDeleteResponse": {
        "properties": {
          "total_requested": {
            "type": "integer",
            "title": "Total Requested"
          },
          "successful": {
            "type": "integer",
            "title": "Successful"
          },
          "failed": {
            "type": "integer",
            "title": "Failed"
          },
          "results": {
            "items": {
              "$ref": "#/components/schemas/BatchDeleteResult"
            },
            "type": "array",
            "title": "Results"
          }
        },
        "type": "object",
        "required": [
          "total_requested",
          "successful",
          "failed",
          "results"
        ],
        "title": "BatchDeleteResponse",
        "description": "Response for batch delete operation."
      },
      "BatchDeleteResult": {
        "properties": {
          "schema_id": {
            "type": "string",
            "format": "uuid",
            "title": "Schema Id"
          },
          "success": {
            "type": "boolean",
            "title": "Success"
          },
          "error": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error"
          }
        },
        "type": "object",
        "required": [
          "schema_id",
          "success"
        ],
        "title": "BatchDeleteResult",
        "description": "Result for a single schema in batch delete operation."
      },
      "BatchErrorListResponse": {
        "properties": {
          "errors": {
            "items": {
              "$ref": "#/components/schemas/BatchErrorResponse"
            },
            "type": "array",
            "title": "Errors"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count"
          },
          "page": {
            "type": "integer",
            "minimum": 1.0,
            "title": "Page",
            "description": "Current page number",
            "default": 1
          },
          "page_size": {
            "type": "integer",
            "maximum": 500.0,
            "minimum": 1.0,
            "title": "Page Size",
            "description": "Items per page",
            "default": 100
          },
          "total_pages": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Pages",
            "description": "Total number of pages"
          }
        },
        "type": "object",
        "required": [
          "errors",
          "total_count",
          "total_pages"
        ],
        "title": "BatchErrorListResponse",
        "description": "Response model for listing batch errors with pagination."
      },
      "BatchErrorResponse": {
        "properties": {
          "error_id": {
            "type": "string",
            "format": "uuid",
            "title": "Error Id"
          },
          "batch_id": {
            "type": "string",
            "format": "uuid",
            "title": "Batch Id"
          },
          "row_number": {
            "type": "integer",
            "title": "Row Number"
          },
          "error_type": {
            "type": "string",
            "title": "Error Type"
          },
          "error_message": {
            "type": "string",
            "title": "Error Message"
          },
          "row_data": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Row Data"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "error_id",
          "batch_id",
          "row_number",
          "error_type",
          "error_message",
          "created_at"
        ],
        "title": "BatchErrorResponse",
        "description": "Response model for a batch error."
      },
      "BatchListResponse-Input": {
        "properties": {
          "batches": {
            "items": {
              "$ref": "#/components/schemas/IngestionBatchResponse"
            },
            "type": "array",
            "title": "Batches"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count"
          },
          "page": {
            "type": "integer",
            "title": "Page",
            "default": 1
          },
          "page_size": {
            "type": "integer",
            "title": "Page Size",
            "default": 20
          }
        },
        "type": "object",
        "required": [
          "batches",
          "total_count"
        ],
        "title": "BatchListResponse",
        "description": "Response model for listing ingestion batches."
      },
      "BatchListResponse-Output": {
        "properties": {
          "batches": {
            "items": {
              "$ref": "#/components/schemas/IngestionBatchResponse"
            },
            "type": "array",
            "title": "Batches"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count"
          },
          "page": {
            "type": "integer",
            "title": "Page",
            "default": 1
          },
          "page_size": {
            "type": "integer",
            "title": "Page Size",
            "default": 20
          }
        },
        "type": "object",
        "required": [
          "batches",
          "total_count"
        ],
        "title": "BatchListResponse",
        "description": "Response model for listing ingestion batches."
      },
      "Body_upload_csv_for_ingestion_api_v1_ingestion_upload_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File",
            "description": "CSV file to ingest"
          },
          "schema_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Schema Id",
            "description": "Explicit schema ID (UUID) for manual selection"
          },
          "provider_hint": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Provider Hint",
            "description": "Provider type hint (e.g., 'stripe_transactions')"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_upload_csv_for_ingestion_api_v1_ingestion_upload_post"
      },
      "Body_upload_file_api_v1_files_upload_post": {
        "properties": {
          "file": {
            "type": "string",
            "format": "binary",
            "title": "File",
            "description": "CSV file to upload"
          },
          "provider_type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Provider Type",
            "description": "Provider type for schema detection (e.g., 'stripe_payments')"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "Body_upload_file_api_v1_files_upload_post"
      },
      "BulkApprovalRequest": {
        "properties": {
          "match_ids": {
            "items": {
              "type": "string",
              "format": "uuid"
            },
            "type": "array",
            "maxItems": 1000,
            "minItems": 1,
            "title": "Match Ids",
            "description": "Match IDs to approve (max 1000)"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 1000
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes",
            "description": "Optional notes"
          }
        },
        "type": "object",
        "required": [
          "match_ids"
        ],
        "title": "BulkApprovalRequest",
        "description": "Bulk approve matches."
      },
      "BulkFeatureFlagEvaluationResponse": {
        "properties": {
          "flags": {
            "additionalProperties": {
              "type": "boolean"
            },
            "type": "object",
            "title": "Flags",
            "description": "Map of flag_key -> is_enabled",
            "examples": [
              {
                "auto_approval_enabled": false,
                "fuzzy_matching_enabled": true,
                "schema_detection_enabled": true
              }
            ]
          }
        },
        "type": "object",
        "required": [
          "flags"
        ],
        "title": "BulkFeatureFlagEvaluationResponse",
        "description": "Response model for bulk feature flag evaluation."
      },
      "BulkOperationResponse": {
        "properties": {
          "success_count": {
            "type": "integer",
            "title": "Success Count",
            "description": "Number of matches successfully processed"
          },
          "failed_count": {
            "type": "integer",
            "title": "Failed Count",
            "description": "Number of matches that failed"
          },
          "success_ids": {
            "items": {
              "type": "string",
              "format": "uuid"
            },
            "type": "array",
            "title": "Success Ids",
            "description": "IDs of successful matches"
          },
          "failed": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Failed",
            "description": "Failed matches with reasons (id + error)"
          }
        },
        "type": "object",
        "required": [
          "success_count",
          "failed_count",
          "success_ids",
          "failed"
        ],
        "title": "BulkOperationResponse",
        "description": "Result of bulk operation."
      },
      "BulkRejectionRequest": {
        "properties": {
          "match_ids": {
            "items": {
              "type": "string",
              "format": "uuid"
            },
            "type": "array",
            "maxItems": 1000,
            "minItems": 1,
            "title": "Match Ids",
            "description": "Match IDs to reject (max 1000)"
          },
          "reason": {
            "type": "string",
            "maxLength": 500,
            "minLength": 1,
            "title": "Reason",
            "description": "Rejection reason (required)"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 1000
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes",
            "description": "Additional notes"
          }
        },
        "type": "object",
        "required": [
          "match_ids",
          "reason"
        ],
        "title": "BulkRejectionRequest",
        "description": "Bulk reject matches."
      },
      "ChangeLogEntryResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "schema_id": {
            "type": "string",
            "format": "uuid",
            "title": "Schema Id"
          },
          "tenant_id": {
            "type": "string",
            "format": "uuid",
            "title": "Tenant Id"
          },
          "space_id": {
            "type": "string",
            "format": "uuid",
            "title": "Space Id"
          },
          "operation": {
            "type": "string",
            "title": "Operation"
          },
          "performed_by": {
            "type": "string",
            "format": "uuid",
            "title": "Performed By"
          },
          "before_state": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Before State"
          },
          "after_state": {
            "additionalProperties": true,
            "type": "object",
            "title": "After State"
          },
          "reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reason"
          },
          "ip_address": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ip Address"
          },
          "user_agent": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "User Agent"
          },
          "request_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Request Id"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "schema_id",
          "tenant_id",
          "space_id",
          "operation",
          "performed_by",
          "after_state",
          "created_at"
        ],
        "title": "ChangeLogEntryResponse",
        "description": "Response model for a change log entry."
      },
      "ChangeLogListResponse": {
        "properties": {
          "entries": {
            "items": {
              "$ref": "#/components/schemas/ChangeLogEntryResponse"
            },
            "type": "array",
            "title": "Entries"
          },
          "total_entries": {
            "type": "integer",
            "title": "Total Entries"
          },
          "schema_id": {
            "type": "string",
            "format": "uuid",
            "title": "Schema Id"
          },
          "page": {
            "type": "integer",
            "title": "Page"
          },
          "page_size": {
            "type": "integer",
            "title": "Page Size"
          }
        },
        "type": "object",
        "required": [
          "entries",
          "total_entries",
          "schema_id",
          "page",
          "page_size"
        ],
        "title": "ChangeLogListResponse",
        "description": "Response model for list of change log entries."
      },
      "CloneSchemaRequest": {
        "properties": {
          "target_space_id": {
            "type": "string",
            "format": "uuid",
            "title": "Target Space Id",
            "description": "Space to clone the schema to"
          },
          "new_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "New Name",
            "description": "Optional new name for cloned schema"
          },
          "set_active": {
            "type": "boolean",
            "title": "Set Active",
            "description": "Whether to activate in target space",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "target_space_id"
        ],
        "title": "CloneSchemaRequest",
        "description": "Request to clone a schema to a different space."
      },
      "CompareVersionsResponse": {
        "properties": {
          "schema_id": {
            "type": "string",
            "format": "uuid",
            "title": "Schema Id"
          },
          "from_version": {
            "type": "integer",
            "title": "From Version"
          },
          "to_version": {
            "type": "integer",
            "title": "To Version"
          },
          "from_version_created_at": {
            "type": "string",
            "format": "date-time",
            "title": "From Version Created At"
          },
          "to_version_created_at": {
            "type": "string",
            "format": "date-time",
            "title": "To Version Created At"
          },
          "changes": {
            "items": {
              "$ref": "#/components/schemas/VersionDiff"
            },
            "type": "array",
            "title": "Changes",
            "description": "List of all differences between versions"
          },
          "summary": {
            "type": "string",
            "title": "Summary",
            "description": "Human-readable summary (e.g., '5 fields changed, 2 added, 1 removed')"
          }
        },
        "type": "object",
        "required": [
          "schema_id",
          "from_version",
          "to_version",
          "from_version_created_at",
          "to_version_created_at",
          "changes",
          "summary"
        ],
        "title": "CompareVersionsResponse",
        "description": "Response model for version comparison."
      },
      "CreateFromTemplateRequest": {
        "properties": {
          "template_id": {
            "type": "string",
            "title": "Template Id",
            "description": "ID of the template to use"
          },
          "name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "Optional custom name for the schema"
          },
          "override_mappings": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "string"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Override Mappings",
            "description": "Optional column mapping overrides"
          },
          "override_validation": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Override Validation",
            "description": "Optional validation rule overrides"
          },
          "set_active": {
            "type": "boolean",
            "title": "Set Active",
            "description": "Whether to activate the schema immediately",
            "default": false
          }
        },
        "type": "object",
        "required": [
          "template_id"
        ],
        "title": "CreateFromTemplateRequest",
        "description": "Request to create a schema from a template."
      },
      "DependencyListResponse": {
        "properties": {
          "dependencies": {
            "items": {
              "$ref": "#/components/schemas/SchemaDependencyResponse"
            },
            "type": "array",
            "title": "Dependencies"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "schema_id": {
            "type": "string",
            "format": "uuid",
            "title": "Schema Id"
          }
        },
        "type": "object",
        "required": [
          "dependencies",
          "total",
          "schema_id"
        ],
        "title": "DependencyListResponse",
        "description": "Response model for list of dependencies."
      },
      "DependentListResponse": {
        "properties": {
          "dependents": {
            "items": {
              "$ref": "#/components/schemas/SchemaDependencyResponse"
            },
            "type": "array",
            "title": "Dependents"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          },
          "schema_id": {
            "type": "string",
            "format": "uuid",
            "title": "Schema Id"
          }
        },
        "type": "object",
        "required": [
          "dependents",
          "total",
          "schema_id"
        ],
        "title": "DependentListResponse",
        "description": "Response model for list of dependents (schemas that depend on this schema)."
      },
      "ErrorType": {
        "type": "string",
        "enum": [
          "validation_error",
          "parsing_error",
          "mapping_error",
          "transformation_error",
          "constraint_violation",
          "unknown_error"
        ],
        "title": "ErrorType",
        "description": "Classification of batch ingestion errors."
      },
      "ExportFormat": {
        "type": "string",
        "enum": [
          "csv",
          "excel"
        ],
        "title": "ExportFormat",
        "description": "Export file format."
      },
      "FeatureFlagCreate": {
        "properties": {
          "flag_key": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Flag Key",
            "description": "Unique key for feature flag (lowercase alphanumeric + underscores only)",
            "examples": [
              "schema_detection_enabled",
              "fuzzy_matching_enabled"
            ]
          },
          "flag_name": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "title": "Flag Name",
            "description": "Human-readable name",
            "examples": [
              "Schema Detection",
              "Fuzzy Matching"
            ]
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Description of what this flag controls",
            "examples": [
              "AI-powered CSV schema detection using Claude API"
            ]
          },
          "default_enabled": {
            "type": "boolean",
            "title": "Default Enabled",
            "description": "Global default state (kill switch) - if false, feature is OFF for all",
            "default": false
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "description": "Whether this flag is active (false = soft deleted)",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "flag_key",
          "flag_name"
        ],
        "title": "FeatureFlagCreate",
        "description": "Request model for creating a new feature flag (super-admin only)."
      },
      "FeatureFlagEvaluationRequest": {
        "properties": {
          "flag_keys": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Flag Keys",
            "description": "List of flag keys to evaluate",
            "examples": [
              [
                "schema_detection_enabled",
                "fuzzy_matching_enabled",
                "export_enabled"
              ]
            ]
          }
        },
        "type": "object",
        "required": [
          "flag_keys"
        ],
        "title": "FeatureFlagEvaluationRequest",
        "description": "Request model for evaluating feature flags (authenticated users)."
      },
      "FeatureFlagEvaluationResponse": {
        "properties": {
          "flag_key": {
            "type": "string",
            "title": "Flag Key",
            "description": "Feature flag key"
          },
          "is_enabled": {
            "type": "boolean",
            "title": "Is Enabled",
            "description": "Whether feature is enabled (after kill switch + tenant override logic)"
          },
          "source": {
            "type": "string",
            "title": "Source",
            "description": "Source of the value: 'global_default', 'tenant_override', or 'kill_switch'",
            "examples": [
              "tenant_override",
              "global_default",
              "kill_switch"
            ]
          }
        },
        "type": "object",
        "required": [
          "flag_key",
          "is_enabled",
          "source"
        ],
        "title": "FeatureFlagEvaluationResponse",
        "description": "Response model for feature flag evaluation."
      },
      "FeatureFlagResponse": {
        "properties": {
          "flag_key": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Flag Key",
            "description": "Unique key for feature flag (lowercase alphanumeric + underscores only)",
            "examples": [
              "schema_detection_enabled",
              "fuzzy_matching_enabled"
            ]
          },
          "flag_name": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "title": "Flag Name",
            "description": "Human-readable name",
            "examples": [
              "Schema Detection",
              "Fuzzy Matching"
            ]
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Description of what this flag controls",
            "examples": [
              "AI-powered CSV schema detection using Claude API"
            ]
          },
          "default_enabled": {
            "type": "boolean",
            "title": "Default Enabled",
            "description": "Global default state (kill switch) - if false, feature is OFF for all",
            "default": false
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "description": "Whether this flag is active (false = soft deleted)",
            "default": true
          },
          "flag_id": {
            "type": "string",
            "format": "uuid",
            "title": "Flag Id",
            "description": "Unique feature flag identifier"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "When this flag was created"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "When this flag was last updated"
          },
          "created_by": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By",
            "description": "User who created this flag"
          }
        },
        "type": "object",
        "required": [
          "flag_key",
          "flag_name",
          "flag_id",
          "created_at",
          "updated_at"
        ],
        "title": "FeatureFlagResponse",
        "description": "Response model for feature flag (includes metadata)."
      },
      "FeatureFlagTenantOverrideCreate": {
        "properties": {
          "is_enabled": {
            "type": "boolean",
            "title": "Is Enabled",
            "description": "Whether feature is enabled for this tenant"
          },
          "tenant_id": {
            "type": "string",
            "format": "uuid",
            "title": "Tenant Id",
            "description": "Tenant this override applies to"
          }
        },
        "type": "object",
        "required": [
          "is_enabled",
          "tenant_id"
        ],
        "title": "FeatureFlagTenantOverrideCreate",
        "description": "Request model for creating a tenant override (super-admin only)."
      },
      "FeatureFlagTenantOverrideResponse": {
        "properties": {
          "is_enabled": {
            "type": "boolean",
            "title": "Is Enabled",
            "description": "Whether feature is enabled for this tenant"
          },
          "override_id": {
            "type": "string",
            "format": "uuid",
            "title": "Override Id",
            "description": "Unique override identifier"
          },
          "flag_id": {
            "type": "string",
            "format": "uuid",
            "title": "Flag Id",
            "description": "Feature flag being overridden"
          },
          "tenant_id": {
            "type": "string",
            "format": "uuid",
            "title": "Tenant Id",
            "description": "Tenant this override applies to"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "When this override was created"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "When this override was last updated"
          },
          "created_by": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By",
            "description": "User who created this override"
          }
        },
        "type": "object",
        "required": [
          "is_enabled",
          "override_id",
          "flag_id",
          "tenant_id",
          "created_at",
          "updated_at"
        ],
        "title": "FeatureFlagTenantOverrideResponse",
        "description": "Response model for tenant override (includes metadata)."
      },
      "FeatureFlagTenantOverrideUpdate": {
        "properties": {
          "is_enabled": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Enabled",
            "description": "Whether feature is enabled for this tenant"
          }
        },
        "type": "object",
        "title": "FeatureFlagTenantOverrideUpdate",
        "description": "Request model for updating a tenant override (super-admin only)."
      },
      "FeatureFlagUpdate": {
        "properties": {
          "flag_name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 200,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Flag Name",
            "description": "Human-readable name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Description of what this flag controls"
          },
          "default_enabled": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Default Enabled",
            "description": "Global default state (kill switch)"
          },
          "is_active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Active",
            "description": "Whether this flag is active"
          }
        },
        "type": "object",
        "title": "FeatureFlagUpdate",
        "description": "Request model for updating a feature flag (super-admin only)."
      },
      "FeatureFlagWithOverridesResponse": {
        "properties": {
          "flag_key": {
            "type": "string",
            "maxLength": 100,
            "minLength": 1,
            "title": "Flag Key",
            "description": "Unique key for feature flag (lowercase alphanumeric + underscores only)",
            "examples": [
              "schema_detection_enabled",
              "fuzzy_matching_enabled"
            ]
          },
          "flag_name": {
            "type": "string",
            "maxLength": 200,
            "minLength": 1,
            "title": "Flag Name",
            "description": "Human-readable name",
            "examples": [
              "Schema Detection",
              "Fuzzy Matching"
            ]
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Description of what this flag controls",
            "examples": [
              "AI-powered CSV schema detection using Claude API"
            ]
          },
          "default_enabled": {
            "type": "boolean",
            "title": "Default Enabled",
            "description": "Global default state (kill switch) - if false, feature is OFF for all",
            "default": false
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "description": "Whether this flag is active (false = soft deleted)",
            "default": true
          },
          "flag_id": {
            "type": "string",
            "format": "uuid",
            "title": "Flag Id",
            "description": "Unique feature flag identifier"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "When this flag was created"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "When this flag was last updated"
          },
          "created_by": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By",
            "description": "User who created this flag"
          },
          "overrides": {
            "items": {
              "$ref": "#/components/schemas/FeatureFlagTenantOverrideResponse"
            },
            "type": "array",
            "title": "Overrides",
            "description": "All tenant-specific overrides for this flag"
          }
        },
        "type": "object",
        "required": [
          "flag_key",
          "flag_name",
          "flag_id",
          "created_at",
          "updated_at"
        ],
        "title": "FeatureFlagWithOverridesResponse",
        "description": "Response model for feature flag with all tenant overrides (admin view)."
      },
      "FileListResponse": {
        "properties": {
          "files": {
            "items": {
              "$ref": "#/components/schemas/FileResponse"
            },
            "type": "array",
            "title": "Files"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count"
          },
          "page": {
            "type": "integer",
            "title": "Page",
            "default": 1
          },
          "page_size": {
            "type": "integer",
            "title": "Page Size",
            "default": 100
          }
        },
        "type": "object",
        "required": [
          "files",
          "total_count"
        ],
        "title": "FileListResponse",
        "description": "Response model for file listing."
      },
      "FileResponse": {
        "properties": {
          "file_id": {
            "type": "string",
            "format": "uuid",
            "title": "File Id"
          },
          "tenant_id": {
            "type": "string",
            "format": "uuid",
            "title": "Tenant Id"
          },
          "space_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Space Id"
          },
          "original_filename": {
            "type": "string",
            "title": "Original Filename"
          },
          "s3_key": {
            "type": "string",
            "title": "S3 Key"
          },
          "file_type": {
            "$ref": "#/components/schemas/FileType"
          },
          "upload_status": {
            "$ref": "#/components/schemas/UploadStatus"
          },
          "processing_status": {
            "$ref": "#/components/schemas/ProcessingStatus"
          },
          "file_size_bytes": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "File Size Bytes"
          },
          "uploaded_by": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Uploaded By"
          },
          "session_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Session Id"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          },
          "deleted_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Deleted At"
          }
        },
        "type": "object",
        "required": [
          "file_id",
          "tenant_id",
          "original_filename",
          "s3_key",
          "file_type",
          "upload_status",
          "processing_status",
          "created_at",
          "updated_at"
        ],
        "title": "FileResponse",
        "description": "Response model for a single file."
      },
      "FileType": {
        "type": "string",
        "enum": [
          "CUSTOMER",
          "PROVIDER",
          "EXPORT",
          "TEMP"
        ],
        "title": "FileType",
        "description": "Type of uploaded file."
      },
      "FileUpdateRequest": {
        "properties": {
          "original_filename": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Original Filename",
            "description": "Updated filename"
          },
          "file_type": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/FileType"
              },
              {
                "type": "null"
              }
            ],
            "description": "Updated file type"
          },
          "processing_status": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ProcessingStatus"
              },
              {
                "type": "null"
              }
            ],
            "description": "Updated processing status"
          }
        },
        "type": "object",
        "title": "FileUpdateRequest",
        "description": "Request model for updating file metadata."
      },
      "FileUploadResponse-Input": {
        "properties": {
          "file": {
            "$ref": "#/components/schemas/FileResponse"
          },
          "detected_schema": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Detected Schema",
            "description": "Detected schema (if provider_type specified)"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "FileUploadResponse",
        "description": "Response model for file upload with optional schema detection."
      },
      "FileUploadResponse-Output": {
        "properties": {
          "file": {
            "$ref": "#/components/schemas/FileResponse"
          },
          "detected_schema": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Detected Schema",
            "description": "Detected schema (if provider_type specified)"
          }
        },
        "type": "object",
        "required": [
          "file"
        ],
        "title": "FileUploadResponse",
        "description": "Response model for file upload with optional schema detection."
      },
      "FlagUsageSummary": {
        "properties": {
          "flag_key": {
            "type": "string",
            "title": "Flag Key",
            "description": "Feature flag key"
          },
          "flag_name": {
            "type": "string",
            "title": "Flag Name",
            "description": "Feature flag name"
          },
          "default_enabled": {
            "type": "boolean",
            "title": "Default Enabled",
            "description": "Global default state"
          },
          "total_tenants": {
            "type": "integer",
            "title": "Total Tenants",
            "description": "Total number of tenants in system"
          },
          "enabled_tenant_count": {
            "type": "integer",
            "title": "Enabled Tenant Count",
            "description": "Number of tenants with flag enabled"
          },
          "disabled_tenant_count": {
            "type": "integer",
            "title": "Disabled Tenant Count",
            "description": "Number of tenants with flag disabled"
          },
          "override_count": {
            "type": "integer",
            "title": "Override Count",
            "description": "Number of tenants with explicit overrides"
          },
          "enabled_tenant_ids": {
            "items": {
              "type": "string",
              "format": "uuid"
            },
            "type": "array",
            "title": "Enabled Tenant Ids",
            "description": "List of tenant IDs with flag enabled"
          },
          "disabled_tenant_ids": {
            "items": {
              "type": "string",
              "format": "uuid"
            },
            "type": "array",
            "title": "Disabled Tenant Ids",
            "description": "List of tenant IDs with flag disabled"
          }
        },
        "type": "object",
        "required": [
          "flag_key",
          "flag_name",
          "default_enabled",
          "total_tenants",
          "enabled_tenant_count",
          "disabled_tenant_count",
          "override_count"
        ],
        "title": "FlagUsageSummary",
        "description": "Summary of which tenants have a specific flag enabled (admin reporting)."
      },
      "HTTPValidationError": {
        "properties": {
          "detail": {
            "items": {
              "$ref": "#/components/schemas/ValidationError"
            },
            "type": "array",
            "title": "Detail"
          }
        },
        "type": "object",
        "title": "HTTPValidationError"
      },
      "HealthCheckResponse": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Overall health status: 'healthy' or 'unhealthy'"
          },
          "database": {
            "type": "string",
            "title": "Database",
            "description": "Database connectivity status"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "Health check timestamp"
          },
          "version": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Version",
            "description": "API version"
          }
        },
        "type": "object",
        "required": [
          "status",
          "database",
          "timestamp"
        ],
        "title": "HealthCheckResponse",
        "description": "Response model for health check endpoint."
      },
      "HealthStatus": {
        "properties": {
          "status": {
            "type": "string",
            "title": "Status",
            "description": "Health status: 'healthy', 'degraded', or 'unhealthy'",
            "example": "healthy"
          },
          "version": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Version",
            "description": "API version",
            "example": "1.0.0"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "ISO 8601 timestamp of the health check",
            "example": "2025-01-15T10:30:00Z"
          },
          "checks": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Checks",
            "description": "Detailed health check results for dependencies",
            "example": {
              "cache": {
                "latency_ms": 2,
                "status": "healthy"
              },
              "database": {
                "latency_ms": 5,
                "status": "healthy"
              },
              "storage": {
                "latency_ms": 10,
                "status": "healthy"
              }
            }
          }
        },
        "type": "object",
        "required": [
          "status"
        ],
        "title": "HealthStatus",
        "description": "Health check response model.\n\nUsed by /health and /ready endpoints."
      },
      "InferenceResult": {
        "properties": {
          "audit_hash": {
            "type": "string",
            "title": "Audit Hash",
            "description": "SHA-256 hash guaranteeing data integrity."
          },
          "exception_flag": {
            "type": "boolean",
            "title": "Exception Flag",
            "description": "True if an exception is predicted."
          },
          "reason_code": {
            "type": "string",
            "title": "Reason Code",
            "description": "Predicted exception code."
          },
          "confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Confidence",
            "description": "Model confidence score (0.0-1.0)."
          },
          "explainability_features": {
            "additionalProperties": {
              "type": "number"
            },
            "type": "object",
            "title": "Explainability Features",
            "description": "Key features that drove the prediction."
          }
        },
        "type": "object",
        "required": [
          "audit_hash",
          "exception_flag",
          "reason_code",
          "confidence",
          "explainability_features"
        ],
        "title": "InferenceResult",
        "description": "Output model for the primary PAID reconciliation endpoint.\nReturns the final prediction and the audit hash."
      },
      "IngestTransactionsRequest": {
        "properties": {
          "file_id": {
            "type": "string",
            "format": "uuid",
            "title": "File Id",
            "description": "Uploaded file ID"
          },
          "schema_id": {
            "type": "string",
            "format": "uuid",
            "title": "Schema Id",
            "description": "Schema to use for mapping"
          },
          "source_type": {
            "$ref": "#/components/schemas/SourceType",
            "description": "customer or provider"
          }
        },
        "type": "object",
        "required": [
          "file_id",
          "schema_id",
          "source_type"
        ],
        "title": "IngestTransactionsRequest",
        "description": "Request to ingest transactions from file."
      },
      "IngestTransactionsResponse": {
        "properties": {
          "transaction_count": {
            "type": "integer",
            "title": "Transaction Count",
            "description": "Total rows in CSV"
          },
          "ingested_count": {
            "type": "integer",
            "title": "Ingested Count",
            "description": "Successfully ingested"
          },
          "skipped_count": {
            "type": "integer",
            "title": "Skipped Count",
            "description": "Rows skipped",
            "default": 0
          },
          "errors": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Errors",
            "description": "Error messages"
          }
        },
        "type": "object",
        "required": [
          "transaction_count",
          "ingested_count"
        ],
        "title": "IngestTransactionsResponse",
        "description": "Transaction ingestion result."
      },
      "IngestionBatchResponse": {
        "properties": {
          "batch_id": {
            "type": "string",
            "format": "uuid",
            "title": "Batch Id"
          },
          "tenant_id": {
            "type": "string",
            "format": "uuid",
            "title": "Tenant Id"
          },
          "space_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Space Id"
          },
          "file_id": {
            "type": "string",
            "format": "uuid",
            "title": "File Id"
          },
          "schema_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Schema Id"
          },
          "matched_provider": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Matched Provider"
          },
          "match_confidence": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Match Confidence"
          },
          "detection_method": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Detection Method"
          },
          "total_rows": {
            "type": "integer",
            "title": "Total Rows"
          },
          "successful_rows": {
            "type": "integer",
            "title": "Successful Rows"
          },
          "failed_rows": {
            "type": "integer",
            "title": "Failed Rows"
          },
          "status": {
            "$ref": "#/components/schemas/IngestionStatus"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "started_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Started At"
          },
          "completed_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completed At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          },
          "duration_ms": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duration Ms"
          },
          "suggested_schemas": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/SuggestedSchema"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Suggested Schemas",
            "description": "Suggested schemas when status is AWAITING_SCHEMA"
          },
          "original_filename": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Original Filename",
            "description": "Original filename from upload"
          },
          "file_size_bytes": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "File Size Bytes",
            "description": "File size in bytes"
          },
          "created_by": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By",
            "description": "User ID who created the batch"
          }
        },
        "type": "object",
        "required": [
          "batch_id",
          "tenant_id",
          "file_id",
          "total_rows",
          "successful_rows",
          "failed_rows",
          "status",
          "created_at",
          "updated_at"
        ],
        "title": "IngestionBatchResponse",
        "description": "Response model for an ingestion batch."
      },
      "IngestionMetricsResponse": {
        "properties": {
          "total_batches": {
            "type": "integer",
            "title": "Total Batches",
            "description": "Total number of batches"
          },
          "batches_by_status": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Batches By Status",
            "description": "Count of batches by status"
          },
          "total_rows_processed": {
            "type": "integer",
            "title": "Total Rows Processed",
            "description": "Total rows processed across all batches"
          },
          "successful_rows": {
            "type": "integer",
            "title": "Successful Rows",
            "description": "Total successful rows"
          },
          "failed_rows": {
            "type": "integer",
            "title": "Failed Rows",
            "description": "Total failed rows"
          },
          "average_success_rate": {
            "type": "number",
            "title": "Average Success Rate",
            "description": "Average success rate across batches (0-100)"
          },
          "batches_last_24h": {
            "type": "integer",
            "title": "Batches Last 24H",
            "description": "Batches created in last 24 hours"
          },
          "batches_last_7d": {
            "type": "integer",
            "title": "Batches Last 7D",
            "description": "Batches created in last 7 days"
          },
          "active_batches": {
            "type": "integer",
            "title": "Active Batches",
            "description": "Batches currently in PROCESSING status"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "Metrics timestamp"
          }
        },
        "type": "object",
        "required": [
          "total_batches",
          "batches_by_status",
          "total_rows_processed",
          "successful_rows",
          "failed_rows",
          "average_success_rate",
          "batches_last_24h",
          "batches_last_7d",
          "active_batches",
          "timestamp"
        ],
        "title": "IngestionMetricsResponse",
        "description": "Response model for ingestion metrics."
      },
      "IngestionStatus": {
        "type": "string",
        "enum": [
          "PENDING",
          "AWAITING_SCHEMA",
          "PROCESSING",
          "COMPLETED",
          "PARTIAL",
          "FAILED"
        ],
        "title": "IngestionStatus",
        "description": "Batch ingestion status."
      },
      "MatchApprovalRequest": {
        "properties": {
          "notes": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 1000
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes",
            "description": "Optional notes"
          }
        },
        "type": "object",
        "title": "MatchApprovalRequest",
        "description": "Approve a match."
      },
      "MatchAuditResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "match_id": {
            "type": "string",
            "format": "uuid",
            "title": "Match Id"
          },
          "action": {
            "type": "string",
            "title": "Action"
          },
          "performed_by": {
            "type": "string",
            "format": "uuid",
            "title": "Performed By"
          },
          "performer_email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Performer Email"
          },
          "reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reason"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          },
          "previous_status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Previous Status"
          },
          "new_status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "New Status"
          },
          "ip_address": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Ip Address"
          },
          "request_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Request Id"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "match_id",
          "action",
          "performed_by",
          "created_at"
        ],
        "title": "MatchAuditResponse",
        "description": "Audit trail entry."
      },
      "MatchCandidateResponse-Input": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "tenant_id": {
            "type": "string",
            "format": "uuid",
            "title": "Tenant Id"
          },
          "space_id": {
            "type": "string",
            "format": "uuid",
            "title": "Space Id"
          },
          "customer_transaction_id": {
            "type": "string",
            "format": "uuid",
            "title": "Customer Transaction Id"
          },
          "provider_transaction_id": {
            "type": "string",
            "format": "uuid",
            "title": "Provider Transaction Id"
          },
          "confidence_score": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              }
            ],
            "title": "Confidence Score"
          },
          "match_stage": {
            "type": "string",
            "title": "Match Stage"
          },
          "match_reasons": {
            "additionalProperties": true,
            "type": "object",
            "title": "Match Reasons"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "tenant_id",
          "space_id",
          "customer_transaction_id",
          "provider_transaction_id",
          "confidence_score",
          "match_stage",
          "match_reasons",
          "created_at"
        ],
        "title": "MatchCandidateResponse",
        "description": "Match candidate API response."
      },
      "MatchCandidateResponse-Output": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "tenant_id": {
            "type": "string",
            "format": "uuid",
            "title": "Tenant Id"
          },
          "space_id": {
            "type": "string",
            "format": "uuid",
            "title": "Space Id"
          },
          "customer_transaction_id": {
            "type": "string",
            "format": "uuid",
            "title": "Customer Transaction Id"
          },
          "provider_transaction_id": {
            "type": "string",
            "format": "uuid",
            "title": "Provider Transaction Id"
          },
          "confidence_score": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Confidence Score"
          },
          "match_stage": {
            "type": "string",
            "title": "Match Stage"
          },
          "match_reasons": {
            "additionalProperties": true,
            "type": "object",
            "title": "Match Reasons"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "tenant_id",
          "space_id",
          "customer_transaction_id",
          "provider_transaction_id",
          "confidence_score",
          "match_stage",
          "match_reasons",
          "created_at"
        ],
        "title": "MatchCandidateResponse",
        "description": "Match candidate API response."
      },
      "MatchListResponse-Input": {
        "properties": {
          "matches": {
            "items": {
              "$ref": "#/components/schemas/MatchResponse-Input"
            },
            "type": "array",
            "title": "Matches"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count"
          },
          "page": {
            "type": "integer",
            "title": "Page",
            "default": 1
          },
          "page_size": {
            "type": "integer",
            "title": "Page Size",
            "default": 50
          }
        },
        "type": "object",
        "required": [
          "matches",
          "total_count"
        ],
        "title": "MatchListResponse",
        "description": "Paginated match list."
      },
      "MatchListResponse-Output": {
        "properties": {
          "matches": {
            "items": {
              "$ref": "#/components/schemas/MatchResponse-Output"
            },
            "type": "array",
            "title": "Matches"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count"
          },
          "page": {
            "type": "integer",
            "title": "Page",
            "default": 1
          },
          "page_size": {
            "type": "integer",
            "title": "Page Size",
            "default": 50
          }
        },
        "type": "object",
        "required": [
          "matches",
          "total_count"
        ],
        "title": "MatchListResponse",
        "description": "Paginated match list."
      },
      "MatchRejectionRequest": {
        "properties": {
          "reason": {
            "type": "string",
            "maxLength": 500,
            "minLength": 1,
            "title": "Reason",
            "description": "Rejection reason"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 1000
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes",
            "description": "Additional notes"
          }
        },
        "type": "object",
        "required": [
          "reason"
        ],
        "title": "MatchRejectionRequest",
        "description": "Reject a match."
      },
      "MatchResponse-Input": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "tenant_id": {
            "type": "string",
            "format": "uuid",
            "title": "Tenant Id"
          },
          "space_id": {
            "type": "string",
            "format": "uuid",
            "title": "Space Id"
          },
          "customer_transaction_id": {
            "type": "string",
            "format": "uuid",
            "title": "Customer Transaction Id"
          },
          "provider_transaction_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Provider Transaction Id"
          },
          "match_session_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Match Session Id"
          },
          "match_type": {
            "$ref": "#/components/schemas/MatchType"
          },
          "confidence_score": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              }
            ],
            "title": "Confidence Score"
          },
          "status": {
            "$ref": "#/components/schemas/MatchStatus"
          },
          "match_details": {
            "additionalProperties": true,
            "type": "object",
            "title": "Match Details"
          },
          "approved_by": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Approved By"
          },
          "approved_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Approved At"
          },
          "rejected_by": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rejected By"
          },
          "rejected_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rejected At"
          },
          "rejection_reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rejection Reason"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "tenant_id",
          "space_id",
          "customer_transaction_id",
          "provider_transaction_id",
          "match_type",
          "confidence_score",
          "status",
          "match_details",
          "created_at",
          "updated_at"
        ],
        "title": "MatchResponse",
        "description": "Match API response."
      },
      "MatchResponse-Output": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "tenant_id": {
            "type": "string",
            "format": "uuid",
            "title": "Tenant Id"
          },
          "space_id": {
            "type": "string",
            "format": "uuid",
            "title": "Space Id"
          },
          "customer_transaction_id": {
            "type": "string",
            "format": "uuid",
            "title": "Customer Transaction Id"
          },
          "provider_transaction_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Provider Transaction Id"
          },
          "match_session_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Match Session Id"
          },
          "match_type": {
            "$ref": "#/components/schemas/MatchType"
          },
          "confidence_score": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Confidence Score"
          },
          "status": {
            "$ref": "#/components/schemas/MatchStatus"
          },
          "match_details": {
            "additionalProperties": true,
            "type": "object",
            "title": "Match Details"
          },
          "approved_by": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Approved By"
          },
          "approved_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Approved At"
          },
          "rejected_by": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rejected By"
          },
          "rejected_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rejected At"
          },
          "rejection_reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Rejection Reason"
          },
          "notes": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          }
        },
        "type": "object",
        "required": [
          "id",
          "tenant_id",
          "space_id",
          "customer_transaction_id",
          "provider_transaction_id",
          "match_type",
          "confidence_score",
          "status",
          "match_details",
          "created_at",
          "updated_at"
        ],
        "title": "MatchResponse",
        "description": "Match API response."
      },
      "MatchSessionListResponse-Input": {
        "properties": {
          "sessions": {
            "items": {
              "$ref": "#/components/schemas/MatchSessionResponse-Input"
            },
            "type": "array",
            "title": "Sessions"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count"
          },
          "page": {
            "type": "integer",
            "title": "Page",
            "default": 1
          },
          "page_size": {
            "type": "integer",
            "title": "Page Size",
            "default": 50
          }
        },
        "type": "object",
        "required": [
          "sessions",
          "total_count"
        ],
        "title": "MatchSessionListResponse",
        "description": "Paginated match session list."
      },
      "MatchSessionListResponse-Output": {
        "properties": {
          "sessions": {
            "items": {
              "$ref": "#/components/schemas/MatchSessionResponse-Output"
            },
            "type": "array",
            "title": "Sessions"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count"
          },
          "page": {
            "type": "integer",
            "title": "Page",
            "default": 1
          },
          "page_size": {
            "type": "integer",
            "title": "Page Size",
            "default": 50
          }
        },
        "type": "object",
        "required": [
          "sessions",
          "total_count"
        ],
        "title": "MatchSessionListResponse",
        "description": "Paginated match session list."
      },
      "MatchSessionResponse-Input": {
        "properties": {
          "session_id": {
            "type": "string",
            "format": "uuid",
            "title": "Session Id"
          },
          "tenant_id": {
            "type": "string",
            "format": "uuid",
            "title": "Tenant Id"
          },
          "space_id": {
            "type": "string",
            "format": "uuid",
            "title": "Space Id"
          },
          "customer_file_id": {
            "type": "string",
            "format": "uuid",
            "title": "Customer File Id"
          },
          "provider_file_id": {
            "type": "string",
            "format": "uuid",
            "title": "Provider File Id"
          },
          "status": {
            "$ref": "#/components/schemas/MatchSessionStatus"
          },
          "created_by": {
            "type": "string",
            "format": "uuid",
            "title": "Created By"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "started_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Started At"
          },
          "completed_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completed At"
          },
          "duration_seconds": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duration Seconds"
          },
          "customer_transaction_count": {
            "type": "integer",
            "title": "Customer Transaction Count",
            "default": 0
          },
          "provider_transaction_count": {
            "type": "integer",
            "title": "Provider Transaction Count",
            "default": 0
          },
          "exact_match_count": {
            "type": "integer",
            "title": "Exact Match Count",
            "default": 0
          },
          "fuzzy_match_count": {
            "type": "integer",
            "title": "Fuzzy Match Count",
            "default": 0
          },
          "ml_match_count": {
            "type": "integer",
            "title": "Ml Match Count",
            "default": 0
          },
          "total_match_count": {
            "type": "integer",
            "title": "Total Match Count",
            "default": 0
          },
          "auto_approved_count": {
            "type": "integer",
            "title": "Auto Approved Count",
            "default": 0
          },
          "auto_approve_threshold": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Auto Approve Threshold"
          },
          "match_details": {
            "additionalProperties": true,
            "type": "object",
            "title": "Match Details"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "tenant_id",
          "space_id",
          "customer_file_id",
          "provider_file_id",
          "status",
          "created_by",
          "created_at"
        ],
        "title": "MatchSessionResponse",
        "description": "Match session API response."
      },
      "MatchSessionResponse-Output": {
        "properties": {
          "session_id": {
            "type": "string",
            "format": "uuid",
            "title": "Session Id"
          },
          "tenant_id": {
            "type": "string",
            "format": "uuid",
            "title": "Tenant Id"
          },
          "space_id": {
            "type": "string",
            "format": "uuid",
            "title": "Space Id"
          },
          "customer_file_id": {
            "type": "string",
            "format": "uuid",
            "title": "Customer File Id"
          },
          "provider_file_id": {
            "type": "string",
            "format": "uuid",
            "title": "Provider File Id"
          },
          "status": {
            "$ref": "#/components/schemas/MatchSessionStatus"
          },
          "created_by": {
            "type": "string",
            "format": "uuid",
            "title": "Created By"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "started_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Started At"
          },
          "completed_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Completed At"
          },
          "duration_seconds": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Duration Seconds"
          },
          "customer_transaction_count": {
            "type": "integer",
            "title": "Customer Transaction Count",
            "default": 0
          },
          "provider_transaction_count": {
            "type": "integer",
            "title": "Provider Transaction Count",
            "default": 0
          },
          "exact_match_count": {
            "type": "integer",
            "title": "Exact Match Count",
            "default": 0
          },
          "fuzzy_match_count": {
            "type": "integer",
            "title": "Fuzzy Match Count",
            "default": 0
          },
          "ml_match_count": {
            "type": "integer",
            "title": "Ml Match Count",
            "default": 0
          },
          "total_match_count": {
            "type": "integer",
            "title": "Total Match Count",
            "default": 0
          },
          "auto_approved_count": {
            "type": "integer",
            "title": "Auto Approved Count",
            "default": 0
          },
          "auto_approve_threshold": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Auto Approve Threshold"
          },
          "match_details": {
            "additionalProperties": true,
            "type": "object",
            "title": "Match Details"
          },
          "error_message": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Error Message"
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "tenant_id",
          "space_id",
          "customer_file_id",
          "provider_file_id",
          "status",
          "created_by",
          "created_at"
        ],
        "title": "MatchSessionResponse",
        "description": "Match session API response."
      },
      "MatchSessionStatus": {
        "type": "string",
        "enum": [
          "pending",
          "running",
          "completed",
          "failed",
          "timeout"
        ],
        "title": "MatchSessionStatus",
        "description": "Match session status."
      },
      "MatchStatsResponse-Input": {
        "properties": {
          "total_transactions": {
            "type": "integer",
            "title": "Total Transactions",
            "description": "Total transactions ingested"
          },
          "customer_transactions": {
            "type": "integer",
            "title": "Customer Transactions",
            "description": "Customer transactions"
          },
          "provider_transactions": {
            "type": "integer",
            "title": "Provider Transactions",
            "description": "Provider transactions"
          },
          "matched_count": {
            "type": "integer",
            "title": "Matched Count",
            "description": "Successfully matched transactions"
          },
          "unmatched_count": {
            "type": "integer",
            "title": "Unmatched Count",
            "description": "Unmatched transactions"
          },
          "match_accuracy": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              }
            ],
            "title": "Match Accuracy",
            "description": "Overall matching accuracy"
          },
          "matches_by_type": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Matches By Type",
            "description": "Count by match type (exact, fuzzy, etc.)"
          },
          "matches_by_status": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Matches By Status",
            "description": "Count by status (suggested, approved, etc.)"
          }
        },
        "type": "object",
        "required": [
          "total_transactions",
          "customer_transactions",
          "provider_transactions",
          "matched_count",
          "unmatched_count",
          "match_accuracy"
        ],
        "title": "MatchStatsResponse",
        "description": "Matching statistics."
      },
      "MatchStatsResponse-Output": {
        "properties": {
          "total_transactions": {
            "type": "integer",
            "title": "Total Transactions",
            "description": "Total transactions ingested"
          },
          "customer_transactions": {
            "type": "integer",
            "title": "Customer Transactions",
            "description": "Customer transactions"
          },
          "provider_transactions": {
            "type": "integer",
            "title": "Provider Transactions",
            "description": "Provider transactions"
          },
          "matched_count": {
            "type": "integer",
            "title": "Matched Count",
            "description": "Successfully matched transactions"
          },
          "unmatched_count": {
            "type": "integer",
            "title": "Unmatched Count",
            "description": "Unmatched transactions"
          },
          "match_accuracy": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Match Accuracy",
            "description": "Overall matching accuracy"
          },
          "matches_by_type": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Matches By Type",
            "description": "Count by match type (exact, fuzzy, etc.)"
          },
          "matches_by_status": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Matches By Status",
            "description": "Count by status (suggested, approved, etc.)"
          }
        },
        "type": "object",
        "required": [
          "total_transactions",
          "customer_transactions",
          "provider_transactions",
          "matched_count",
          "unmatched_count",
          "match_accuracy"
        ],
        "title": "MatchStatsResponse",
        "description": "Matching statistics."
      },
      "MatchStatus": {
        "type": "string",
        "enum": [
          "suggested",
          "approved",
          "rejected",
          "flagged"
        ],
        "title": "MatchStatus",
        "description": "Match approval status."
      },
      "MatchType": {
        "type": "string",
        "enum": [
          "exact",
          "fuzzy",
          "ml",
          "llm",
          "manual",
          "compound"
        ],
        "title": "MatchType",
        "description": "Match algorithm type."
      },
      "MatchUndoRequest": {
        "properties": {
          "notes": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 1000
              },
              {
                "type": "null"
              }
            ],
            "title": "Notes",
            "description": "Optional notes"
          }
        },
        "type": "object",
        "title": "MatchUndoRequest",
        "description": "Undo a match approval or rejection."
      },
      "PaginatedData_SchemaResponse_-Input": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/SchemaResponse-Input"
            },
            "type": "array",
            "title": "Items",
            "description": "List of items for the current page"
          },
          "pagination": {
            "$ref": "#/components/schemas/PaginationInfo",
            "description": "Pagination metadata"
          }
        },
        "type": "object",
        "required": [
          "items",
          "pagination"
        ],
        "title": "PaginatedData[SchemaResponse]"
      },
      "PaginatedData_SchemaResponse_-Output": {
        "properties": {
          "items": {
            "items": {
              "$ref": "#/components/schemas/SchemaResponse-Output"
            },
            "type": "array",
            "title": "Items",
            "description": "List of items for the current page"
          },
          "pagination": {
            "$ref": "#/components/schemas/PaginationInfo",
            "description": "Pagination metadata"
          }
        },
        "type": "object",
        "required": [
          "items",
          "pagination"
        ],
        "title": "PaginatedData[SchemaResponse]"
      },
      "PaginatedResponse_SchemaResponse_": {
        "properties": {
          "success": {
            "type": "boolean",
            "title": "Success",
            "description": "Whether the request succeeded",
            "default": true
          },
          "data": {
            "$ref": "#/components/schemas/PaginatedData_SchemaResponse_-Output",
            "description": "Paginated data with items and pagination info"
          },
          "meta": {
            "$ref": "#/components/schemas/ResponseMeta",
            "description": "Response metadata (request_id, timestamp, version)"
          }
        },
        "type": "object",
        "required": [
          "data",
          "meta"
        ],
        "title": "PaginatedResponse[SchemaResponse]"
      },
      "PaginationInfo": {
        "properties": {
          "page": {
            "type": "integer",
            "minimum": 1.0,
            "title": "Page",
            "description": "Current page number (1-indexed)"
          },
          "page_size": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 1.0,
            "title": "Page Size",
            "description": "Number of items per page"
          },
          "total_items": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Items",
            "description": "Total number of items across all pages"
          },
          "total_pages": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total Pages",
            "description": "Total number of pages"
          },
          "has_next": {
            "type": "boolean",
            "title": "Has Next",
            "description": "Whether there is a next page available"
          },
          "has_previous": {
            "type": "boolean",
            "title": "Has Previous",
            "description": "Whether there is a previous page available"
          }
        },
        "type": "object",
        "required": [
          "page",
          "page_size",
          "total_items",
          "total_pages",
          "has_next",
          "has_previous"
        ],
        "title": "PaginationInfo",
        "description": "Pagination metadata for list endpoints.\n\nProvides page information and navigation hints for clients."
      },
      "PasswordChange": {
        "properties": {
          "current_password": {
            "type": "string",
            "title": "Current Password",
            "description": "Current password for verification",
            "examples": [
              "OldP@ss123!"
            ]
          },
          "new_password": {
            "type": "string",
            "maxLength": 128,
            "minLength": 8,
            "title": "New Password",
            "description": "New password (8-128 chars, must meet security requirements)",
            "examples": [
              "NewSecureP@ss123!"
            ]
          }
        },
        "type": "object",
        "required": [
          "current_password",
          "new_password"
        ],
        "title": "PasswordChange",
        "description": "Password change model (for authenticated users).\n\nUser changes their own password (requires current password).\n\nExample:\n    ```json\n    {\n        \"current_password\": \"OldP@ss123!\",\n        \"new_password\": \"NewSecureP@ss123!\"\n    }\n    ```"
      },
      "PrecisionInput": {
        "properties": {
          "client_id": {
            "type": "string",
            "title": "Client Id",
            "description": "Unique identifier for the client/tenant"
          },
          "sequence_id": {
            "type": "integer",
            "title": "Sequence Id",
            "description": "System sequence ID for audit trail"
          },
          "event_timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Event Timestamp",
            "description": "When this event was received by the system (UTC)"
          },
          "amount_a": {
            "type": "number",
            "title": "Amount A"
          },
          "amount_b": {
            "type": "number",
            "title": "Amount B"
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "client_id",
          "sequence_id",
          "amount_a",
          "amount_b"
        ],
        "title": "PrecisionInput",
        "description": "Input model for the FX Precision Scout."
      },
      "PrecisionOutput": {
        "properties": {
          "amount_a_str": {
            "type": "string",
            "title": "Amount A Str"
          },
          "amount_b_str": {
            "type": "string",
            "title": "Amount B Str"
          },
          "absolute_variance": {
            "type": "number",
            "title": "Absolute Variance"
          },
          "basis_points_variance": {
            "type": "number",
            "title": "Basis Points Variance"
          },
          "conclusion": {
            "type": "string",
            "title": "Conclusion"
          },
          "risk_level": {
            "type": "string",
            "title": "Risk Level"
          }
        },
        "type": "object",
        "required": [
          "amount_a_str",
          "amount_b_str",
          "absolute_variance",
          "basis_points_variance",
          "conclusion",
          "risk_level"
        ],
        "title": "PrecisionOutput",
        "description": "Output model for the FX Precision Scout result."
      },
      "ProcessBatchRequest": {
        "properties": {
          "schema_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Schema Id",
            "description": "Schema ID (UUID) to use for processing. If not provided, uses existing batch schema."
          }
        },
        "type": "object",
        "title": "ProcessBatchRequest",
        "description": "Request model for processing/reprocessing a batch."
      },
      "ProcessingStatus": {
        "type": "string",
        "enum": [
          "PENDING",
          "PROCESSING",
          "COMPLETED",
          "FAILED"
        ],
        "title": "ProcessingStatus",
        "description": "File processing status."
      },
      "ResponseMeta": {
        "properties": {
          "request_id": {
            "type": "string",
            "title": "Request Id",
            "description": "Unique request identifier from RequestIDMiddleware"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp",
            "description": "Response timestamp in UTC"
          },
          "version": {
            "type": "string",
            "title": "Version",
            "description": "API version",
            "default": "v1"
          }
        },
        "type": "object",
        "required": [
          "request_id"
        ],
        "title": "ResponseMeta",
        "description": "Standard response metadata included in all API responses.\n\nProvides request tracking, timestamp, and API version information\nfor debugging and monitoring purposes."
      },
      "RollbackRequest": {
        "properties": {
          "version_number": {
            "type": "integer",
            "exclusiveMinimum": 0.0,
            "title": "Version Number",
            "description": "Version number to rollback to (must be > 0)"
          },
          "reason": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 500
              },
              {
                "type": "null"
              }
            ],
            "title": "Reason",
            "description": "Reason for rollback (optional, max 500 characters)"
          }
        },
        "type": "object",
        "required": [
          "version_number"
        ],
        "title": "RollbackRequest",
        "description": "Request to rollback schema to a previous version."
      },
      "RunMatchingRequest": {
        "properties": {
          "customer_file_id": {
            "type": "string",
            "format": "uuid",
            "title": "Customer File Id",
            "description": "Customer transaction file"
          },
          "provider_file_id": {
            "type": "string",
            "format": "uuid",
            "title": "Provider File Id",
            "description": "Provider transaction file"
          },
          "auto_approve_threshold": {
            "anyOf": [
              {
                "type": "number",
                "maximum": 1.0,
                "minimum": 0.0
              },
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Auto Approve Threshold",
            "description": "Auto-approve matches above this threshold (e.g., 0.95)"
          }
        },
        "type": "object",
        "required": [
          "customer_file_id",
          "provider_file_id"
        ],
        "title": "RunMatchingRequest",
        "description": "Request to run matching."
      },
      "RunMatchingResponse": {
        "properties": {
          "session_id": {
            "type": "string",
            "format": "uuid",
            "title": "Session Id",
            "description": "Match session ID for this run"
          },
          "candidates_found": {
            "type": "integer",
            "title": "Candidates Found",
            "description": "Total match candidates found"
          },
          "exact_matches": {
            "type": "integer",
            "title": "Exact Matches",
            "description": "Exact matches (confidence=1.0)",
            "default": 0
          },
          "fuzzy_matches": {
            "type": "integer",
            "title": "Fuzzy Matches",
            "description": "Fuzzy matches (0.75-0.99)",
            "default": 0
          },
          "ml_matches": {
            "type": "integer",
            "title": "Ml Matches",
            "description": "ML matches (future)",
            "default": 0
          },
          "llm_matches": {
            "type": "integer",
            "title": "Llm Matches",
            "description": "LLM matches (future)",
            "default": 0
          },
          "match_candidate_ids": {
            "items": {
              "type": "string",
              "format": "uuid"
            },
            "type": "array",
            "title": "Match Candidate Ids",
            "description": "IDs of match candidates created"
          },
          "auto_approved_count": {
            "type": "integer",
            "title": "Auto Approved Count",
            "description": "Matches auto-approved due to high confidence",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "session_id",
          "candidates_found"
        ],
        "title": "RunMatchingResponse",
        "description": "Matching operation result."
      },
      "SchemaConfirmRequest": {
        "properties": {
          "status": {
            "$ref": "#/components/schemas/SchemaStatus",
            "description": "New status: confirmed, rejected, or modified"
          },
          "column_mappings": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "string"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Column Mappings",
            "description": "Modified column mappings (only for status=modified)"
          }
        },
        "type": "object",
        "required": [
          "status"
        ],
        "title": "SchemaConfirmRequest",
        "description": "Request to confirm or modify a detected schema."
      },
      "SchemaDependencyResponse": {
        "properties": {
          "dependency_id": {
            "type": "string",
            "format": "uuid",
            "title": "Dependency Id"
          },
          "schema_id": {
            "type": "string",
            "format": "uuid",
            "title": "Schema Id"
          },
          "depends_on_schema_id": {
            "type": "string",
            "format": "uuid",
            "title": "Depends On Schema Id"
          },
          "depends_on_schema_name": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Depends On Schema Name",
            "description": "Name of the schema being depended upon"
          },
          "dependency_type": {
            "type": "string",
            "title": "Dependency Type"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "tenant_id": {
            "type": "string",
            "format": "uuid",
            "title": "Tenant Id"
          },
          "space_id": {
            "type": "string",
            "format": "uuid",
            "title": "Space Id"
          }
        },
        "type": "object",
        "required": [
          "dependency_id",
          "schema_id",
          "depends_on_schema_id",
          "dependency_type",
          "description",
          "created_at",
          "tenant_id",
          "space_id"
        ],
        "title": "SchemaDependencyResponse",
        "description": "Response model for a schema dependency."
      },
      "SchemaDetectRequest": {
        "properties": {
          "file_id": {
            "type": "string",
            "format": "uuid",
            "title": "File Id",
            "description": "ID of the uploaded CSV file"
          }
        },
        "type": "object",
        "required": [
          "file_id"
        ],
        "title": "SchemaDetectRequest",
        "description": "Request to detect schema for an uploaded file."
      },
      "SchemaListItem": {
        "properties": {
          "schema_id": {
            "type": "string",
            "format": "uuid",
            "title": "Schema Id",
            "description": "Schema UUID"
          },
          "provider_type": {
            "type": "string",
            "title": "Provider Type",
            "description": "Provider type identifier"
          },
          "display_name": {
            "type": "string",
            "title": "Display Name",
            "description": "Human-readable schema name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Schema description"
          },
          "column_count": {
            "type": "integer",
            "title": "Column Count",
            "description": "Number of columns in schema"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "description": "Whether schema is active"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Schema creation timestamp"
          }
        },
        "type": "object",
        "required": [
          "schema_id",
          "provider_type",
          "display_name",
          "column_count",
          "is_active",
          "created_at"
        ],
        "title": "SchemaListItem",
        "description": "Schema item in list response."
      },
      "SchemaListResponse": {
        "properties": {
          "schemas": {
            "items": {
              "$ref": "#/components/schemas/SchemaListItem"
            },
            "type": "array",
            "title": "Schemas",
            "description": "List of available schemas"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count",
            "description": "Total number of schemas"
          },
          "page": {
            "type": "integer",
            "minimum": 1.0,
            "title": "Page",
            "description": "Current page number",
            "default": 1
          },
          "page_size": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 1.0,
            "title": "Page Size",
            "description": "Items per page",
            "default": 20
          }
        },
        "type": "object",
        "required": [
          "schemas",
          "total_count"
        ],
        "title": "SchemaListResponse",
        "description": "Response model for listing schemas."
      },
      "SchemaResponse-Input": {
        "properties": {
          "schema_id": {
            "type": "string",
            "format": "uuid",
            "title": "Schema Id"
          },
          "tenant_id": {
            "type": "string",
            "format": "uuid",
            "title": "Tenant Id"
          },
          "space_id": {
            "type": "string",
            "format": "uuid",
            "title": "Space Id"
          },
          "file_id": {
            "type": "string",
            "format": "uuid",
            "title": "File Id"
          },
          "provider_type": {
            "type": "string",
            "title": "Provider Type"
          },
          "provider_confidence": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              }
            ],
            "title": "Provider Confidence"
          },
          "column_mappings": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Column Mappings"
          },
          "detection_metadata": {
            "additionalProperties": true,
            "type": "object",
            "title": "Detection Metadata"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "confirmed_by": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Confirmed By"
          },
          "confirmed_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Confirmed At"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          },
          "created_by": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "default": false
          },
          "validation_rules": {
            "additionalProperties": true,
            "type": "object",
            "title": "Validation Rules"
          },
          "transform_rules": {
            "additionalProperties": true,
            "type": "object",
            "title": "Transform Rules"
          },
          "last_used_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Used At"
          },
          "usage_count": {
            "type": "integer",
            "title": "Usage Count",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "schema_id",
          "tenant_id",
          "space_id",
          "file_id",
          "provider_type",
          "provider_confidence",
          "column_mappings",
          "detection_metadata",
          "status",
          "created_at",
          "updated_at"
        ],
        "title": "SchemaResponse",
        "description": "Response model for a single schema."
      },
      "SchemaResponse-Output": {
        "properties": {
          "schema_id": {
            "type": "string",
            "format": "uuid",
            "title": "Schema Id"
          },
          "tenant_id": {
            "type": "string",
            "format": "uuid",
            "title": "Tenant Id"
          },
          "space_id": {
            "type": "string",
            "format": "uuid",
            "title": "Space Id"
          },
          "file_id": {
            "type": "string",
            "format": "uuid",
            "title": "File Id"
          },
          "provider_type": {
            "type": "string",
            "title": "Provider Type"
          },
          "provider_confidence": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Provider Confidence"
          },
          "column_mappings": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Column Mappings"
          },
          "detection_metadata": {
            "additionalProperties": true,
            "type": "object",
            "title": "Detection Metadata"
          },
          "status": {
            "type": "string",
            "title": "Status"
          },
          "confirmed_by": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Confirmed By"
          },
          "confirmed_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Confirmed At"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          },
          "created_by": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "default": false
          },
          "validation_rules": {
            "additionalProperties": true,
            "type": "object",
            "title": "Validation Rules"
          },
          "transform_rules": {
            "additionalProperties": true,
            "type": "object",
            "title": "Transform Rules"
          },
          "last_used_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Used At"
          },
          "usage_count": {
            "type": "integer",
            "title": "Usage Count",
            "default": 0
          }
        },
        "type": "object",
        "required": [
          "schema_id",
          "tenant_id",
          "space_id",
          "file_id",
          "provider_type",
          "provider_confidence",
          "column_mappings",
          "detection_metadata",
          "status",
          "created_at",
          "updated_at"
        ],
        "title": "SchemaResponse",
        "description": "Response model for a single schema."
      },
      "SchemaStatsResponse-Input": {
        "properties": {
          "total_schemas": {
            "type": "integer",
            "title": "Total Schemas"
          },
          "confirmed_schemas": {
            "type": "integer",
            "title": "Confirmed Schemas"
          },
          "active_schemas": {
            "type": "integer",
            "title": "Active Schemas"
          },
          "schemas_by_provider": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Schemas By Provider"
          },
          "schemas_by_status": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Schemas By Status"
          },
          "total_usage_count": {
            "type": "integer",
            "title": "Total Usage Count"
          },
          "most_used_schemas": {
            "items": {
              "$ref": "#/components/schemas/SchemaResponse-Input"
            },
            "type": "array",
            "title": "Most Used Schemas"
          }
        },
        "type": "object",
        "required": [
          "total_schemas",
          "confirmed_schemas",
          "active_schemas",
          "schemas_by_provider",
          "schemas_by_status",
          "total_usage_count",
          "most_used_schemas"
        ],
        "title": "SchemaStatsResponse",
        "description": "Response for schema statistics in a space."
      },
      "SchemaStatsResponse-Output": {
        "properties": {
          "total_schemas": {
            "type": "integer",
            "title": "Total Schemas"
          },
          "confirmed_schemas": {
            "type": "integer",
            "title": "Confirmed Schemas"
          },
          "active_schemas": {
            "type": "integer",
            "title": "Active Schemas"
          },
          "schemas_by_provider": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Schemas By Provider"
          },
          "schemas_by_status": {
            "additionalProperties": {
              "type": "integer"
            },
            "type": "object",
            "title": "Schemas By Status"
          },
          "total_usage_count": {
            "type": "integer",
            "title": "Total Usage Count"
          },
          "most_used_schemas": {
            "items": {
              "$ref": "#/components/schemas/SchemaResponse-Output"
            },
            "type": "array",
            "title": "Most Used Schemas"
          }
        },
        "type": "object",
        "required": [
          "total_schemas",
          "confirmed_schemas",
          "active_schemas",
          "schemas_by_provider",
          "schemas_by_status",
          "total_usage_count",
          "most_used_schemas"
        ],
        "title": "SchemaStatsResponse",
        "description": "Response for schema statistics in a space."
      },
      "SchemaStatus": {
        "type": "string",
        "enum": [
          "detected",
          "confirmed",
          "rejected",
          "modified",
          "deleted"
        ],
        "title": "SchemaStatus",
        "description": "Schema confirmation status."
      },
      "SchemaTemplateResponse": {
        "properties": {
          "template_id": {
            "type": "string",
            "title": "Template Id",
            "description": "Unique template identifier"
          },
          "name": {
            "type": "string",
            "title": "Name",
            "description": "Human-readable template name"
          },
          "provider_type": {
            "type": "string",
            "title": "Provider Type",
            "description": "Provider type this template is for"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "Template description"
          },
          "column_mappings": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Column Mappings",
            "description": "Pre-configured column mappings"
          },
          "validation_rules": {
            "additionalProperties": true,
            "type": "object",
            "title": "Validation Rules",
            "description": "Pre-configured validation rules"
          },
          "transform_rules": {
            "additionalProperties": true,
            "type": "object",
            "title": "Transform Rules",
            "description": "Pre-configured transform rules"
          },
          "tags": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Tags",
            "description": "Template tags/categories"
          }
        },
        "type": "object",
        "required": [
          "template_id",
          "name",
          "provider_type",
          "description",
          "column_mappings",
          "validation_rules",
          "transform_rules"
        ],
        "title": "SchemaTemplateResponse",
        "description": "Response model for a schema template."
      },
      "SchemaUpdateRequest": {
        "properties": {
          "column_mappings": {
            "anyOf": [
              {
                "additionalProperties": {
                  "type": "string"
                },
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Column Mappings",
            "description": "Updated column mappings"
          },
          "validation_rules": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Validation Rules",
            "description": "Updated validation rules"
          },
          "transform_rules": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Transform Rules",
            "description": "Updated transformation rules"
          }
        },
        "type": "object",
        "title": "SchemaUpdateRequest",
        "description": "Request to update an existing schema's mappings and rules."
      },
      "SchemaUsageLogRequest": {
        "properties": {
          "processing_metadata": {
            "additionalProperties": true,
            "type": "object",
            "title": "Processing Metadata",
            "description": "Metadata about the processing operation (rows processed, errors, duration, etc.)"
          }
        },
        "type": "object",
        "title": "SchemaUsageLogRequest",
        "description": "Request to log schema usage."
      },
      "SchemaUsageLogResponse": {
        "properties": {
          "log_id": {
            "type": "string",
            "format": "uuid",
            "title": "Log Id"
          },
          "schema_id": {
            "type": "string",
            "format": "uuid",
            "title": "Schema Id"
          },
          "file_id": {
            "type": "string",
            "format": "uuid",
            "title": "File Id"
          },
          "used_at": {
            "type": "string",
            "format": "date-time",
            "title": "Used At"
          },
          "used_by": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Used By"
          },
          "processing_metadata": {
            "additionalProperties": true,
            "type": "object",
            "title": "Processing Metadata"
          }
        },
        "type": "object",
        "required": [
          "log_id",
          "schema_id",
          "file_id",
          "used_at",
          "processing_metadata"
        ],
        "title": "SchemaUsageLogResponse",
        "description": "Response model for schema usage log entry."
      },
      "SchemaVersionListResponse": {
        "properties": {
          "versions": {
            "items": {
              "$ref": "#/components/schemas/SchemaVersionResponse"
            },
            "type": "array",
            "title": "Versions"
          },
          "total_versions": {
            "type": "integer",
            "title": "Total Versions"
          },
          "schema_id": {
            "type": "string",
            "format": "uuid",
            "title": "Schema Id"
          }
        },
        "type": "object",
        "required": [
          "versions",
          "total_versions",
          "schema_id"
        ],
        "title": "SchemaVersionListResponse",
        "description": "Response model for list of schema versions."
      },
      "SchemaVersionResponse": {
        "properties": {
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "schema_id": {
            "type": "string",
            "format": "uuid",
            "title": "Schema Id"
          },
          "version_number": {
            "type": "integer",
            "title": "Version Number"
          },
          "tenant_id": {
            "type": "string",
            "format": "uuid",
            "title": "Tenant Id"
          },
          "space_id": {
            "type": "string",
            "format": "uuid",
            "title": "Space Id"
          },
          "column_mappings": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Column Mappings"
          },
          "validation_rules": {
            "additionalProperties": true,
            "type": "object",
            "title": "Validation Rules"
          },
          "transform_rules": {
            "additionalProperties": true,
            "type": "object",
            "title": "Transform Rules"
          },
          "provider_type": {
            "type": "string",
            "title": "Provider Type"
          },
          "changed_by": {
            "type": "string",
            "format": "uuid",
            "title": "Changed By"
          },
          "change_type": {
            "type": "string",
            "title": "Change Type"
          },
          "change_summary": {
            "type": "string",
            "title": "Change Summary"
          },
          "changes_made": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Changes Made"
          },
          "is_current": {
            "type": "boolean",
            "title": "Is Current"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "version_metadata": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Version Metadata"
          }
        },
        "type": "object",
        "required": [
          "id",
          "schema_id",
          "version_number",
          "tenant_id",
          "space_id",
          "column_mappings",
          "validation_rules",
          "transform_rules",
          "provider_type",
          "changed_by",
          "change_type",
          "change_summary",
          "is_current",
          "created_at"
        ],
        "title": "SchemaVersionResponse",
        "description": "Response model for a schema version."
      },
      "SearchResponse-Input": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/SearchResult-Input"
            },
            "type": "array",
            "title": "Results"
          },
          "total_results": {
            "type": "integer",
            "title": "Total Results"
          },
          "query": {
            "type": "string",
            "title": "Query"
          }
        },
        "type": "object",
        "required": [
          "results",
          "total_results",
          "query"
        ],
        "title": "SearchResponse",
        "description": "Response for schema search."
      },
      "SearchResponse-Output": {
        "properties": {
          "results": {
            "items": {
              "$ref": "#/components/schemas/SearchResult-Output"
            },
            "type": "array",
            "title": "Results"
          },
          "total_results": {
            "type": "integer",
            "title": "Total Results"
          },
          "query": {
            "type": "string",
            "title": "Query"
          }
        },
        "type": "object",
        "required": [
          "results",
          "total_results",
          "query"
        ],
        "title": "SearchResponse",
        "description": "Response for schema search."
      },
      "SearchResult-Input": {
        "properties": {
          "schema_data": {
            "$ref": "#/components/schemas/SchemaResponse-Input"
          },
          "relevance_score": {
            "type": "number",
            "maximum": 5.0,
            "minimum": 0.0,
            "title": "Relevance Score",
            "description": "Relevance score (0-5, higher is better)"
          },
          "matched_fields": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Matched Fields",
            "description": "Fields that matched the search query"
          }
        },
        "type": "object",
        "required": [
          "schema_data",
          "relevance_score",
          "matched_fields"
        ],
        "title": "SearchResult",
        "description": "A single search result."
      },
      "SearchResult-Output": {
        "properties": {
          "schema_data": {
            "$ref": "#/components/schemas/SchemaResponse-Output"
          },
          "relevance_score": {
            "type": "number",
            "maximum": 5.0,
            "minimum": 0.0,
            "title": "Relevance Score",
            "description": "Relevance score (0-5, higher is better)"
          },
          "matched_fields": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Matched Fields",
            "description": "Fields that matched the search query"
          }
        },
        "type": "object",
        "required": [
          "schema_data",
          "relevance_score",
          "matched_fields"
        ],
        "title": "SearchResult",
        "description": "A single search result."
      },
      "SourceType": {
        "type": "string",
        "enum": [
          "customer",
          "provider"
        ],
        "title": "SourceType",
        "description": "Transaction source type."
      },
      "SpaceCreate": {
        "properties": {
          "space_name": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Space Name",
            "description": "Display name of the space"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 1000
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Optional description of the space"
          },
          "settings": {
            "additionalProperties": true,
            "type": "object",
            "title": "Settings",
            "description": "Space-specific configuration (JSON)"
          },
          "space_slug": {
            "type": "string",
            "maxLength": 100,
            "minLength": 3,
            "title": "Space Slug",
            "description": "URL-safe slug (lowercase, alphanumeric, hyphens, no double hyphens)"
          }
        },
        "type": "object",
        "required": [
          "space_name",
          "space_slug"
        ],
        "title": "SpaceCreate",
        "description": "Request model for creating a new space.",
        "example": {
          "description": "Workspace for consumer lending operations",
          "settings": {
            "enable_notifications": true,
            "retention_days": 90
          },
          "space_name": "Consumer Lending",
          "space_slug": "consumer-lending"
        }
      },
      "SpaceListResponse": {
        "properties": {
          "spaces": {
            "items": {
              "$ref": "#/components/schemas/SpaceResponse"
            },
            "type": "array",
            "title": "Spaces"
          },
          "total": {
            "type": "integer",
            "title": "Total",
            "description": "Total number of spaces"
          },
          "page": {
            "type": "integer",
            "title": "Page",
            "description": "Current page number"
          },
          "page_size": {
            "type": "integer",
            "title": "Page Size",
            "description": "Items per page"
          },
          "total_pages": {
            "type": "integer",
            "title": "Total Pages",
            "description": "Total number of pages"
          }
        },
        "type": "object",
        "required": [
          "spaces",
          "total",
          "page",
          "page_size",
          "total_pages"
        ],
        "title": "SpaceListResponse",
        "description": "Response model for paginated space list.",
        "example": {
          "page": 1,
          "page_size": 20,
          "spaces": [
            {
              "created_at": "2025-01-12T10:00:00Z",
              "created_by": "abc12345-e89b-12d3-a456-426614174000",
              "description": "Consumer lending operations",
              "is_active": true,
              "settings": {},
              "space_id": "123e4567-e89b-12d3-a456-426614174000",
              "space_name": "Consumer Lending",
              "space_slug": "consumer-lending",
              "tenant_id": "987f6543-e89b-12d3-a456-426614174000",
              "updated_at": "2025-01-12T10:00:00Z"
            }
          ],
          "total": 1,
          "total_pages": 1
        }
      },
      "SpaceResponse": {
        "properties": {
          "space_id": {
            "type": "string",
            "format": "uuid",
            "title": "Space Id"
          },
          "tenant_id": {
            "type": "string",
            "format": "uuid",
            "title": "Tenant Id"
          },
          "space_name": {
            "type": "string",
            "title": "Space Name"
          },
          "space_slug": {
            "type": "string",
            "title": "Space Slug"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active"
          },
          "settings": {
            "additionalProperties": true,
            "type": "object",
            "title": "Settings"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At"
          },
          "created_by": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By"
          },
          "deleted_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Deleted At"
          }
        },
        "type": "object",
        "required": [
          "space_id",
          "tenant_id",
          "space_name",
          "space_slug",
          "description",
          "is_active",
          "settings",
          "created_at",
          "updated_at",
          "created_by",
          "deleted_at"
        ],
        "title": "SpaceResponse",
        "description": "Response model for space details."
      },
      "SpaceUpdate": {
        "properties": {
          "space_name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Space Name",
            "description": "Updated display name"
          },
          "description": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 1000
              },
              {
                "type": "null"
              }
            ],
            "title": "Description",
            "description": "Updated description"
          },
          "is_active": {
            "anyOf": [
              {
                "type": "boolean"
              },
              {
                "type": "null"
              }
            ],
            "title": "Is Active",
            "description": "Active status (false = soft delete)"
          },
          "settings": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Settings",
            "description": "Updated settings"
          }
        },
        "type": "object",
        "title": "SpaceUpdate",
        "description": "Request model for updating an existing space.",
        "example": {
          "description": "Updated description",
          "is_active": true,
          "settings": {
            "enable_notifications": false
          },
          "space_name": "Consumer Lending Platform"
        }
      },
      "StandardField": {
        "properties": {
          "field_name": {
            "type": "string",
            "title": "Field Name",
            "description": "Standard field name"
          },
          "required": {
            "type": "boolean",
            "title": "Required",
            "description": "Whether this field is required"
          },
          "description": {
            "type": "string",
            "title": "Description",
            "description": "Field description"
          },
          "data_type": {
            "type": "string",
            "title": "Data Type",
            "description": "Expected data type"
          },
          "example": {
            "type": "string",
            "title": "Example",
            "description": "Example value"
          }
        },
        "type": "object",
        "required": [
          "field_name",
          "required",
          "description",
          "data_type",
          "example"
        ],
        "title": "StandardField",
        "description": "Standard Kosha field definition."
      },
      "StandardFieldsResponse": {
        "properties": {
          "fields": {
            "items": {
              "$ref": "#/components/schemas/StandardField"
            },
            "type": "array",
            "title": "Fields"
          }
        },
        "type": "object",
        "required": [
          "fields"
        ],
        "title": "StandardFieldsResponse",
        "description": "Response listing all standard Kosha fields."
      },
      "SubdomainCheckResponse": {
        "properties": {
          "subdomain": {
            "type": "string",
            "title": "Subdomain",
            "description": "The subdomain that was checked"
          },
          "available": {
            "type": "boolean",
            "title": "Available",
            "description": "Whether the subdomain is available"
          },
          "reason": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reason",
            "description": "Reason why subdomain is not available (if applicable)"
          }
        },
        "type": "object",
        "required": [
          "subdomain",
          "available"
        ],
        "title": "SubdomainCheckResponse",
        "description": "Response model for subdomain availability check.",
        "example": {
          "available": false,
          "reason": "Subdomain is already taken",
          "subdomain": "acme"
        }
      },
      "SubdomainSuggestResponse": {
        "properties": {
          "original": {
            "type": "string",
            "title": "Original",
            "description": "The original subdomain requested"
          },
          "available": {
            "type": "boolean",
            "title": "Available",
            "description": "Whether the original subdomain is available"
          },
          "suggestions": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Suggestions",
            "description": "List of available subdomain suggestions"
          }
        },
        "type": "object",
        "required": [
          "original",
          "available",
          "suggestions"
        ],
        "title": "SubdomainSuggestResponse",
        "description": "Response model for subdomain suggestions.",
        "example": {
          "available": false,
          "original": "acme",
          "suggestions": [
            "acme-corp",
            "acme-io",
            "acme-app",
            "acme-hq",
            "acme2"
          ]
        }
      },
      "SuggestedSchema": {
        "properties": {
          "schema_id": {
            "type": "string",
            "title": "Schema Id",
            "description": "Schema UUID"
          },
          "provider_type": {
            "type": "string",
            "title": "Provider Type",
            "description": "Provider type (e.g., 'stripe_transactions')"
          },
          "confidence": {
            "type": "number",
            "maximum": 1.0,
            "minimum": 0.0,
            "title": "Confidence",
            "description": "Match confidence (0.0 to 1.0)"
          },
          "matched_columns": {
            "additionalProperties": {
              "type": "string"
            },
            "type": "object",
            "title": "Matched Columns",
            "description": "Matched CSV columns to canonical fields"
          },
          "unmatched_columns": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Unmatched Columns",
            "description": "CSV columns with no match"
          }
        },
        "type": "object",
        "required": [
          "schema_id",
          "provider_type",
          "confidence",
          "matched_columns",
          "unmatched_columns"
        ],
        "title": "SuggestedSchema",
        "description": "Schema suggestion with confidence score."
      },
      "TemplateListResponse": {
        "properties": {
          "templates": {
            "items": {
              "$ref": "#/components/schemas/SchemaTemplateResponse"
            },
            "type": "array",
            "title": "Templates"
          },
          "total": {
            "type": "integer",
            "title": "Total"
          }
        },
        "type": "object",
        "required": [
          "templates",
          "total"
        ],
        "title": "TemplateListResponse",
        "description": "Response for list of available templates."
      },
      "TenantCreate": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Name",
            "description": "Company/organization name",
            "examples": [
              "Acme Fintech Inc.",
              "Global Trading Corp"
            ]
          },
          "subdomain": {
            "type": "string",
            "maxLength": 63,
            "minLength": 3,
            "title": "Subdomain",
            "description": "URL-safe subdomain (lowercase, alphanumeric + hyphens)",
            "examples": [
              "acme",
              "global-trading"
            ]
          },
          "primary_contact_email": {
            "type": "string",
            "format": "email",
            "title": "Primary Contact Email",
            "description": "Primary contact email for tenant admin",
            "examples": [
              "admin@acme.com"
            ]
          },
          "billing_email": {
            "anyOf": [
              {
                "type": "string",
                "format": "email"
              },
              {
                "type": "null"
              }
            ],
            "title": "Billing Email",
            "description": "Billing/invoicing email (optional)",
            "examples": [
              "billing@acme.com"
            ]
          },
          "settings": {
            "additionalProperties": true,
            "type": "object",
            "title": "Settings",
            "description": "Tenant-specific settings (timezone, features, etc.)",
            "examples": [
              {
                "currency": "USD",
                "date_format": "MM/DD/YYYY",
                "features": {
                  "auto_reconciliation": false,
                  "llm_mapping": true
                },
                "timezone": "America/New_York"
              }
            ]
          }
        },
        "type": "object",
        "required": [
          "name",
          "subdomain",
          "primary_contact_email"
        ],
        "title": "TenantCreate",
        "description": "Request model for creating a new tenant.\n\nAll fields from TenantBase are required except billing_email and settings.\nStatus defaults to TRIAL on the backend."
      },
      "TenantFlagSummary": {
        "properties": {
          "tenant_id": {
            "type": "string",
            "format": "uuid",
            "title": "Tenant Id",
            "description": "Tenant identifier"
          },
          "tenant_name": {
            "type": "string",
            "title": "Tenant Name",
            "description": "Tenant name"
          },
          "enabled_flags": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Enabled Flags",
            "description": "List of enabled flag keys for this tenant",
            "examples": [
              [
                "schema_detection_enabled",
                "fuzzy_matching_enabled"
              ]
            ]
          },
          "disabled_flags": {
            "items": {
              "type": "string"
            },
            "type": "array",
            "title": "Disabled Flags",
            "description": "List of disabled flag keys for this tenant",
            "examples": [
              [
                "auto_approval_enabled"
              ]
            ]
          },
          "override_count": {
            "type": "integer",
            "title": "Override Count",
            "description": "Number of tenant-specific overrides"
          }
        },
        "type": "object",
        "required": [
          "tenant_id",
          "tenant_name",
          "enabled_flags",
          "disabled_flags",
          "override_count"
        ],
        "title": "TenantFlagSummary",
        "description": "Summary of feature flags for a specific tenant (admin reporting)."
      },
      "TenantListResponse": {
        "properties": {
          "tenants": {
            "items": {
              "$ref": "#/components/schemas/TenantResponse"
            },
            "type": "array",
            "title": "Tenants",
            "description": "List of tenants"
          },
          "total": {
            "type": "integer",
            "minimum": 0.0,
            "title": "Total",
            "description": "Total number of tenants (before pagination)"
          },
          "page": {
            "type": "integer",
            "minimum": 1.0,
            "title": "Page",
            "description": "Current page number"
          },
          "page_size": {
            "type": "integer",
            "maximum": 100.0,
            "minimum": 1.0,
            "title": "Page Size",
            "description": "Number of items per page"
          },
          "has_more": {
            "type": "boolean",
            "title": "Has More",
            "description": "Whether there are more pages"
          }
        },
        "type": "object",
        "required": [
          "tenants",
          "total",
          "page",
          "page_size",
          "has_more"
        ],
        "title": "TenantListResponse",
        "description": "Response model for paginated tenant list.\n\nUsed by list/search endpoints."
      },
      "TenantResponse": {
        "properties": {
          "name": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Name",
            "description": "Company/organization name",
            "examples": [
              "Acme Fintech Inc.",
              "Global Trading Corp"
            ]
          },
          "subdomain": {
            "type": "string",
            "maxLength": 63,
            "minLength": 3,
            "title": "Subdomain",
            "description": "URL-safe subdomain (lowercase, alphanumeric + hyphens)",
            "examples": [
              "acme",
              "global-trading"
            ]
          },
          "primary_contact_email": {
            "type": "string",
            "format": "email",
            "title": "Primary Contact Email",
            "description": "Primary contact email for tenant admin",
            "examples": [
              "admin@acme.com"
            ]
          },
          "billing_email": {
            "anyOf": [
              {
                "type": "string",
                "format": "email"
              },
              {
                "type": "null"
              }
            ],
            "title": "Billing Email",
            "description": "Billing/invoicing email (optional)",
            "examples": [
              "billing@acme.com"
            ]
          },
          "settings": {
            "additionalProperties": true,
            "type": "object",
            "title": "Settings",
            "description": "Tenant-specific settings (timezone, features, etc.)",
            "examples": [
              {
                "currency": "USD",
                "date_format": "MM/DD/YYYY",
                "features": {
                  "auto_reconciliation": false,
                  "llm_mapping": true
                },
                "timezone": "America/New_York"
              }
            ]
          },
          "tenant_id": {
            "type": "string",
            "title": "Tenant Id",
            "description": "Unique tenant identifier (UUID)"
          },
          "status": {
            "$ref": "#/components/schemas/TenantStatus",
            "description": "Current tenant status"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At",
            "description": "Creation timestamp"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "title": "Updated At",
            "description": "Last update timestamp"
          },
          "created_by": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Created By",
            "description": "User ID or 'system' who created this tenant"
          },
          "deleted_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Deleted At",
            "description": "Soft delete timestamp (null if active)"
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "description": "Whether tenant is active (not deleted/suspended)"
          }
        },
        "type": "object",
        "required": [
          "name",
          "subdomain",
          "primary_contact_email",
          "tenant_id",
          "status",
          "created_at",
          "updated_at",
          "is_active"
        ],
        "title": "TenantResponse",
        "description": "Response model for tenant data.\n\nIncludes all base fields plus auto-generated fields:\n- tenant_id\n- status\n- timestamps\n- computed fields (is_active)"
      },
      "TenantStatus": {
        "type": "string",
        "enum": [
          "TRIAL",
          "ACTIVE",
          "SUSPENDED",
          "DELETED"
        ],
        "title": "TenantStatus",
        "description": "Tenant status enumeration."
      },
      "TenantStatusUpdate": {
        "properties": {
          "status": {
            "$ref": "#/components/schemas/TenantStatus",
            "description": "New tenant status"
          }
        },
        "type": "object",
        "required": [
          "status"
        ],
        "title": "TenantStatusUpdate",
        "description": "Request model for updating tenant status.\n\nSeparated from TenantUpdate because status changes are sensitive\nand may require additional validation/authorization."
      },
      "TenantUpdate": {
        "properties": {
          "name": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 255,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Name",
            "description": "Company/organization name"
          },
          "subdomain": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 63,
                "minLength": 3
              },
              {
                "type": "null"
              }
            ],
            "title": "Subdomain",
            "description": "URL-safe subdomain (use with caution - affects URLs)"
          },
          "primary_contact_email": {
            "anyOf": [
              {
                "type": "string",
                "format": "email"
              },
              {
                "type": "null"
              }
            ],
            "title": "Primary Contact Email",
            "description": "Primary contact email"
          },
          "billing_email": {
            "anyOf": [
              {
                "type": "string",
                "format": "email"
              },
              {
                "type": "null"
              }
            ],
            "title": "Billing Email",
            "description": "Billing/invoicing email"
          },
          "settings": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Settings",
            "description": "Tenant-specific settings (merges with existing)"
          }
        },
        "type": "object",
        "title": "TenantUpdate",
        "description": "Request model for updating an existing tenant.\n\nAll fields are optional to support partial updates.\nSubdomain changes should be rare and carefully validated."
      },
      "TestSchemaRequest": {
        "properties": {
          "sample_data": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "type": "array",
            "title": "Sample Data",
            "description": "Sample data rows to process"
          },
          "apply_transforms": {
            "type": "boolean",
            "title": "Apply Transforms",
            "description": "Whether to apply transform rules",
            "default": true
          }
        },
        "type": "object",
        "required": [
          "sample_data"
        ],
        "title": "TestSchemaRequest",
        "description": "Request to test a schema with sample data."
      },
      "TestSchemaResponse-Input": {
        "properties": {
          "schema_id": {
            "type": "string",
            "format": "uuid",
            "title": "Schema Id"
          },
          "total_rows": {
            "type": "integer",
            "title": "Total Rows"
          },
          "successful_rows": {
            "type": "integer",
            "title": "Successful Rows"
          },
          "failed_rows": {
            "type": "integer",
            "title": "Failed Rows"
          },
          "results": {
            "items": {
              "$ref": "#/components/schemas/TestSchemaResult"
            },
            "type": "array",
            "title": "Results"
          },
          "summary": {
            "type": "string",
            "title": "Summary"
          }
        },
        "type": "object",
        "required": [
          "schema_id",
          "total_rows",
          "successful_rows",
          "failed_rows",
          "results",
          "summary"
        ],
        "title": "TestSchemaResponse",
        "description": "Response for schema test operation."
      },
      "TestSchemaResponse-Output": {
        "properties": {
          "schema_id": {
            "type": "string",
            "format": "uuid",
            "title": "Schema Id"
          },
          "total_rows": {
            "type": "integer",
            "title": "Total Rows"
          },
          "successful_rows": {
            "type": "integer",
            "title": "Successful Rows"
          },
          "failed_rows": {
            "type": "integer",
            "title": "Failed Rows"
          },
          "results": {
            "items": {
              "$ref": "#/components/schemas/TestSchemaResult"
            },
            "type": "array",
            "title": "Results"
          },
          "summary": {
            "type": "string",
            "title": "Summary"
          }
        },
        "type": "object",
        "required": [
          "schema_id",
          "total_rows",
          "successful_rows",
          "failed_rows",
          "results",
          "summary"
        ],
        "title": "TestSchemaResponse",
        "description": "Response for schema test operation."
      },
      "TestSchemaResult": {
        "properties": {
          "row_number": {
            "type": "integer",
            "title": "Row Number"
          },
          "input_data": {
            "additionalProperties": true,
            "type": "object",
            "title": "Input Data"
          },
          "mapped_data": {
            "additionalProperties": true,
            "type": "object",
            "title": "Mapped Data"
          },
          "transformed_data": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Transformed Data"
          },
          "validation_passed": {
            "type": "boolean",
            "title": "Validation Passed"
          },
          "validation_issues": {
            "items": {
              "$ref": "#/components/schemas/ValidationIssue"
            },
            "type": "array",
            "title": "Validation Issues"
          }
        },
        "type": "object",
        "required": [
          "row_number",
          "input_data",
          "mapped_data",
          "validation_passed"
        ],
        "title": "TestSchemaResult",
        "description": "Result for a single row of test data."
      },
      "TokenRefresh": {
        "properties": {
          "refresh_token": {
            "type": "string",
            "title": "Refresh Token",
            "description": "Valid refresh token",
            "examples": [
              "eyJhbGciOiJIUzI1NiIs..."
            ]
          }
        },
        "type": "object",
        "required": [
          "refresh_token"
        ],
        "title": "TokenRefresh",
        "description": "Token refresh request model.\n\nUsed to exchange refresh token for new access token.\n\nExample:\n    ```json\n    {\n        \"refresh_token\": \"eyJhbGciOiJIUzI1NiIs...\"\n    }\n    ```"
      },
      "TokenResponse": {
        "properties": {
          "access_token": {
            "type": "string",
            "title": "Access Token",
            "description": "JWT access token (15min expiry)",
            "examples": [
              "eyJhbGciOiJIUzI1NiIs..."
            ]
          },
          "refresh_token": {
            "type": "string",
            "title": "Refresh Token",
            "description": "JWT refresh token (7 day expiry)",
            "examples": [
              "eyJhbGciOiJIUzI1NiIs..."
            ]
          },
          "token_type": {
            "type": "string",
            "title": "Token Type",
            "description": "Token type (always 'bearer')",
            "default": "bearer",
            "examples": [
              "bearer"
            ]
          },
          "expires_in": {
            "type": "integer",
            "title": "Expires In",
            "description": "Access token expiry in seconds (900 = 15min)",
            "examples": [
              900
            ]
          },
          "user": {
            "$ref": "#/components/schemas/UserInfo",
            "description": "User information"
          }
        },
        "type": "object",
        "required": [
          "access_token",
          "refresh_token",
          "expires_in",
          "user"
        ],
        "title": "TokenResponse",
        "description": "JWT token response model.\n\nReturned on successful login/registration/token refresh.\nContains both access and refresh tokens plus user info.\n\nExample:\n    ```json\n    {\n        \"access_token\": \"eyJhbGciOiJIUzI1NiIs...\",\n        \"refresh_token\": \"eyJhbGciOiJIUzI1NiIs...\",\n        \"token_type\": \"bearer\",\n        \"expires_in\": 900,\n        \"user\": {\n            \"user_id\": \"123e4567-e89b-12d3-a456-426614174000\",\n            \"tenant_id\": \"987fbc97-4bed-5078-9f07-9141ba07c9f3\",\n            \"tenant_subdomain\": \"acme\",\n            \"email\": \"john@acme.com\",\n            \"full_name\": \"John Doe\",\n            \"is_super_admin\": false\n        }\n    }\n    ```"
      },
      "TransactionInput": {
        "properties": {
          "client_id": {
            "type": "string",
            "title": "Client Id",
            "description": "Unique identifier for the client/tenant"
          },
          "sequence_id": {
            "type": "integer",
            "title": "Sequence Id",
            "description": "System sequence ID for audit trail"
          },
          "event_timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Event Timestamp",
            "description": "When this event was received by the system (UTC)"
          },
          "transaction_id": {
            "type": "string",
            "title": "Transaction Id",
            "description": "Unique ID for the transaction, used for logging and tracking."
          },
          "ledger_a_amount": {
            "type": "number",
            "title": "Ledger A Amount",
            "description": "Transaction amount in ledger A."
          },
          "ledger_a_fx": {
            "type": "number",
            "title": "Ledger A Fx",
            "description": "FX rate used in ledger A."
          },
          "ledger_a_fee": {
            "type": "number",
            "title": "Ledger A Fee",
            "description": "Fee amount in ledger A."
          },
          "ledger_b_amount": {
            "type": "number",
            "title": "Ledger B Amount",
            "description": "Transaction amount in ledger B."
          },
          "ledger_b_fx": {
            "type": "number",
            "title": "Ledger B Fx",
            "description": "FX rate used in ledger B."
          },
          "ledger_b_fee": {
            "type": "number",
            "title": "Ledger B Fee",
            "description": "Fee amount in ledger B."
          },
          "currency": {
            "type": "string",
            "title": "Currency",
            "description": "The three-letter ISO currency code (e.g., USD, EUR)."
          },
          "vendor_name": {
            "type": "string",
            "title": "Vendor Name",
            "description": "Name of the vendor/counterparty for fuzzy matching."
          },
          "execution_timestamp": {
            "type": "string",
            "title": "Execution Timestamp",
            "description": "ISO 8601 timestamp of when the transaction occurred."
          },
          "counterparty_name": {
            "type": "string",
            "title": "Counterparty Name",
            "description": "The name of the counterparty or vendor."
          },
          "source_system_id": {
            "type": "string",
            "title": "Source System Id",
            "description": "Identifier for the source system (e.g., Oracle, SAP)."
          },
          "context_data": {
            "additionalProperties": true,
            "type": "object",
            "title": "Context Data",
            "description": "Dictionary for any extra raw transaction data."
          }
        },
        "additionalProperties": false,
        "type": "object",
        "required": [
          "client_id",
          "sequence_id",
          "transaction_id",
          "ledger_a_amount",
          "ledger_a_fx",
          "ledger_a_fee",
          "ledger_b_amount",
          "ledger_b_fx",
          "ledger_b_fee",
          "currency",
          "vendor_name",
          "execution_timestamp",
          "counterparty_name",
          "source_system_id",
          "context_data"
        ],
        "title": "TransactionInput",
        "description": "Input model for the primary PAID reconciliation endpoint.\nThis structure represents the raw transaction payload sent to the API."
      },
      "TransactionListResponse-Input": {
        "properties": {
          "transactions": {
            "items": {
              "$ref": "#/components/schemas/TransactionResponse-Input"
            },
            "type": "array",
            "title": "Transactions"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count"
          },
          "page": {
            "type": "integer",
            "title": "Page",
            "default": 1
          },
          "page_size": {
            "type": "integer",
            "title": "Page Size",
            "default": 50
          }
        },
        "type": "object",
        "required": [
          "transactions",
          "total_count"
        ],
        "title": "TransactionListResponse",
        "description": "Paginated transaction list."
      },
      "TransactionListResponse-Output": {
        "properties": {
          "transactions": {
            "items": {
              "$ref": "#/components/schemas/TransactionResponse-Output"
            },
            "type": "array",
            "title": "Transactions"
          },
          "total_count": {
            "type": "integer",
            "title": "Total Count"
          },
          "page": {
            "type": "integer",
            "title": "Page",
            "default": 1
          },
          "page_size": {
            "type": "integer",
            "title": "Page Size",
            "default": 50
          }
        },
        "type": "object",
        "required": [
          "transactions",
          "total_count"
        ],
        "title": "TransactionListResponse",
        "description": "Paginated transaction list."
      },
      "TransactionResponse-Input": {
        "properties": {
          "source_type": {
            "$ref": "#/components/schemas/SourceType"
          },
          "transaction_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Transaction Id"
          },
          "amount": {
            "anyOf": [
              {
                "type": "number",
                "minimum": 0.0
              },
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              }
            ],
            "title": "Amount"
          },
          "currency": {
            "type": "string",
            "maxLength": 3,
            "minLength": 3,
            "title": "Currency"
          },
          "transaction_date": {
            "type": "string",
            "format": "date",
            "title": "Transaction Date"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "customer_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Customer Id"
          },
          "customer_email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Customer Email"
          },
          "reference": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reference"
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status"
          },
          "type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Type"
          },
          "fee": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fee"
          },
          "net": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Net"
          },
          "extra_data": {
            "additionalProperties": true,
            "type": "object",
            "title": "Extra Data"
          },
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "tenant_id": {
            "type": "string",
            "format": "uuid",
            "title": "Tenant Id"
          },
          "space_id": {
            "type": "string",
            "format": "uuid",
            "title": "Space Id"
          },
          "file_id": {
            "type": "string",
            "format": "uuid",
            "title": "File Id"
          },
          "schema_id": {
            "type": "string",
            "format": "uuid",
            "title": "Schema Id"
          },
          "row_number": {
            "type": "integer",
            "title": "Row Number"
          },
          "is_matched": {
            "type": "boolean",
            "title": "Is Matched"
          },
          "match_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Match Id"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "source_type",
          "amount",
          "currency",
          "transaction_date",
          "id",
          "tenant_id",
          "space_id",
          "file_id",
          "schema_id",
          "row_number",
          "is_matched",
          "created_at"
        ],
        "title": "TransactionResponse",
        "description": "Transaction API response."
      },
      "TransactionResponse-Output": {
        "properties": {
          "source_type": {
            "$ref": "#/components/schemas/SourceType"
          },
          "transaction_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Transaction Id"
          },
          "amount": {
            "type": "string",
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Amount"
          },
          "currency": {
            "type": "string",
            "maxLength": 3,
            "minLength": 3,
            "title": "Currency"
          },
          "transaction_date": {
            "type": "string",
            "format": "date",
            "title": "Transaction Date"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "customer_id": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Customer Id"
          },
          "customer_email": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Customer Email"
          },
          "reference": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Reference"
          },
          "status": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Status"
          },
          "type": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Type"
          },
          "fee": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Fee"
          },
          "net": {
            "anyOf": [
              {
                "type": "string",
                "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$"
              },
              {
                "type": "null"
              }
            ],
            "title": "Net"
          },
          "extra_data": {
            "additionalProperties": true,
            "type": "object",
            "title": "Extra Data"
          },
          "id": {
            "type": "string",
            "format": "uuid",
            "title": "Id"
          },
          "tenant_id": {
            "type": "string",
            "format": "uuid",
            "title": "Tenant Id"
          },
          "space_id": {
            "type": "string",
            "format": "uuid",
            "title": "Space Id"
          },
          "file_id": {
            "type": "string",
            "format": "uuid",
            "title": "File Id"
          },
          "schema_id": {
            "type": "string",
            "format": "uuid",
            "title": "Schema Id"
          },
          "row_number": {
            "type": "integer",
            "title": "Row Number"
          },
          "is_matched": {
            "type": "boolean",
            "title": "Is Matched"
          },
          "match_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "Match Id"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "title": "Created At"
          }
        },
        "type": "object",
        "required": [
          "source_type",
          "amount",
          "currency",
          "transaction_date",
          "id",
          "tenant_id",
          "space_id",
          "file_id",
          "schema_id",
          "row_number",
          "is_matched",
          "created_at"
        ],
        "title": "TransactionResponse",
        "description": "Transaction API response."
      },
      "UploadStatus": {
        "type": "string",
        "enum": [
          "UPLOADING",
          "READY",
          "FAILED"
        ],
        "title": "UploadStatus",
        "description": "File upload status."
      },
      "UsageHistoryEntry": {
        "properties": {
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "title": "Timestamp"
          },
          "usage_count": {
            "type": "integer",
            "title": "Usage Count"
          },
          "processing_time_ms": {
            "anyOf": [
              {
                "type": "number"
              },
              {
                "type": "null"
              }
            ],
            "title": "Processing Time Ms"
          }
        },
        "type": "object",
        "required": [
          "timestamp",
          "usage_count"
        ],
        "title": "UsageHistoryEntry",
        "description": "A single usage history entry."
      },
      "UsageHistoryResponse": {
        "properties": {
          "schema_id": {
            "type": "string",
            "format": "uuid",
            "title": "Schema Id"
          },
          "total_usage": {
            "type": "integer",
            "title": "Total Usage"
          },
          "history": {
            "items": {
              "$ref": "#/components/schemas/UsageHistoryEntry"
            },
            "type": "array",
            "title": "History"
          },
          "period_start": {
            "type": "string",
            "format": "date-time",
            "title": "Period Start"
          },
          "period_end": {
            "type": "string",
            "format": "date-time",
            "title": "Period End"
          }
        },
        "type": "object",
        "required": [
          "schema_id",
          "total_usage",
          "history",
          "period_start",
          "period_end"
        ],
        "title": "UsageHistoryResponse",
        "description": "Response for schema usage history."
      },
      "UserInfo": {
        "properties": {
          "user_id": {
            "type": "string",
            "format": "uuid",
            "title": "User Id",
            "description": "User's unique ID",
            "examples": [
              "123e4567-e89b-12d3-a456-426614174000"
            ]
          },
          "tenant_id": {
            "type": "string",
            "format": "uuid",
            "title": "Tenant Id",
            "description": "Tenant ID user belongs to",
            "examples": [
              "987fbc97-4bed-5078-9f07-9141ba07c9f3"
            ]
          },
          "tenant_subdomain": {
            "type": "string",
            "title": "Tenant Subdomain",
            "description": "Tenant's subdomain",
            "examples": [
              "acme"
            ]
          },
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email",
            "description": "User's email address",
            "examples": [
              "john@acme.com"
            ]
          },
          "full_name": {
            "type": "string",
            "title": "Full Name",
            "description": "User's full name",
            "examples": [
              "John Doe"
            ]
          },
          "is_super_admin": {
            "type": "boolean",
            "title": "Is Super Admin",
            "description": "Whether user has super-admin privileges",
            "examples": [
              false
            ]
          },
          "is_active": {
            "type": "boolean",
            "title": "Is Active",
            "description": "Whether user account is active",
            "examples": [
              true
            ]
          },
          "last_login_at": {
            "anyOf": [
              {
                "type": "string",
                "format": "date-time"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Login At",
            "description": "Last login timestamp (UTC)",
            "examples": [
              "2025-10-09T12:00:00Z"
            ]
          }
        },
        "type": "object",
        "required": [
          "user_id",
          "tenant_id",
          "tenant_subdomain",
          "email",
          "full_name",
          "is_super_admin",
          "is_active"
        ],
        "title": "UserInfo",
        "description": "User information model (for responses).\n\nContains safe user information (no password hash).\nReturned in token response and /me endpoint.\n\nExample:\n    ```json\n    {\n        \"user_id\": \"123e4567-e89b-12d3-a456-426614174000\",\n        \"tenant_id\": \"987fbc97-4bed-5078-9f07-9141ba07c9f3\",\n        \"tenant_subdomain\": \"acme\",\n        \"email\": \"john@acme.com\",\n        \"full_name\": \"John Doe\",\n        \"is_super_admin\": false,\n        \"is_active\": true,\n        \"last_login_at\": \"2025-10-09T12:00:00Z\"\n    }\n    ```"
      },
      "UserLogin": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email",
            "description": "User's email address",
            "examples": [
              "john@acme.com"
            ]
          },
          "password": {
            "type": "string",
            "title": "Password",
            "description": "User's password",
            "examples": [
              "SecureP@ss123!"
            ]
          },
          "tenant_subdomain": {
            "anyOf": [
              {
                "type": "string",
                "maxLength": 63,
                "minLength": 1
              },
              {
                "type": "null"
              }
            ],
            "title": "Tenant Subdomain",
            "description": "Optional tenant subdomain to disambiguate email",
            "examples": [
              "acme"
            ]
          }
        },
        "type": "object",
        "required": [
          "email",
          "password"
        ],
        "title": "UserLogin",
        "description": "User login request model.\n\nUsers log in with email + password. Optionally can specify tenant subdomain\nfor better UX (to disambiguate if same email exists across tenants).\n\nExample:\n    ```json\n    {\n        \"email\": \"john@acme.com\",\n        \"password\": \"SecureP@ss123!\",\n        \"tenant_subdomain\": \"acme\"\n    }\n    ```"
      },
      "UserRegistration": {
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "title": "Email",
            "description": "User's email address (unique per tenant)",
            "examples": [
              "john@acme.com"
            ]
          },
          "password": {
            "type": "string",
            "maxLength": 128,
            "minLength": 8,
            "title": "Password",
            "description": "Password (8-128 chars, must include uppercase, lowercase, digit, special char)",
            "examples": [
              "SecureP@ss123!"
            ]
          },
          "full_name": {
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "title": "Full Name",
            "description": "User's full name",
            "examples": [
              "John Doe"
            ]
          },
          "tenant_id": {
            "type": "string",
            "format": "uuid",
            "title": "Tenant Id",
            "description": "Tenant ID this user belongs to (immutable after creation)",
            "examples": [
              "123e4567-e89b-12d3-a456-426614174000"
            ]
          }
        },
        "type": "object",
        "required": [
          "email",
          "password",
          "full_name",
          "tenant_id"
        ],
        "title": "UserRegistration",
        "description": "User registration request model.\n\nUsers are registered BY tenants (invitation-only in future).\nFor MVP, we allow direct registration with tenant_id.\n\nExample:\n    ```json\n    {\n        \"email\": \"john@acme.com\",\n        \"password\": \"SecureP@ss123!\",\n        \"full_name\": \"John Doe\",\n        \"tenant_id\": \"123e4567-e89b-12d3-a456-426614174000\"\n    }\n    ```"
      },
      "ValidationError": {
        "properties": {
          "loc": {
            "items": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "integer"
                }
              ]
            },
            "type": "array",
            "title": "Location"
          },
          "msg": {
            "type": "string",
            "title": "Message"
          },
          "type": {
            "type": "string",
            "title": "Error Type"
          }
        },
        "type": "object",
        "required": [
          "loc",
          "msg",
          "type"
        ],
        "title": "ValidationError"
      },
      "ValidationIssue": {
        "properties": {
          "severity": {
            "type": "string",
            "title": "Severity",
            "description": "Severity: error, warning, info"
          },
          "field": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Field",
            "description": "Field the issue relates to"
          },
          "message": {
            "type": "string",
            "title": "Message",
            "description": "Human-readable issue description"
          },
          "row_number": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Row Number",
            "description": "Row number (if applicable)"
          },
          "value": {
            "anyOf": [
              {},
              {
                "type": "null"
              }
            ],
            "title": "Value",
            "description": "The value that caused the issue"
          }
        },
        "type": "object",
        "required": [
          "severity",
          "message"
        ],
        "title": "ValidationIssue",
        "description": "A single validation issue."
      },
      "ValidationRequest": {
        "properties": {
          "file_id": {
            "anyOf": [
              {
                "type": "string",
                "format": "uuid"
              },
              {
                "type": "null"
              }
            ],
            "title": "File Id",
            "description": "ID of uploaded file to validate against"
          },
          "sample_data": {
            "anyOf": [
              {
                "items": {
                  "additionalProperties": true,
                  "type": "object"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Sample Data",
            "description": "Sample data rows to validate (alternative to file_id)"
          }
        },
        "type": "object",
        "title": "ValidationRequest",
        "description": "Request to validate a schema against a file."
      },
      "ValidationResponse": {
        "properties": {
          "valid": {
            "type": "boolean",
            "title": "Valid",
            "description": "Whether validation passed"
          },
          "total_rows": {
            "type": "integer",
            "title": "Total Rows",
            "description": "Total rows validated"
          },
          "passed_rows": {
            "type": "integer",
            "title": "Passed Rows",
            "description": "Number of rows that passed validation"
          },
          "failed_rows": {
            "type": "integer",
            "title": "Failed Rows",
            "description": "Number of rows that failed validation"
          },
          "issues": {
            "items": {
              "$ref": "#/components/schemas/ValidationIssue"
            },
            "type": "array",
            "title": "Issues",
            "description": "List of validation issues found"
          },
          "summary": {
            "type": "string",
            "title": "Summary",
            "description": "Human-readable validation summary"
          }
        },
        "type": "object",
        "required": [
          "valid",
          "total_rows",
          "passed_rows",
          "failed_rows",
          "summary"
        ],
        "title": "ValidationResponse",
        "description": "Response for schema validation."
      },
      "VersionDiff": {
        "properties": {
          "field": {
            "type": "string",
            "title": "Field",
            "description": "Field that changed (e.g., 'column_mappings.Amount')"
          },
          "change_type": {
            "type": "string",
            "title": "Change Type",
            "description": "Type of change: 'added', 'removed', 'modified'"
          },
          "old_value": {
            "anyOf": [
              {},
              {
                "type": "null"
              }
            ],
            "title": "Old Value",
            "description": "Value in old version (None for 'added')"
          },
          "new_value": {
            "anyOf": [
              {},
              {
                "type": "null"
              }
            ],
            "title": "New Value",
            "description": "Value in new version (None for 'removed')"
          }
        },
        "type": "object",
        "required": [
          "field",
          "change_type"
        ],
        "title": "VersionDiff",
        "description": "Structured diff between two versions."
      }
    },
    "securitySchemes": {
      "JWT": {
        "type": "http",
        "description": "JWT access token (from /auth/login or /auth/register)",
        "scheme": "bearer"
      }
    }
  },
  "tags": [
    {
      "name": "Health",
      "description": "Service health and readiness checks for monitoring and orchestration."
    },
    {
      "name": "Authentication",
      "description": "User registration, login, token management, and password operations. All endpoints return JWT tokens for subsequent authenticated requests."
    },
    {
      "name": "Spaces",
      "description": "Workspace management within tenants. Spaces enable two-level isolation (tenant → space → data) for organizing files, configurations, and resources. All operations are tenant-scoped via JWT authentication."
    },
    {
      "name": "Tenant Management",
      "description": "Tenant CRUD operations (super-admin only). Tenants are top-level organizational units with their own users, spaces, and data. All operations require super-admin privileges and bypass RLS policies."
    },
    {
      "name": "Subdomains",
      "description": "Subdomain availability checking for tenant registration. Public endpoints (no authentication required) for validating subdomain names."
    },
    {
      "name": "Free Tools",
      "description": "Public utility endpoints that don't require authentication."
    },
    {
      "name": "Paid API",
      "description": "Premium API endpoints for AI-powered financial predictions. Requires authentication and active tenant subscription."
    },
    {
      "name": "Transactions",
      "description": "Transaction reconciliation and matching endpoints. Ingest transactions from CSV files, run multi-stage matching algorithms (exact, fuzzy, ML, LLM), approve/reject matches, and get matching statistics. All operations are tenant+space scoped via RLS policies."
    },
    {
      "name": "Files",
      "description": "File upload and management endpoints for CSV files. Upload transaction files with automatic schema detection, list files, update metadata, and delete files. All operations are tenant+space scoped."
    },
    {
      "name": "Schemas",
      "description": "CSV schema detection and management using Claude AI. Automatically detect provider types and column mappings, confirm/modify schemas, manage schema versions, and track usage statistics. All operations are tenant+space scoped."
    },
    {
      "name": "Ingestion",
      "description": "Unified CSV ingestion system with automatic schema matching, validation, and transformation. Upload CSV files with confidence-based routing: high confidence (≥0.95) auto-processes, low confidence requires manual schema selection. Track batch status, view errors, and monitor ingestion progress. All operations are tenant+space scoped."
    }
  ]
}
